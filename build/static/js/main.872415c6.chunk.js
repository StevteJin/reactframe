(this["webpackJsonpnew-list-map"]=this["webpackJsonpnew-list-map"]||[]).push([[0],{114:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAXCAYAAABqBU3hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTE5OUNGODdDNTgwMTFFQTgxOUFDOUM5QjI0OUUzNDMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTE5OUNGODhDNTgwMTFFQTgxOUFDOUM5QjI0OUUzNDMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxMTk5Q0Y4NUM1ODAxMUVBODE5QUM5QzlCMjQ5RTM0MyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxMTk5Q0Y4NkM1ODAxMUVBODE5QUM5QzlCMjQ5RTM0MyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgWsL3UAAAGpSURBVHjavJZPKARRHMffrGEPSsnJxZ9sksKV3MRSyg1HREq07MVJykE5OLBOGxcOyro4ECeRtOWknLRXB7W5iKQ9jO+PnxqT2dnf25n51qde03vv953f773fjKH2LaWhFjAN4qABVIEncAUOwF2pGxlCAyZYB0lQ6TKHNsyAWfDqtWFEGPwELBcJ/vNSSo2DLKjz08AmGBbMb+dMGH4YaAPzGmelD4z5YSDBJdBRwg8DQ0pf3aC2HAMmXzVdUYymYps71QlGQS+oAZ+gQpWnfpDnXuHaByjYFpgQ3g6JbsEKN6w/JaDgF2AqwOCKs3oJ1pwG9kCPCkfUF1a5m36XgFzdeDWMAERnqzXCHxXd4BlGR1GwYHJddJQCSzx+9mo4LopTBuo1FqY5uMXQeFtjn2Yy8CZctAPm/nme5KxIZJGBB8ECmrvI9Us5yhHlTGQF++XIwLFgQSOYAedg0F5LcAZGhG37lK5hNQb3ICZMX46uEY8fbeNSRX9LMcrAO5gEhZD7AJ2jfMTWowfASwiBC/y/eOj8HF+DDrARkJEPcAS6wO7vwy8BBgBLxEv4wxmmCQAAAABJRU5ErkJggg=="},115:function(e,t,a){"use strict";(function(e){a.d(t,"b",(function(){return p})),a.d(t,"a",(function(){return v}));var n=a(9),l=a(10),o=a(2),i=a(12),r=a(11),s=a(0),c=a.n(s),d=a(114),u=a.n(d),m=a(5),h=a.n(m),f=a(1),g=a.n(f),p=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var l;return Object(n.a)(this,a),(l=t.call(this,e)).chakanPicture=function(e){var t=l.state.maskFlag;l.setState({maskFlag:!t,imgUrl:e})},l.state={maskFlag:!1,imgUrl:"",list:[]},a.this=Object(o.a)(l),l}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.alarmValue,a=[];t.forEach((function(e){var t={number:e.device_code,Uptime:e.ex_time,name:e.device_name,question:e.ex_typequ,detailed:e.detail_info,pic:e.pic};a.push(t)})),this.setState({list:a}),g()(document).keyup((function(t){27===t.keyCode&&e.setState({maskFlag:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.list,n=t.maskFlag,l=t.imgUrl,o=this.props.title;return c.a.createElement(s.Fragment,null,n&&c.a.createElement("div",{className:"mask",onClick:function(){return e.chakanPicture()}}),n&&c.a.createElement("img",{src:l,className:"chakanTp",alt:""}),c.a.createElement("div",{className:"exceptionBox"},c.a.createElement("div",{className:"exceptionTop"},c.a.createElement("h2",null,o),c.a.createElement("span",{onClick:this.props.onClick},"\xd7")),c.a.createElement("div",{className:"exceptionTable"},c.a.createElement("table",null,c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("td",null,"\u76f8\u673a\u540d\u79f0"),c.a.createElement("td",null,"\u4e0a\u4f20\u65f6\u95f4"),c.a.createElement("td",null,"\u62a5\u8b66\u7c7b\u578b"),c.a.createElement("td",null,"\u8be6\u7ec6"),c.a.createElement("td",null,"\u64cd\u4f5c")),a.map((function(t,a){return c.a.createElement("tr",{key:a},c.a.createElement("td",null,t.name),c.a.createElement("td",null,t.Uptime),c.a.createElement("td",null,t.question),c.a.createElement("td",null,t.detailed),c.a.createElement("td",{onClick:function(){return e.chakanPicture(t.pic)}},"\u67e5\u770b\u56fe\u7247"))})))))))}}]),a}(s.Component),v=function(t){Object(i.a)(s,t);var a=Object(r.a)(s);function s(t){var l;return Object(n.a)(this,s),(l=a.call(this,t)).upFile=function(){document.getElementById("upFile").click()},l.createImage=function(){var e=document.getElementById("upFile").files[0],t=Object(o.a)(l),a=null;void 0!==e&&((a=new window.FileReader).readAsDataURL(e),a.onload=function(e){t.setState({upImage:e.target.result})})},l.btnPost=function(){var t=Object(o.a)(l),a={headers:{"Content-Type":"multipart/form-data"}},n=g()("#detailInfo").val(),i=new FormData;i.append("detail_info",n),i.append("device_code",s.this.state.device_code),i.append("pic",l.state.upImage),i.append("ex_name",l.state.alarmType),i.append("device_name",l.state.alarmPoint),i.append("files",g()("#upFile")[0].files[0]),console.log(i,a),h.a.post(e.Url+"ex/info/add",i,a).then((function(a){console.log(a),a.data.data&&"success"===a.data.msg?(g()(".PageShow").show().find("h1").html("\u4fdd\u5b58\u6210\u529f"),e.Time(),t.props.onClick()):(g()(".PageShow").show().find("h1").html(a.data.msg),g()(".PageShowCont h2").hide(),e.Time())})).catch((function(e){console.log(e)}))},l.state={alarmPoint:"\u5395\u6240",alarmType:"\u9ed1\u540d\u5355\u62a5\u8b66",upImage:"",device_code:""},s.this=Object(o.a)(l),l}return Object(l.a)(s,[{key:"componentDidMount",value:function(){var e=this.props.details;this.setState({alarmPoint:e.name,alarmType:e.type,device_code:e.code})}},{key:"render",value:function(){var e=this.state,t=e.alarmPoint,a=e.alarmType,n=e.upImage;return c.a.createElement("div",{className:"exceptionBox"},c.a.createElement("div",{className:"exceptionTop"},c.a.createElement("h2",null,"\u62a5\u8b66\u8be6\u60c5"),c.a.createElement("span",{onClick:this.props.onClick},"\xd7")),c.a.createElement("div",{className:"exceptionValue"},c.a.createElement("div",{className:"exceptionHang"},c.a.createElement("label",null,"\u62a5\u8b66\u70b9\uff1a"),c.a.createElement("p",null,t)),c.a.createElement("div",{className:"exceptionHang"},c.a.createElement("label",null,"\u62a5\u8b66\u7c7b\u578b\uff1a"),c.a.createElement("p",null,a)),c.a.createElement("div",{className:"exceptionHang",style:{alignItems:"flex-start"}},c.a.createElement("label",{style:{marginTop:"5px"}},"\u62a5\u8b66\u4fe1\u606f\uff1a"),c.a.createElement("textarea",{name:"",id:"detailInfo",placeholder:"\u62a5\u8b66\u4fe1\u606f"})),c.a.createElement("div",{className:"exceptionHang",style:{alignItems:"flex-start"}},c.a.createElement("label",{style:{marginTop:"5px"}},"\u4e0a\u4f20\u56fe\u7247\uff1a"),c.a.createElement("div",{className:"upPicture",onClick:this.upFile},""!==n&&c.a.createElement("img",{className:"upTupian",src:n,alt:""}),""===n&&c.a.createElement("img",{src:u.a,alt:""}),""===n&&c.a.createElement("span",null,"\u70b9\u51fb\u4e0a\u4f20"),c.a.createElement("input",{type:"file",id:"upFile",onChange:this.createImage}))),c.a.createElement("div",{className:"exceptionHang",style:{justifyContent:"flex-end"}},c.a.createElement("button",{onClick:this.btnPost},"\u4fdd\u5b58\u4fe1\u606f"))))}}]),s}(s.Component)}).call(this,a(18))},117:function(e){e.exports=JSON.parse('{"Url":"http://192.168.0.211:80/api/33010801001/","IframeUrl":"http://192.168.0.106/%E9%A9%AC%E9%9E%8D%E5%B1%B1/","WebSocketUrl":"ws://192.168.0.211:8091","VideoUrl":"http://127.0.0.1:5501/src/play.html"}')},150:function(e,t,a){"use strict";(function(e){var n=a(14),l=a(9),o=a(10),i=a(2),r=a(12),s=a(11),c=a(0),d=a.n(c),u=a(3),m=a(349),h=a(5),f=a.n(h),g=a(1),p=a.n(g),v=function(t){Object(r.a)(h,t);var a=Object(s.a)(h);function h(e){var t;return Object(l.a)(this,h),(t=a.call(this,e)).receiveMessage=function(e){void 0!==e&&e.data&&e.data.name&&console.log("\u63a5\u53d7iframe\u7684\u6570\u636e",e.data)},t.handleClick=function(){document.getElementById("core_content").contentWindow.postMessage(1233,"*")},t.state={addOption:!1,modelId:""},h.this=Object(i.a)(t),t}return Object(o.a)(h,[{key:"componentDidMount",value:function(){this.Build(),this.ThirdParty(),console.log(e.IframeUrl+"?number="+(new Date).getTime()),window.receiveMessageFromIndex=function(e){if(void 0!==e)switch(e.data.switchName){case"MessageBox":console.log(e.data),p()(".PageShowOne").show().find("h1").html(e.data.text.Title+e.data.text.txt);break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1)}},{key:"Build",value:function(){var t=[];f.a.get(e.Url+"map/build/list",{}).then((function(a){var n=a.data.data;if(n&&"success"===a.data.msg)for(var l=function(a){f.a.post(e.Url+"map/floor/list",{build_id:n[a].id}).then((function(l){var o=l.data.data;if(o&&"success"===l.data.msg){t.push({FloorItems:n[a],Floorlists:o});var i=JSON.stringify(t);sessionStorage.setItem("Floor",i)}else p()(".PageShow").show().find("h1").html(l.data.msg),e.Time()}))},o=0;o<n.length;o++)l(o);else alert(a.msg)}))}},{key:"ThirdParty",value:function(){var e=new WebSocket("ws://localhost:1017");e.onopen=function(t){console.log("webSocket is open"),e.send("subscribe")},e.onmessage=function(t){console.log(t.data);var a=JSON.parse(t.data);if("subscribe success"!==t.data)switch(a.Event){case"onResetCoordinates":u.a.onResetCoordinates(),e.send(JSON.stringify({msg:"\u590d\u4f4d\u65b9\u6cd5\u8c03\u7528\u6210\u529f"}));break;default:return null}},window.addEventListener("message",(function(e){switch(e.data.Event){case"bubbleElimination":console.log(e.data.parameter.id,"bubbleElimination\u7684\u8fd4\u56de\u503c");var t={id:e.data.parameter.id,type:1};u.a.removeBubbleBombbox(t),u.a.endVod(),u.a.deleteRoamingRoute(),p()(".iframeBut").hide(),u.a.onMap(),u.a.endVod();break;default:return null}}),!1)}},{key:"handleImageChange",value:function(e){var t=e.target.files[0],a=(window.URL||window.webkitURL).createObjectURL(t);h.this.setState({uploadData:Object(n.a)(Object(n.a)({},this.state.uploadData),{},{img:a,imgShow:!0})})}},{key:"render",value:function(){return d.a.createElement(c.Fragment,null,d.a.createElement("iframe",{id:"core_content",name:"iframeName",ref:"core_content",title:"core_content",src:e.IframeUrl+"?number="+(new Date).getTime(),style:{width:"100%",height:"100%"},sandbox:"allow-same-origin allow-scripts allow-popups allow-forms allow-downloads",scrolling:"auto",onLoad:u.a.List}),d.a.createElement(m.a,null))}},{key:"componentWillUnmount",value:function(){}}]),h}(c.Component);t.a=v}).call(this,a(18))},152:function(e,t,a){"use strict";var n=a(9),l=a(10),o=a(12),i=a(11),r=a(0),s=a.n(r),c=(a(44),a(16)),d=a(38),u=a(3),m=a(1),h=a.n(m),f=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.clickIcon,a=e.index;return s.a.createElement("li",{type:"button",onClick:function(){return t(1)},className:1===a?"active":""},s.a.createElement("i",{className:"icon1"}),"\u590d\u4f4d")}}]),a}(r.PureComponent),g=Object(c.b)((function(e){return{index:e.footer.get("index")}}),(function(e){return{clickIcon:function(t){e(d.a.click_Icon(t)),u.a.onResetCoordinates(),h()("#liu").css({display:"none"})}}}))(f),p=a(350),v=a(352),y=a(353),b=a(2),E=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).state={activeBtn:!1},e.changeStatus=e.changeStatus.bind(Object(b.a)(e)),e}return Object(l.a)(a,[{key:"changeStatus",value:function(){this.setState({activeBtn:!this.state.activeBtn})}},{key:"render",value:function(){var e=this,t=this.props,a=t.clickIcon,n=t.index,l=this.state.activeBtn;return s.a.createElement("li",{onClick:function(){a(5),e.changeStatus()},className:l&&5===n?"active":""},s.a.createElement("i",{className:"icon5"}),"\u6307\u5317")}}]),a}(r.PureComponent),w=Object(c.b)((function(e){return{index:e.footer.get("index")}}),(function(e){return{clickIcon:function(t){e(d.a.click_Icon(t)),u.a.onNorth(),h()("#liu").css({display:"none"})}}}))(E),S=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var l;return Object(n.a)(this,a),(l=t.call(this,e)).state={item:0},l}return Object(l.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"footer"},s.a.createElement("div",{className:"footerContent"},s.a.createElement(g,null),s.a.createElement(p.a,null),s.a.createElement(v.a,null),s.a.createElement(y.a,null),s.a.createElement(w,null)),s.a.createElement("div",{className:"PageShow"},s.a.createElement("div",{className:"PageShowCont"},s.a.createElement("h1",null,"\u4fdd\u5b58\u6210\u529f\uff01"))))}}]),a}(r.Component);t.a=S},208:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAKIElEQVR4Xu2dS4hc1RaG166yjUlVJxpTJ+QSw/VFp6sdmfiAOEjgKjpRLhcEwYmCEXUmzhRE0JmCExWCggNBnIiPwb2okBYjqCQ4savijUaxkdDVEhK7OlGTqi2lJj6i5al9+qxzdq0vk0xqn7XWt/+v965KKnHCLwhA4C8JONhAAAJ/TQBBSAcEhhBAEOIBAQQhAxAII8AJEsaNVUYIIIiRjWbMMAIIEsaNVUYIIIiRjWbMMAIIEsaNVUYIIIiRjWbMMAIIEsaNVUYIIIiRjWbMMAIIEsaNVUYIIIiRjWbMMAIIEsaNVUYIjI0gS0e27sy6Z5ObDs5mfcY4rIflr7s4NoJ0O02fLZx+tp60d2V7xnis7nam94q4TD9w6klrLLI1FkMMYokgKycngnCC/EmaOEHOQEEQBEGQIQcOgiAIgiBIqjsp70HOYuKKxRXrXGcQBEHOSQVXLK5YXLG4YnHFSkWAE4QTZEhQuGIhCIIgSJqzhDfpvEnnTfoQUxAEQRAEQVIcpnyKxadYfIrFp1gpflSI8CadN+m8SedNepofFrwH4T1IJO9BvN953onFzo1O5IqeyJWD30X86uExz/b9BRHPl6V+Bzhvnu6kF/msKnJo8PuaRvK2c7On0/wo03xNqa5Y3cWZO8T7f4mTO8XL+ZogqFUwASc/iJeXxLl36o25lwvu5mz5UgiyvNjc7b3sFpFtZQFDH4USOOCc7Kk1WnsK7UIKfpM++O6zq1aeRIyiY1Da+gd8r/9Qkf9WQGEnyC9yvCUiE6XdHhorA4FTvte/qShJChHku4WrLj/t+p+VgT49xEFgoupmVl0819LuVl2Q4/Mz66ur+odF3DrtYakXN4EiJFEXZGmh+ZpzclvcW0X3hRBwMjdRcbdrniSqgix3ph/24h4vBC5Fx4XAi/WkdZfWMGqCHD8yc815VXnX/+0f+GmNTp1oCVT8jfUN7Xc0+lcThKuVxnaaqfFmPWndqjGtiiD792+bmNpy8hsnslZjKGqMP4FK5fTmNRv+/3Xek6oIcmJhZkff+X15D8Pz7RBwzt9Ta7Sfz3tiFUG6C80HxclTeQ/D8+0QcOJfrSXt/+Q9sY4gneYLInJ33sPwfFMEPq4nravznlhFkOVOc58X2ZH3MDzfFIH5etLakvfEKoJ0O81FEdmQ9zA83w4BJ3KilrRqeU+sJUjG/9wmbww8P0YCGv9JD4LEmAx6/okAghAECAwhgCDEAwIIQgYgEEaAEySMG6uMEEAQIxvNmGEEECSMG6uMEEAQIxvNmGEEECSMG6uMEEAQIxvNmGEEECSMG6uMEEAQIxvNmGEEECSMG6uMEEAQIxvNmGEEECSMG6uMEEAQIxvNmGEEECSMG6uMEEAQIxvNmGEEECSMG6uMEEAQIxvNmGEEECSMG6uMEEAQIxvNmGEEECSMG6uMEEAQIxvNmGEEEOQsNz9bT9q7wjCyqowEup3pvSJuZ5beEARBsuSn1GsR5Dfb0+00M/7To5wgpU57QHMIgiABsbGzBEEQxE7aAyZFEAQJiI2dJQiCIHbSHjApgiBIQGzsLEEQBLGT9oBJEQRBAmJjZwmCIIidtAdMiiAIEhAbO0sQBEHspD1gUgRBkIDY2FmCIAhiJ+0BkyIIggTExs4SBCmZIEtHtmb67sFgnMlNB2ezRHgleihLH1lZIEjJBCnDhgwEcdXK3iyS+V5/V/ZwFv/1gzLsR5p9cGlelPU1Zfg+SBk2BEF+TVIZ9iNNrhEkDaVfXpP1K54IgiB/GjdOkJ+xIAiCIMiQEwlBEARBECTVpZX3IHyKdU5QOEE4QThBOEE4QVIR4AThBBkSFK5YCIIgCJLuLOFjXj7m/WNSOEE4QThBOEE4QdIR4AThBBn604K/HMefpP8+IFyxuGJxxeKKle6CwZt0rlhcsUp+xVqJLytl/R7GSvQwwFyGPrL2wBWrZFesdGcdr9IigCAIopW1KOsgCIJEGVytphEEQbSyFmUdBEGQKIOr1TSCIIhW1qKsgyAIEmVwtZpGEATRylqUdRAEQaIMrlbTCIIgWlmLsg6CIEiUwdVqGkEQRCtrUdZBEASJMrhaTSMIgmhlLco6CIIgUQZXq2kEQRCtrEVZB0EQJMrgajWNIAiilbUo6yAIgkQZXK2mEQRBtLIWZR0EQZAog6vVNIIgiFbWoqyDIAgSZXC1mkYQBNHKWpR1EARBogyuVtMIgiBaWYuyDoIgSJTB1WoaQRBEK2tR1kEQBIkyuFpNIwiCaGUtyjoIgiBRBleraQRBEK2sRVkHQRAkyuBqNY0gCKKVtSjrIAiCRBlcraYRBEG0shZlHQRBkCiDq9U0giCIVtairIMgCBJlcLWaRhAE0cpalHUQBEGiDK5W0wiCIFpZi7IOgiBIlMHVahpBEEQra1HWQRAEiTK4Wk0jCIJoZS3KOgiCIFEGV6tpBEEQraxFWQdBECTK4Go1jSAIopW1KOsgCIJEGVytphEEQbSyFmUdBEGQKIOr1TSCIIhW1qKsgyAIEmVwtZpGEATRylqUdRAEQaIMrlbTCLLCgvief0xr86iTPwFXdY+KuJ1ZKtWTlsuyPs3a3AsMmuh2msdEZF2ahngNBFISOF5PWhemfG3wy1QEWVpofu6cXBbcJQsh8AcC3svhyY2ty/MGoyJId6H5oTi5Nu9heL4hAl4+qm9sXZf3xCqCLC1MP+Ocuz/vYXi+HQLe+2cnN7YfyHtiFUG6nZmbRfx/8x6G51si4G6pJ3P/y3tiFUH8F/+8YHnN6q/EuUbeA/F8AwS8X6ydOLnFXfrld3lPqyLIYIjlxZlnvff35T0Qzx9/As6552qNOZUru5ogS99cNe36/Q9EZO34byET5kjgW1+pXD+54ZN2jjXOPlpNkEHFpc7M4078wxqDUWM8CXhxT0wmc49oTacqyKFDV6zatG5in4jbrjUgdcaJgJ+tJ+1dmhOpCjIY7OSxqUt7P1QPaw5JrXEg4L+uJ+3N2pOoC/KTJJ3mDT2R97SHpV60BI7Vk9ZFRXRfiCA/f6o19Q/x1Ve8yA1FDE7NOAg4J6/VGq1/F9VtYYIMBp6f37z6wvPXPu2c7C4KAHXLS8B72TO5sXVvkR0WKsiZwZcXt27r9yu7EaXIKJSn9kCMSqW/p9Y4eKDorkohyBkI3y5OTVX6lducc7d6kR1Fw6G+HgEn8r73/o1+pf/62sann+pVHl6pVIL8ttX9+7dNbL3k+/W+KuurPb++1+9NlAUafWQnUK1UT/Wq7qjrydGD86uObt9+4FT2p678E0oryMqPyhMhMDoBBBmdGSsMEUAQQ5vNqKMTQJDRmbHCEAEEMbTZjDo6AQQZnRkrDBFAEEObzaijE0CQ0ZmxwhABBDG02Yw6OgEEGZ0ZKwwRQBBDm82ooxNAkNGZscIQAQQxtNmMOjoBBBmdGSsMEUAQQ5vNqKMTQJDRmbHCEIEfASsz8iPLNFAaAAAAAElFTkSuQmCC"},21:function(e,t,a){"use strict";var n={};a.r(n),a.d(n,"nav_click",(function(){return r}));var l=a(149),o=Object(l.a)({adminItem:0,adminIndex:0,adminIndexItem:0}),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"admin/CLICK_NAV":return e.merge({adminItem:t.id,adminIndex:t.item,adminIndexItem:0});default:return e}},r=function(e,t){return{type:"admin/CLICK_NAV",id:e,item:t}};a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return n}))},219:function(e,t,a){},22:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAKvWlDQ1BEaXNwbGF5AABIiZWWd1RTeRbH73svnYSWgHRCDUWQXqWEHoogHUQlJAECIcQQULErgyM4FkREQB3RUQEFKyBjxYKFQcBeJ8igoI6DjthQs3+whJndPbtn7znvvM/5vvv73nt/5/1xAagfuRKJCFUHyBPLpLGhAczklFQm8TdAAAEyEMCWyyuQsGNiIgEAJt9/j/d3AAEAuGnHlUhE//79v4YGX1DAA0BiACCDX8DLA0COAyBynkQqA8AqAcBsoUwiA8DaAYAhTU5JBcC6AYCRNcFyAGBkTPA7AGBI42MDAXAkABKVy5VmAVAZAMAs4mXJAKguAOAg5gvFAFQ+APjysrl8AOpeAJiel5fPB6D2AoBVxl98sv7mmaH05HKzlDwxCwAAkIKEBRIRd/H/eR3/O/JEhZM1LAGAmi0NiwUAEgByLzc/QsnijFnRkyzkT/QEgNzLLgxLmGReQWDqJPO5QRHKs6JZkZOcKQzhKH1knPhJFhQEx02yND9WWStTGsieZK50qm5hboJSzxZwlP7F2fFJk1wkTJw1yQW5cRFTOYFKXVoYq+xfIA4NmKobopw9r+Av8wo5yrOy7Pgw5ezcqf4FYvaUZ0Gysje+ICh4KidBmS+RBShrSUQxynyBKFSpFxTFKc/KpPFT+bIY5R3mcMNjJhmEEAVc4MkEi2QAAIH5ksVSYVa2jMmWSEQCJkfMs5/OdHJwcgBITkllTvwCozcAAQBEV2NKK00D8H2pUChap7SwGwBHXgNQPk9prEYANRbAlWW8QmnRhIYDAMADBdSAAbpgBGZgBXbgBG7gDf4QDOEQDfGQAvOAB9mQB1JYCEthFZRCOWyCrVADu2APHIBDcBTa4BSch8twHXrhNjwEOQzBSxiF9zCOIAgRoSF0RBcxRiwQW8QJ8UB8kWAkEolFUpB0JAsRI4XIUmQNUo5UIDXIbqQBOYKcRM4jV5E+5D4ygIwgb5HPKIZSUQZqiFqiM1APlI1GoPHoXDQLXYAWoyXoBrQarUcPoq3oefQ6ehuVoy/RMQwwFUwbM8HsMA8sEIvGUrFMTIotx8qwKqwea8Y6sC7sJibHXmGfcAQcHcfE2eG8cWG4BBwPtwC3HLceV4M7gGvFXcTdxA3gRnHf8DS8Ad4W74Xn4JPxWfiF+FJ8FX4f/gT+Ev42fgj/nkAgaBNYBHdCGCGFkENYQlhP2EFoIZwj9BEGCWNEIlGXaEv0IUYTuUQZsZS4nXiQeJbYTxwifiSpkIxJTqQQUipJTFpNqiI1ks6Q+knPSeNkdbIF2YscTeaTF5M3kveSO8g3yEPkcYoGhUXxocRTciirKNWUZsolyiPKnyoqKqYqniqzVYQqK1WqVQ6rXFEZUPlE1aTaUAOpadRC6gbqfuo56n3qnzQazZLmT0ulyWgbaA20C7QntI+qdFV7VY4qX3WFaq1qq2q/6ms1spqFGlttnlqxWpXaMbUbaq/UyeqW6oHqXPXl6rXqJ9Xvqo9p0DUcNaI18jTWazRqXNUY1iRqWmoGa/I1SzT3aF7QHKRjdDN6IJ1HX0PfS79EH2IQGCwGh5HDKGccYvQwRrU0tVy0ErUWadVqndaSa2PaltocbZH2Ru2j2ne0P08znMaeJpi2blrztP5pH3T0dfx1BDplOi06t3U+6zJ1g3VzdTfrtuk+1sPp2ejN1luot1Pvkt4rfYa+tz5Pv0z/qP4DA9TAxiDWYInBHoNugzFDI8NQQ4nhdsMLhq+MtI38jXKMKo3OGI0Y0419jYXGlcZnjV8wtZhspohZzbzIHDUxMAkzKTTZbdJjMm7KMk0wXW3aYvrYjGLmYZZpVmnWaTZqbmweZb7UvMn8gQXZwsMi22KbRZfFB0uWZZLlWss2y2GWDovDKmY1sR5Z0az8rBZY1VvdsiZYe1jnWu+w7rVBbVxtsm1qbW7YorZutkLbHbZ90/HTPaeLp9dPv2tHtWPbFdk12Q3Ya9tH2q+2b7N/PcN8RuqMzTO6ZnxzcHUQOex1eOio6RjuuNqxw/Gtk40Tz6nW6ZYzzTnEeYVzu/MbF1sXgctOl3uudNco17Wuna5f3dzdpG7NbiPu5u7p7nXudz0YHjEe6z2ueOI9AzxXeJ7y/OTl5iXzOur1h7edd653o/fwTNZMwcy9Mwd9TH24Prt95L5M33TfH33lfiZ+XL96v6f+Zv58/33+z9nW7Bz2QfbrAIcAacCJgA+BXoHLAs8FYUGhQWVBPcGawQnBNcFPQkxDskKaQkZDXUOXhJ4Lw4dFhG0Ou8sx5PA4DZzRcPfwZeEXI6gRcRE1EU8jbSKlkR1RaFR41JaoR7MsZolntUVDNCd6S/TjGFbMgpifZxNmx8yunf0s1jF2aWxXHD1uflxj3Pv4gPiN8Q8TrBIKEzoT1RLTEhsSPyQFJVUkyZNnJC9Lvp6ilyJMaU8lpiam7ksdmxM8Z+ucoTTXtNK0O3NZcxfNvTpPb55o3un5avO584+l49OT0hvTv3CjufXcsQxORl3GKC+Qt433ku/Pr+SPCHwEFYLnmT6ZFZnDWT5ZW7JGsv2yq7JfCQOFNcI3OWE5u3I+5Ebn7s9ViJJELXmkvPS8k2JNca74Yr5R/qL8PomtpFQiX+C1YOuCUWmEdF8BUjC3oF3GkElk3YVWhd8VDhT5FtUWfVyYuPDYIo1F4kXdi20Wr1v8vDik+KcluCW8JZ1LTZauWjqwjL1s93JkecbyzhVmK0pWDK0MXXlgFWVV7qpfVjusrlj9bk3Smo4Sw5KVJYPfhX7XVKpaKi29u9Z77a7vcd8Lv+9Z57xu+7pvZfyya+UO5VXlX9bz1l/7wfGH6h8UGzI39Gx027hzE2GTeNOdzX6bD1RoVBRXDG6J2tJayawsq3y3df7Wq1UuVbu2UbYVbpNXR1a3bzffvmn7l5rsmtu1AbUtdQZ16+o+7ODv6N/pv7N5l+Gu8l2ffxT+eG936O7Wesv6qj2EPUV7nu1N3Nv1k8dPDfv09pXv+7pfvF9+IPbAxQb3hoZGg8aNTWhTYdPIwbSDvYeCDrU32zXvbtFuKT8MhwsPvziSfuTO0Yijncc8jjUftzhed4J+oqwVaV3cOtqW3SZvT2nvOxl+srPDu+PEz/Y/7z9lcqr2tNbpjWcoZ0rOKM4Wnx07Jzn36nzW+cHO+Z0PLyRfuHVx9sWeSxGXrlwOuXyhi9119orPlVNXva6evOZxre262/XWbtfuE7+4/nKix62n9Yb7jfZez96Ovpl9Z/r9+s/fDLp5+Rbn1vXbs2733Um4c+9u2l35Pf694fui+28eFD0Yf7jyEf5R2WP1x1VPDJ7U/2r9a4vcTX56IGig+2nc04eDvMGXvxX89mWo5BntWdVz4+cNw07Dp0ZCRnpfzHkx9FLycvxV6e8av9e9tnp9/A//P7pHk0eH3kjfKN6u/1P3z/3vXN51jsWMPXmf9378Q9lH3Y8HPnl86vqc9Pn5+MIvxC/VX62/dnyL+PZIkadQSLhSLgAAYACAZmYCvN0PQEsBoPcCUOZM7NAAAIBM7P0AEzvIf+aJPRsAANwAmgEgFgDYAHAMACz9AVQBINofIN4fUGdn5fPPKMh0dprwUm0CIJooFG/zAcj5AF9CFYrxGIXiax0AdgvgzPDE7g4AQFAHaNaf++6g4c3+TvjX+AdiWhDBvzAA6wAAAAlwSFlzAAALEwAACxMBAJqcGAAACaVpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNyAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjAtMDEtMTVUMTc6MzA6NTIrMDg6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjAtMDItMjJUMTU6NTQ6MjIrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIwLTAyLTIyVDE1OjU0OjIyKzA4OjAwIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjIzMTQ0NzcyLTNlY2MtZGE0OS04ZDE4LWZhOTEwOWExOTFhYiIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjFlZTBlYmZlLTc4MDgtMTE3ZC1iYzVjLWQzMTgyMGMyY2VmZiIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjg0ZjZjZDFjLWJiOTgtNGZjMi1hMDM1LWI5NmM5YWNhM2UxYSIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9IkRpc3BsYXkiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiB0aWZmOk9yaWVudGF0aW9uPSIxIiB0aWZmOlhSZXNvbHV0aW9uPSI3MjAwMDAvMTAwMDAiIHRpZmY6WVJlc29sdXRpb249IjcyMDAwMC8xMDAwMCIgdGlmZjpSZXNvbHV0aW9uVW5pdD0iMiIgZXhpZjpDb2xvclNwYWNlPSI2NTUzNSIgZXhpZjpQaXhlbFhEaW1lbnNpb249IjQ4IiBleGlmOlBpeGVsWURpbWVuc2lvbj0iNDgiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjg0ZjZjZDFjLWJiOTgtNGZjMi1hMDM1LWI5NmM5YWNhM2UxYSIgc3RFdnQ6d2hlbj0iMjAyMC0wMS0xNVQxNzozMDo1MiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjk5MDM1ZjA4LWJmOGItNGE4MS1hMDQxLTFmMDkyYjhlZDIwZSIgc3RFdnQ6d2hlbj0iMjAyMC0wMS0xNVQxNzozMDo1MiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjIzMTQ0NzcyLTNlY2MtZGE0OS04ZDE4LWZhOTEwOWExOTFhYiIgc3RFdnQ6d2hlbj0iMjAyMC0wMi0yMlQxNTo1NDoyMiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8cGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8cmRmOkJhZz4gPHJkZjpsaT5hZG9iZTpkb2NpZDpwaG90b3Nob3A6NTNkNWFlY2EtNzczZS0xMTdkLTliZGYtY2E1ODBiOWExMGI1PC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDo2ZGVhOGU5YS1jOTIxLTQwZjktYTAwMC0wY2M4NDgxZTJmMDg8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOkU0NTJDRUIyOTcyMjExRTk4Njk4RDJGRDlCOUVFQzFEPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDpjM2VkYzcxYS0xNzA3LTQwYjYtODI5Yi1iNmYxZjU2YjkyYmQ8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOmM3MGIxNWY5LTk0ZTgtNGZlOS1hMzljLTc5N2I4N2Q0NjcyYjwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6ZjJmZjU0ODAtNjJlZS00ZTVjLWEzNmUtYTlhMDdjODY4ODhhPC9yZGY6bGk+IDwvcmRmOkJhZz4gPC9waG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+7yqu9wAAAuJJREFUaIHtmU1PE0EYx//P7Dt9AdpCRIK4CQfhgNEQ0UDiQT2BBy7Gkx+BmwmfQr+DiYk3b1w4aGIk4oVEExqjDSaKlJQWKC1t92XGQyGRUhIdu25q9pfsYdPsM88v02d2nh0izVwSbt1Dl0GaqVqjU5cJwGMAStgJSeCDSGHozuQBQIEQHgs7i79FDSiuAOAC8NGcYQ0ABTFQEAKCGQlFH7AvKLFUwq+WDp3CZoE3Dn0EIKEAmO1wTDd+9b499ODpQmZu6XaPfWvE3d/KO9vZAjpfbzyIGmgkJudm9MGxYbf0A/rg2HBicm4GQCOAsRCEgCCm6CAGCAEQAzFFR7MuOk7Xr0KRQNhEAmETCYRNJBA2XS9w3m5UAOCSMX0IcXrb0Lz3jy8ZGM7ZyRKApV/uuRJL6b03H433Tj+8R0w1JAbjSk9/nDRLheAAMQi35vlHexVIzLjgXuNg7cXKwbtnWb9aclpieK0z4OgZeyR9d3Ge6fGk7O5d+B4g+EkGIM1StVSiTy4YkL6zOF/78qZUq5ZyAMxff24V4MyIWXrGTrp725D/F7UmwSE8R/JhBn3QTjIjbrVLqFVA9co7peqn11lrbHacSG4K/OoehFtDc0vNQZoFJdYvFUtwH9Xsqw2vnC+1yfdMDQjSTGZdup4x7RsTREyTGLORvLYwbQxNpLlbA9MsNLY3iuX1l2sA/rimBPfd+ub7jdq39V3h1jlOF/OZGiDh1vlRbnXrKLeak0geAPaNoSuj5uhUGm4NpPegkc/miytPngPok4xp4pwPA+2WUQKgH19SkGqop4pYNVQ0k0/KxjyPrn+RRQJhEwmETSQQNpFA2EQCYRMJhE0k0AYS3HeaDT0BEBDCdxDQIV8QAkbl4/Jbp5Db0lIX4ex8/l75sLwKiW7sd2htKTuBYGZC0TP2AIulErxSLDvFr7u8HsgppReEAPDvzonP9MSd4qQtDZz/YhWS/V4ZNj6I1J+wxPjvqQd3fQAAAABJRU5ErkJggg=="},3:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return i}));var n,l=a(1),o=a.n(l),i={List:function(){n=document.getElementById("core_content");var t={Event:"",ModName:"initEarth",parameter:e.Url};null!=n&&(n.contentWindow.postMessage(t,"*"),t={Event:"",ModName:"InitializeBase",parameter:{Serverurl:sessionStorage.getItem("Serverurl"),data_type:sessionStorage.getItem("data_type"),APIURL:e.Url,green:!0}},null!=n&&(n.contentWindow.postMessage(t,"*"),t.Event="ClickCoordinates()",t.ModName="",t.parameter={},null!=n&&n.contentWindow.postMessage(t,"*")))},InitializeAccessControl:function(){n=document.getElementById("core_content");var t={Event:"",ModName:"initEarth",parameter:e.Url};null!=n&&(n.contentWindow.postMessage(t,"*"),t={Event:"",ModName:"InitializeAccessControl",parameter:{Serverurl:sessionStorage.getItem("Serverurl"),data_type:sessionStorage.getItem("data_type"),APIURL:e.Url,green:!0}},null!=n&&(n.contentWindow.postMessage(t,"*"),t.Event="ClickCoordinates()",t.ModName="",t.parameter={},null!=n&&n.contentWindow.postMessage(t,"*")))},onMap:function(){i.closeHistoricalTrack();var t={Event:"",ModName:"InitializeBase",parameter:{Serverurl:sessionStorage.getItem("Serverurl"),data_type:"normal",APIURL:e.Url,green:!0}};null!=n&&n.contentWindow.postMessage(t,"*")},onResource:function(){var t={Event:"",ModName:"InitializeBase",parameter:{Serverurl:sessionStorage.getItem("Serverurl"),data_type:"normal",green:!1,APIURL:e.Url}};null!=n&&n.contentWindow.postMessage(t,"*")},onSurveillance:function(){var t={Event:"",ModName:"InitializeBase",parameter:{Serverurl:sessionStorage.getItem("Serverurl"),data_type:"virtual",APIURL:e.Url,green:!0}};null!=n&&n.contentWindow.postMessage(t,"*")},onResetCoordinates:function(){var t={Event:"",ModName:"ResetCoordinates",parameter:{APIURL:e.Url}};null!=n&&n.contentWindow.postMessage(t,"*")},onRetrospectiveCameraView:function(){var e={Event:"RetrospectiveCameraView("+sessionStorage.getItem("dataZB")+")",ModName:"",parameter:{}};null!=n&&n.contentWindow.postMessage(e,"*")},onCoordinate:function(){null!=n&&n.contentWindow.postMessage({Event:"",ModName:"getCameraView",parameter:{}},"*")},ClickCoordinates:function(){null!=n&&n.contentWindow.postMessage({Event:"ClickCoordinates()",ModName:"",parameter:{}},"*")},onNorth:function(){null!=n&&n.contentWindow.postMessage({Event:"",ModName:"FaceNorth",parameter:{}},"*")},FlightRoaming:function(){null!=n&&n.contentWindow.postMessage({Event:"FlightRoaming()",ModName:"",parameter:{data:[{longitude:121.40564823189915,dimension:31.21298123666682,height:0,time:0},{longitude:121.40751023270903,dimension:31.212981239617275,height:0,time:5},{longitude:121.40752270803132,dimension:31.21208752552693,height:0,time:10}],flyTovalue:{x:121.40564823189915,y:31.21298123666682,z:2e3}}},"*")},manyouhh:function(){null!=n&&n.contentWindow.postMessage({Event:"manyouhh()",ModName:"",parameter:{}},"*")},MeasurementHeight:function(){null!=n&&n.contentWindow.postMessage({Event:"MeasurementHeight()",ModName:"",parameter:{}},"*")},RemoveHeight:function(){null!=n&&n.contentWindow.postMessage({Event:"RemoveHeight()",ModName:"",parameter:{}},"*")},measureLineSpace:function(){null!=n&&n.contentWindow.postMessage({Event:"measureLineSpace()",ModName:"",parameter:{}},"*")},RemoveLine:function(){null!=n&&n.contentWindow.postMessage({Event:"RemoveLine()",ModName:"",parameter:{}},"*")},measureAreaSpace:function(){null!=n&&n.contentWindow.postMessage({Event:"measureAreaSpace()",ModName:"",parameter:{}},"*")},RemoveArea:function(){null!=n&&n.contentWindow.postMessage({Event:"RemoveArea()",ModName:"",parameter:{}},"*")},RainwaterSystemV2:function(){null!=n&&n.contentWindow.postMessage({Event:"RainwaterSystemV2()",ModName:"",parameter:{}},"*")},RainDelete:function(){null!=n&&n.contentWindow.postMessage({Event:"RainDelete()",ModName:"",parameter:{}},"*")},snowDelete:function(){null!=n&&n.contentWindow.postMessage({Event:"snowDelete()",ModName:"",parameter:{}},"*")},snowSystemV2:function(){null!=n&&n.contentWindow.postMessage({Event:"snowSystemV2()",ModName:"",parameter:{}},"*")},lightDelete:function(){null!=n&&n.contentWindow.postMessage({Event:"lightDelete()",ModName:"",parameter:{}},"*")},enableLightingV2:function(){null!=n&&n.contentWindow.postMessage({Event:"enableLightingV2()",ModName:"",parameter:{}},"*")},Fogging:function(){null!=n&&n.contentWindow.postMessage({Event:"Fogging()",ModName:"",parameter:{}},"*")},fogDelete:function(){null!=n&&n.contentWindow.postMessage({Event:"fogDelete()",ModName:"",parameter:{}},"*")},enableLighting:function(){null!=n&&n.contentWindow.postMessage({Event:"enableLighting()",ModName:"",parameter:{}},"*")},CoordinateLocation:function(e){var t={Event:"",ModName:"CoordinateLocation",parameter:{x:e.x,y:e.y,z:e.z,h:e.h,p:e.p,r:e.r,duration:3}};null!=n&&n.contentWindow.postMessage(t,"*")},InterceptImg:function(){null!=n&&n.contentWindow.postMessage({Event:"InterceptImg()",ModName:"",parameter:{}},"*")},GeoaddlabelV2:function(e,t){var a={Event:"",ModName:"GeoaddlabelV2",parameter:{labeltxt:e,labelid:t}};null!=n&&n.contentWindow.postMessage(a,"*")},ModifyLabel:function(e){var t={Event:"",ModName:"ModifyLabel",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},onMenuClickedV2:function(e,t){var a={Event:"",ModName:"onMenuClickedV2",parameter:{id:e,items:t}};null!=n&&n.contentWindow.postMessage(a,"*")},onMenuClickedV3:function(e,t){var a={Event:"",ModName:"onMenuClickedV3",parameter:{id:e,items:t}};null!=n&&n.contentWindow.postMessage(a,"*")},CoordinateModel:function(e){var t={Event:"",ModName:"CoordinateModel",parameter:{id:e}};null!=n&&n.contentWindow.postMessage(t,"*")},ShowSpecifiedModel:function(e){var t={Event:"",ModName:"ShowSpecifiedModel",parameter:{items:e}};null!=n&&n.contentWindow.postMessage(t,"*")},GeoaddlabelV3:function(e){var t={Event:"",ModName:"GeoaddlabelV3",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},CustomView:function(e){var t={Event:"",ModName:"CustomView",parameter:{id:e}};null!=n&&n.contentWindow.postMessage(t,"*")},ClearCustomView:function(e){var t={Event:"",ModName:"ClearCustomView",parameter:{id:e}};null!=n&&n.contentWindow.postMessage(t,"*")},ResetLabel:function(){null!=n&&n.contentWindow.postMessage({Event:"ResetLabel()",ModName:"",parameter:{}},"*")},drawPoint:function(e){var t={Event:"",ModName:"drawPoint",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},drawPolyline:function(e){var t={Event:"",ModName:"drawPolyline",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},drawPolygon:function(e){var t={Event:"",ModName:"drawPolygon",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},AddPictureLabel:function(e){var t={Event:"",ModName:"AddPictureLabel",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},ClickDisplayLayer:function(e){var t={Event:"",ModName:"ClickDisplayLayer",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},Emptyentities:function(e){var t={Event:"",ModName:"Emptyentities",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},Modifybillboard:function(e){var t={Event:"",ModName:"Modifybillboard",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},ClearHandler:function(){null!=n&&n.contentWindow.postMessage({Event:"ClearHandler()",ModName:"",parameter:{}},"*")},editEntity:function(){null!=n&&n.contentWindow.postMessage({Event:"editEntity()",ModName:"",parameter:{}},"*")},ModifyPolyline:function(e){var t={Event:"",ModName:"ModifyPolyline",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},ModifyPolygon:function(e){var t={Event:"",ModName:"ModifyPolygon",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},PreviewGrid:function(e){var t={Event:"",ModName:"PreviewGrid",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},modifyGrid:function(e){var t={Event:"",ModName:"modifyGrid",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},showGrid:function(e){var t={Event:"",ModName:"showGrid",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},AddBubbleLabel:function(e){var t={Event:"",ModName:"AddBubbleLabel",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},CoordinateModelID:function(e){var t={Event:"",ModName:"CoordinateModelID",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},dxsFlyTo:function(e){var t={Event:"",ModName:"dxsFlyTo",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},removeBubbleLabel:function(e){var t={Event:"",ModName:"removeBubbleLabel",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},AlarmBox:function(e){var t={Event:"",ModName:"AlarmBox",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},removeBubbleBombox:function(e){var t={Event:"",ModName:"removeBubbleBombox",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},ModifyModelCoordinates:function(e){var t={Event:"",ModName:"ModifyModelCoordinates",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},remove3DTilesV2:function(e){var t={Event:"",ModName:"remove3DTilesV2",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},DeletePerspectiveFollow:function(){null!=n&&n.contentWindow.postMessage({Event:"",ModName:"DeletePerspectiveFollow",parameter:{}},"*")},HeavyHaulMod:function(e){var t={Event:"",ModName:"HeavyHaulMod",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},TilesHighlight:function(e){var t={Event:"",ModName:"TilesHighlight",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},CancelTilesHighlight:function(){null!=n&&n.contentWindow.postMessage({Event:"",ModName:"CancelTilesHighlight",parameter:{}},"*")},removefloorOther:function(){null!=n&&n.contentWindow.postMessage({Event:"",ModName:"removefloorOther",parameter:{}},"*")},Close:function(){o()("#LiuClose").click(),this.CancelTilesHighlight();var t=e.GridTree;e.GridTree.length>0&&(t.forEach((function(e){i.Emptyentities({id:e.id})})),e.GridTree=[]),i.BuildingShow({show:!0}),i.removePit()},returnData:function(e){var t={Event:"",ModName:"returnData",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},BuildingShow:function(e){var t={Event:"",ModName:"BuildingShow",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},UndergroundInspection:function(e){var t={Event:"",ModName:"UndergroundInspection",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},removeUnderground:function(){null!=n&&n.contentWindow.postMessage({Event:"",ModName:"removeUnderground",parameter:{}},"*")},removePit:function(){null!=n&&n.contentWindow.postMessage({Event:"",ModName:"removePit",parameter:{}},"*")},ExhibitionPit:function(e){var t={Event:"",ModName:"ExhibitionPit",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},DiggingTerrain:function(){null!=n&&n.contentWindow.postMessage({Event:"",ModName:"DiggingTerrain",parameter:{}},"*")},roamingDrawingLine:function(e){var t={Event:"",ModName:"roamingDrawingLine",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},removeEntitiesV1:function(e){var t={Event:"",ModName:"removeEntitiesV1",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},roamingDisplay:function(e,t){var a={Event:"",ModName:"roamingDisplay",parameter:e};null!=n&&n.contentWindow.postMessage(a,"*")},multiplier:function(e){var t={Event:"",ModName:"multiplier",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},deleteRoamingRoute:function(){null!=n&&n.contentWindow.postMessage({Event:"",ModName:"deleteRoamingRoute",parameter:{}},"*")},roamingRouteDisplay:function(e){var t={Event:"",ModName:"roamingRouteDisplay",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},endVod:function(){null!=n&&n.contentWindow.postMessage({Event:"",ModName:"endVod",parameter:{}},"*")},ModelClickEvent:function(e){var t={Event:"",ModName:"ModelClickEvent",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},initBubble:function(){null!=n&&n.contentWindow.postMessage({Event:"",ModName:"initBubble",parameter:{}},"*")},removeBubbleBombbox:function(e){var t={Event:"",ModName:"removeBubbleBombbox",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},RealTimePainting:function(e){var t={Event:"",ModName:"RealTimePainting",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},historicalTrack:function(e){var t={Event:"",ModName:"historicalTrack",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},downloadPDF:function(e){var t={Event:"",ModName:"downloadPDF",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},downloadPDFV2:function(e){var t={Event:"",ModName:"downloadPDFV2",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},playback:function(e){var t={Event:"",ModName:"playback",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},closeHistoricalTrack:function(){null!=n&&n.contentWindow.postMessage({Event:"closeHistoricalTrack()",ModName:"",parameter:{}},"*")},VisibleArea:function(e){var t={Event:"",ModName:"VisibleArea",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},drawViewCentrum:function(){null!=n&&n.contentWindow.postMessage({Event:"drawViewCentrum()",ModName:"",parameter:{}},"*")},ViewShedclearModel:function(){null!=n&&n.contentWindow.postMessage({Event:"",ModName:"ViewShedclearModel",parameter:{}},"*")},SelectCameras:function(){null!=n&&n.contentWindow.postMessage({Event:"SelectCameras()",ModName:"",parameter:{}},"*")},PersonnelOrientation:function(e){var t={Event:"",ModName:"PersonnelOrientation",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},deletePositioning:function(e){var t={Event:"",ModName:"deletePositioning",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},InitialPositioning:function(e){var t={Event:"",ModName:"InitialPositioning",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},SadianUp:function(){null!=n&&n.contentWindow.postMessage({Event:"",ModName:"SadianUp",parameter:""},"*")},SadianDown:function(){null!=n&&n.contentWindow.postMessage({Event:"",ModName:"SadianDown",parameter:""},"*")},LsgjHistory:function(e){var t={Event:"",ModName:"LsgjHistory",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},ClearHistoryLine:function(){null!=n&&n.contentWindow.postMessage({Event:"",ModName:"ClearHistoryLine",parameter:{}},"*")},moreDemand:function(e,t,a){var l={Event:"",ModName:"moreDemand",parameter:{mp3:e,shebei:t,type:a}};null!=n&&n.contentWindow.postMessage(l,"*")},PrisonView:function(e,t){var a={Event:"",ModName:"PrisonView",parameter:{data:e,type:t}};null!=n&&n.contentWindow.postMessage(a,"*")},PrisonView2:function(e){var t={Event:"",ModName:"PrisonView2",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},RemoveDX:function(e){var t={Event:"",ModName:"RemoveDX",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},spzcsp:function(e){var t={Event:"",ModName:"spzcsp",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},deleteSv4:function(e){var t={Event:"",ModName:"deleteSv4",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")},GeneratePolyline:function(e){var t={Event:"",ModName:"GeneratePolyline",parameter:e};null!=n&&n.contentWindow.postMessage(t,"*")}}}).call(this,a(18))},310:function(e,t,a){},311:function(e,t,a){},339:function(e,t,a){"use strict";(function(e){var n=a(9),l=a(10),o=a(2),i=a(12),r=a(11),s=a(0),c=a.n(s),d=(a(44),a(340)),u=a.n(d),m=a(27),h=a(95),f=a.n(h),g=a(341),p=a.n(g),v=a(5),y=a.n(v),b=a(1),E=a.n(b),w=function(t){Object(i.a)(d,t);var a=Object(r.a)(d);function d(e){var t;return Object(n.a)(this,d),(t=a.call(this,e)).userChange=function(e){t.setState({user:e.target.value})},t.passwordChange=function(e){t.setState({password:e.target.value})},t.state={typeID:0,loginState:!1,user:"",password:"",Show:!1},t.UserClick=t.UserClick.bind(Object(o.a)(t)),t.userChange=t.userChange.bind(Object(o.a)(t)),t.passwordChange=t.passwordChange.bind(Object(o.a)(t)),t.login=t.login.bind(Object(o.a)(t)),t}return Object(l.a)(d,[{key:"UserClick",value:function(e){this.setState({typeID:e})}},{key:"login",value:function(t,a,n){var l=this;this.state.Show&&(n=1),t&&a?y.a.post(e.Url+"sys/user/login",{user_name:t,user_pwd:a,type:n.toString()}).then((function(t){var a=t.data.data;a&&"{}"!==JSON.stringify(a)?(sessionStorage.setItem("role",a.role_id),sessionStorage.setItem("userName",a.full_name),sessionStorage.setItem("user",a.user_name),sessionStorage.setItem("typeId",n),1===n?l.props.history.push("/admin"):0===n&&l.props.history.push("/")):(E()(".PageShow").show().find("h1").html("\u767b\u5f55\u5931\u8d25!"),e.Time())})):(E()(".PageShow").show().find("h1").html("\u8bf7\u8f93\u5165\u7528\u6237\u540d"),e.Time())}},{key:"componentDidMount",value:function(){var e=this;document.body.addEventListener("keyup",(function(t){if(window.event&&(t=window.event),13===(t.charCode||t.keyCode)){var a=e.state,n=a.user,l=a.password,o=a.typeID;e.login(n,l,o)}}))}},{key:"componentWillMount",value:function(){var t=this;document.body.removeEventListener("keyup",(function(){})),y.a.get(e.Url+"sys/config/isLogin").then((function(a){var n=a.data.data;n?t.setState({Show:n.is_login}):(E()(".PageShow").show().find("h1").html(a.msg),e.Time())}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.loginState,n=t.typeID,l=t.user,o=t.password,i=t.Show;return a?1===n?c.a.createElement(m.a,{to:"/admin"}):c.a.createElement(m.a,{to:"/"}):c.a.createElement(f.a,{title:"\u56fe\u4e3a\u89c6\u667a\u6167\u5b89\u9632\u4e09\u7ef4\u5e73\u53f0"},c.a.createElement(s.Fragment,null,c.a.createElement("div",{id:"loginBJ",className:"loginContainer"},c.a.createElement("video",{muted:"muted",autoPlay:"autoplay",loop:"loop",className:"video"},c.a.createElement("source",{type:"video/mp4",src:u.a})),c.a.createElement("div",{className:"loginLogo",style:{display:"block"}},c.a.createElement("img",{src:p.a,alt:""}),c.a.createElement("br",null),"\u56fe\u4e3a\u89c6\u667a\u6167\u5b89\u9632\u4e09\u7ef4\u5e73\u53f0"),c.a.createElement("div",{className:"login"},c.a.createElement("div",{className:"loginWrapper"},i?c.a.createElement("h1",null,c.a.createElement("span",{className:"cur1",onClick:function(){return e.UserClick(1)}},"\u540e\u53f0\u7ba1\u7406")):c.a.createElement("h1",null,c.a.createElement("span",{className:0===n?"cur":" ",onClick:function(){return e.UserClick(0)}},"\u7528\u6237\u767b\u5f55"),c.a.createElement("span",{className:1===n?"cur":" ",onClick:function(){return e.UserClick(1)}},"\u540e\u53f0\u7ba1\u7406")),c.a.createElement("input",{type:"text",value:l,onChange:function(t){return e.userChange(t)},placeholder:"\u7528\u6237\u540d"}),c.a.createElement("input",{type:"password",value:o,onChange:function(t){return e.passwordChange(t)},placeholder:"\u5bc6\u7801"}),c.a.createElement("button",{onClick:function(){return e.login(l,o,n)}},"\u767b\u5f55",c.a.createElement("i",null)))),c.a.createElement("div",{className:"PageShow"},c.a.createElement("div",{className:"PageShowCont"},c.a.createElement("h1",null,"\u4fdd\u5b58\u6210\u529f\uff01"))))))}}]),d}(s.PureComponent);t.a=w}).call(this,a(18))},340:function(e,t,a){e.exports=a.p+"static/media/video-diqiu.6c2b416b.mp4"},341:function(e,t,a){e.exports=a.p+"static/media/loginLogo.64f42920.png"},342:function(e,t,a){"use strict";(function(e){var n=a(9),l=a(10),o=a(2),i=a(12),r=a(11),s=a(0),c=a.n(s),d=(a(44),a(411),a(343)),u=a(150),m=a(95),h=a.n(m),f=a(5),g=a.n(f),p=a(152),v=a(354),y=a(1),b=a.n(y),E=function(t){Object(i.a)(m,t);var a=Object(r.a)(m);function m(e){var t;return Object(n.a)(this,m),(t=a.call(this,e)).changeSearch=function(e){b()(".SearchName").css({display:"none"}),t.setState({searchName:e.target.value})},t.state={isLoading:!1,isLogin:"",searchName:"",searchList:[],KeLi:0},m.this=Object(o.a)(t),t.SearchContent=t.SearchContent.bind(Object(o.a)(t)),t}return Object(l.a)(m,[{key:"componentDidMount",value:function(){this.onLoad(),-1===navigator.userAgent.toLowerCase().indexOf("chrome")&&(b()(".PageShow").show().find("h1").html("\u8bf7\u4f7f\u7528\u8c37\u6b4c\u6d4f\u89c8\u5668!"),e.Time(),window.open("http://rj.baidu.com/soft/detail/14744.html?ald","_blank"))}},{key:"KeLiuData",value:function(){var e={klC:["1000226$1$0$0","1000228$1$0$0","1000212$1$0$0","1000221$1$0$0","1000240$1$0$0","1000241$1$0$0","1000242$1$0$0","1000243$1$0$0","1000222$1$0$0","1000225$1$0$0","1000227$1$0$0","1000231$1$0$0","1000232$1$0$0","1000235$1$0$0","1000236$1$0$0","1000238$1$0$0","1000239$1$0$0","1000223$1$0$0","1000261$1$0$0","1000271$1$0$0","1000273$1$0$0","1000211$1$0$0","1000224$1$0$0","1000229$1$0$0","1000230$1$0$0","1000237$1$0$0","1000244$1$0$0","1000245$1$0$0","1000246$1$0$0","1000247$1$0$0","1000248$1$0$0","1000249$1$0$0","1000250$1$0$0","1000251$1$0$0","1000252$1$0$0","1000253$1$0$0","1000269$1$0$0","1000268$1$0$0","1000267$1$0$0","1000266$1$0$0","1000265$1$0$0","1000263$1$0$0","1000262$1$0$0","1000260$1$0$0","1000259$1$0$0","1000258$1$0$0","1000257$1$0$0","1000256$1$0$0","1000255$1$0$0","1000254$1$0$0","1000270$1$0$0","1000272$1$0$0"]};console.log(e);for(var t=0;t<e.klC.length;t++)g.a.post("http://192.16.12.5:8082/DH/EGTTotal",{cameraId:e.klC[t],nBeginStr:"2020-8-15 8:00:00",nEndStr:"2020-8-16 8:00:00"}).then((function(e){var t=e.data;if("Success"===t.msg){console.log(e,t,t.msg);var a=t.MsgTxt,n=a.substr(a.length-1,1);console.log(a,"1111",n),m.this.setState({KeLi:m.this.state.KeLi+Number(n)}),console.log(m.this.state.KeLi)}}))}},{key:"onLoad",value:function(){var t=this;g.a.get(e.Url+"sys/config/isLogin").then((function(a){var n=a.data.data;if(n){sessionStorage.setItem("isLogin",n.is_login);var l=sessionStorage.getItem("user");!1===n.is_login&&(null===l?(t.props.history.push("/login"),t.setState({isLoading:!1})):t.setState({isLoading:!0}))}else b()(".PageShow").show().find("h1").html(a.data.msg),e.Time()}))}},{key:"SearchContent",value:function(){var t=this;b()(".SearchName").css({display:"block"});var a=this.state.searchName;a?g.a.post(e.Url+"business/globalSearch",{Search_info:a}).then((function(a){var n=a.data.data;n?(console.log(n),t.setState({searchList:n})):(b()(".PageShow").show().find("h1").html(a.data.msg),e.Time())})):(b()(".PageShow").show().find("h1").html("\u641c\u7d22\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a\uff01"),e.Time())}},{key:"handleSwitch",value:function(e){console.log(e.target.checked,"ee")}},{key:"render",value:function(){var t=this,a=this.state,n=a.searchName,l=a.searchList,o=a.alarmFlag,i=a.KeLi;return c.a.createElement(h.a,{title:"\u56fe\u4e3a\u89c6\u667a\u6167\u5b89\u9632\u4e09\u7ef4\u5e73\u53f0"},c.a.createElement(s.Fragment,null,c.a.createElement("div",{className:"IndexHome"},c.a.createElement("div",{className:"left"}),c.a.createElement("div",{className:"right"}),c.a.createElement("div",{className:"conent"},c.a.createElement(u.a,null))),c.a.createElement("div",{className:"header"},c.a.createElement(d.a,{alarmFlag:o})),c.a.createElement(p.a,null),c.a.createElement(v.a,null),c.a.createElement("div",{className:"PageShow1 PageShowOne"},c.a.createElement("div",{className:"PageShowCont"},c.a.createElement("h1",null,"111"),c.a.createElement("h2",null,c.a.createElement("button",{onClick:function(){return e.Server()}},"\u4e0b\u8f7d"),c.a.createElement("button",{onClick:function(){return e.PageHide()}},"\u5173\u95ed")))),c.a.createElement("div",{className:"KeLiu",style:{display:"none"}},"\u603b\u5ba2\u6d41\u91cf\uff1a",i,"\u4eba"),c.a.createElement("div",{className:"Search",style:{display:"none"}},c.a.createElement("button",{onClick:function(){return t.SearchContent()}},c.a.createElement("i",null)),c.a.createElement("input",{type:"text",defaultValue:n,onChange:function(e){return t.changeSearch(e)},placeholder:"\u8bf7\u8f93\u5165\u60a8\u8981\u641c\u7d22\u7684\u5173\u952e\u8bcd"}),c.a.createElement("div",{className:"SearchName"},c.a.createElement("ul",null,l.length>0&&l.map((function(e,t){return c.a.createElement("li",{key:t},e.type_name,"\u6839\u636etype_name\u7684\u540d\u5b57\u4e0d\u540c\u663e\u793a\u7684\u5185\u5bb9\u4e0d\u540c")})),l.length<0?c.a.createElement("li",null,"\u6682\u65e0\u6570\u636e"):null,c.a.createElement("li",null,"\u54c8\u54c8\u54c8"),c.a.createElement("li",null,"\u54c8\u54c8\u54c8"),c.a.createElement("li",null,"\u54c8\u54c8\u54c8"))))))}}]),m}(s.Component);t.a=E}).call(this,a(18))},343:function(e,t,a){"use strict";(function(e){var n=a(9),l=a(10),o=a(2),i=a(12),r=a(11),s=a(0),c=a.n(s),d=(a(44),a(52)),u=a.n(d),m=a(5),h=a.n(m),f=a(3),g=a(36),p=a(68),v=a(344),y=a(345),b=a(1),E=a.n(b),w=a(348),S=a(115),C=function(t){Object(i.a)(d,t);var a=Object(r.a)(d);function d(t){var l;Object(n.a)(this,d),(l=a.call(this,t)).alarmBtn=function(){var t=Object(o.a)(l),a=l.state.alarmFlag;if(a?(E()(".resourceMap").show(),E()(".RenBut").show(),E()(".alarmFlag").show()):(E()(".resourceMap").hide(),E()(".RenBut").hide(),E()(".alarmFlag").hide()),a)l.setState({alarmFlag:!a,detailsFlag:!1});else{var n=new FormData;n.append("ex_typeid",1),h.a.post(e.Url+"ex/info/list",n).then((function(e){console.log(e.data.data),t.setState({alarmValue:e.data.data,alarmFlag:!0,detailsFlag:!1})})).catch((function(e){console.log(e)}))}},l.close=function(){E()(".resourceMap").show(),E()(".RenBut").show(),E()(".alarmFlag").show(),l.setState({detailsFlag:!1})},l.qhChangtai=function(e,t){l.setState({alarmFlag:t,detailsFlag:t})},l.state={success:!1,homeTitle:"",homeUser:"",NavShow:!0,NavNumber:0,videoId:"",alarmFlag:!1,alarmValue:[],detailsFlag:!1,details:{},isNB:!1,playBack:!1,ren:"",renId:"",startTime:"",endTime:"",isCatch:!1,cameracode:""},d.this=Object(o.a)(l),l.renSearch=l.renSearch.bind(Object(o.a)(l)),l.RenGJClose=l.RenGJClose.bind(Object(o.a)(l));var i=Object(o.a)(l);return setInterval((function(){i.fn()}),1e3),l}return Object(l.a)(d,[{key:"componentDidMount",value:function(){this.time(),window.receiveMessageFromIndex=function(t){if(void 0!==t)switch(t.data.switchName){case"lsgj":console.log(t.data),E()(".renGJList").show(),d.this.setState({ren:t.data.name,renId:t.data.id});break;case"ModelClickNB":break;case"openSsgj":console.log("openSsgj6666"),d.this.state.isCatch?d.this.state.cameracode!==t.data.id&&(setTimeout((function(){g.a.preview(t.data.id,1)}),1e3),d.this.setState({cameracode:t.data.id})):(d.this.state.playBack&&(console.log("\u9884\u89c8\u521d\u59cb\u5316"),g.a.deInitialization(),g.a.initialization(0),d.this.setState({playBack:!1})),g.a.showVideo(),g.a.setSize(600,400),d.this.setState({isNB:!0}),e.videoAlartNB(),setTimeout((function(){g.a.preview(t.data.id,1),d.this.setState({isCatch:!0})}),1e3),d.this.setState({cameracode:t.data.id}));break;case"closeSsgj":console.log("closeSsgj"),g.a.hideVideo(),d.this.setState({isNB:!1}),e.videoAlart();break;case"huifang":g.a.showVideo(),g.a.setSize(600,400),d.this.setState({isNB:!0}),e.videoAlartNB(),d.this.state.playBack||(console.log("\u56de\u653e\u521d\u59cb\u5316"),g.a.deInitialization(),g.a.initialization(1),d.this.setState({playBack:!0})),setTimeout((function(){g.a.playback(t.data.cameraData.cameracode)}),1900);break;case"yulan":d.this.state.playBack&&(console.log("\u9884\u89c8\u521d\u59cb\u5316"),g.a.deInitialization(),g.a.initialization(0),d.this.setState({playBack:!1})),g.a.showVideo(),g.a.setSize(600,400),d.this.setState({isNB:!0}),e.videoAlartNB(),setTimeout((function(){g.a.preview(t.data.cameraData.cameracode,1)}),1e3);break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1),this.fn(),this.HQuser(),this.HQstate(),this.HQConfig(),this.onLoadStand(),this.RemoveBombox(),window.receiveMessageFromIndex=function(e){if(void 0!==e)switch(e.data.switchName){case"cameraClick":console.log(e.data),d.this.setState({videoId:e.data.cameraData.cameracode}),E()(".videoAlart").show();break;case"errorDataU":E()(".resourceMap").hide(),E()(".RenBut").hide(),E()(".alarmFlag").hide(),d.this.setState({alarmFlag:!1,detailsFlag:!0,details:e.data});break;case"passengerFlow":d.this.setState({KeLi:e.data.switchName.count});break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1)}},{key:"time",value:function(){var e=u()().format("YYYY.MM.DD HH:mm:ss"),t=u()().format("YYYY.MM.DD");d.this.setState({startTime:t+" 00:00:00",endTime:e})}},{key:"RemoveBombox",value:function(){for(var t=e.WebList,a=0;a<t.length;a++)"C1F7A2BD34C8A84704D80C4DF6E72D93"===t[a].event_info.event_type?(console.log(t),f.a.removeBubbleBombox(t[a].event_info.ext_info.params.events[0].eventDetails[0].data.faceRecognitionResult.faceMatch[0].faceInfoName)):f.a.removeBubbleBombox(t[a].event_info.id)}},{key:"NavChange",value:function(t){switch(this.setState({alarmFlag:!1}),E()(".resourceMap").show(),E()(".RenBut").show(),E()(".Search").hide(),f.a.Close(),this.setState({NavNumber:t,detailsFlag:!1}),e.AlarmShow=!1,t){case 0:f.a.onMap(),E()(".Search").show();break;case 1:break;case 2:f.a.onSurveillance();break;case 3:case 4:case 5:case 6:break;default:return null}}},{key:"fn",value:function(){var e=u()().format("YYYY.MM.DD HH:mm:ss");this.setState({Time:e})}},{key:"HQuser",value:function(){var t=this;h.a.get(e.Url+"sys/user/defaultUser").then((function(a){var n=a.data.data;n?(sessionStorage.setItem("userName",n.full_name),sessionStorage.setItem("role",n.role_id),t.setState({homeUser:n.full_name,success:!0})):(E()(".PageShow").show().find("h1").html(a.data.msg),e.Time())}))}},{key:"HQstate",value:function(){h.a.get(e.Url+"sys/config/isConfig").then((function(t){t.data.data||(E()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"HQConfig",value:function(){var t=this;h.a.get(e.Url+"sys/config").then((function(a){var n=a.data.data;n?(sessionStorage.setItem("userTitle",n.sys_name),t.setState({homeTitle:n.sys_name,success:!0}),sessionStorage.setItem("Serverurl",n.data_server_uri),sessionStorage.setItem("data_type",n.data_type)):(E()(".PageShow").show().find("h1").html(a.data.msg),e.Time())}))}},{key:"onLoadStand",value:function(){var t=this;h.a.get(e.Url+"sys/config/isStand").then((function(a){var n=a.data.data;n?(t.setState({NavShow:n.is_stand}),!1===t.state.NavShow&&(E()(".IndexHome").css({top:"0"}),E()(".header").css({position:"absolute",zIndex:"2",background:"none"}),E()(".left,.right").css({width:0}),E()(".conent").css({width:"100%"}),E()(".HeaderContentHomeNav").css({width:"60%",left:"20%"}),E()(".HeaderContentHomeNav").find("li").addClass("more"))):(E()(".PageShow").show().find("h1").html(a.data.msg),e.Time())}))}},{key:"removeVideo",value:function(){g.a.hideVideo(),this.setState({isNB:!1}),e.videoAlart()}},{key:"changeStartTime",value:function(e){d.this.setState({startTime:e.target.value})}},{key:"changeEndTime",value:function(e){d.this.setState({endTime:e.target.value})}},{key:"renSearch",value:function(){var t=this.state,a=t.renId,n=t.startTime,l=t.endTime;if(n&&l){var o={id:a,starttime:n,endtime:l};console.log(o),h.a.post(e.Url+"base/station/info/list",o).then((function(t){var a=t.data.data;a?(console.log(a),f.a.LsgjHistory(a)):(E()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}else E()(".PageShow").show().find("h1").html("\u8bf7\u8f93\u5165\u5b8c\u6574\u65f6\u95f4!"),e.Time()}},{key:"RenGJClose",value:function(){E()(".renGJList").hide(),f.a.ClearHistoryLine(),f.a.SadianUp()}},{key:"render",value:function(){var e=this,t=this.state,a=t.homeTitle,n=t.homeUser,l=t.Time,o=t.success,i=t.NavShow,r=t.NavNumber,d=t.alarmFlag,u=t.detailsFlag,m=t.details,h=t.alarmValue,f=t.ren,g=t.startTime,b=t.endTime;return c.a.createElement(s.Fragment,null,d&&c.a.createElement("div",{className:"Exception"},c.a.createElement(S.b,{onClick:this.alarmBtn,alarmValue:h,title:"\u62a5\u8b66\u5f02\u5e38\u4fe1\u606f"})),u&&c.a.createElement("div",{className:"Exception",style:{width:"350px"}},c.a.createElement(S.a,{details:m,onClick:this.close})),i?c.a.createElement("div",{className:"HeaderLeft"},o?a:"",c.a.createElement("i",null)):"",i?c.a.createElement("div",{className:"HeaderContentHome"},c.a.createElement("li",{className:0===r?"cur":"",onClick:function(){return e.NavChange(0)}},"\u4e09\u7ef4\u5730\u56fe"),c.a.createElement("li",{className:1===r?"cur":"",onClick:function(){return e.NavChange(1)}},"\u8d44\u6e90\u56fe\u8c31"),c.a.createElement("li",{className:2===r?"cur":"",onClick:function(){return e.NavChange(2)}},"\u5e03\u63a7\u8b66\u6212"),c.a.createElement("li",{className:3===r?"cur":"",onClick:function(){return e.NavChange(3)}},"\u5e38\u6001\u5de5\u4f5c")):c.a.createElement("div",{className:"HeaderContentHomeNav"},c.a.createElement("li",{className:0===r?"more1":"more",onClick:function(){return e.NavChange(0)}},"\u4e09\u7ef4\u5730\u56fe"),c.a.createElement("li",{className:1===r?"more1":"more",onClick:function(){return e.NavChange(1)}},"\u8d44\u6e90\u56fe\u8c31"),c.a.createElement("li",{className:2===r?"more1":"more",onClick:function(){return e.NavChange(2)}},"\u5e03\u63a7\u8b66\u6212"),c.a.createElement("li",{className:3===r?"more1":"more",onClick:function(){return e.NavChange(3)}},"\u5e38\u6001\u5de5\u4f5c")),i?c.a.createElement("div",{className:"HeaderRightHome"},c.a.createElement("em",null),c.a.createElement("span",{className:"HeaderTime"},l),c.a.createElement(p.b,{to:"/admin"},c.a.createElement("span",{className:"HeaderBank",title:"\u540e\u53f0\u7ba1\u7406"})),c.a.createElement("span",{className:"HeaderUser"},"\u5f53\u524d\u7528\u6237",c.a.createElement("i",null,o?n:""))):"",function(){switch(r){case 1:return c.a.createElement(v.a,null);case 2:return c.a.createElement(y.a,null);case 3:return c.a.createElement(w.a,{parent:e});default:return null}}(),!d&&c.a.createElement("div",{className:"AlarmButton OneAlarm",style:{bottom:"255px",height:"auto"},onClick:this.alarmBtn},"\u62a5\u8b66\u5f02\u5e38"),c.a.createElement("div",{className:"renGJList"},c.a.createElement("h1",null,f,"\u5386\u53f2\u8f68\u8ff9 ",c.a.createElement("i",{onClick:function(){return e.RenGJClose()}})),c.a.createElement("div",{className:"renGJcont"},c.a.createElement("li",null,c.a.createElement("span",null,"\u5f00\u59cb\u65f6\u95f4:"),c.a.createElement("input",{type:"datetime",step:"02",value:g,onChange:function(t){return e.changeStartTime(t)}})),c.a.createElement("li",null,c.a.createElement("span",null,"\u7ed3\u675f\u65f6\u95f4:"),c.a.createElement("input",{type:"datetime",step:"02",value:b,onChange:function(t){return e.changeEndTime(t)}})),c.a.createElement("button",{onClick:function(){return e.renSearch()}},"\u67e5\u8be2"))))}}]),d}(s.Component);t.a=C}).call(this,a(18))},344:function(e,t,a){"use strict";(function(e){var n=a(70),l=a(9),o=a(10),i=a(2),r=a(12),s=a(11),c=a(0),d=a.n(c),u=a(5),m=a.n(u),h=a(1),f=a.n(h),g=a(3),p=function(t){Object(r.a)(u,t);var a=Object(s.a)(u);function u(e){var t;return Object(l.a)(this,u),(t=a.call(this,e)).state={treeList:{},TopList:{},titlename:"",deleteId:"",isShow:!1,isShowTwo:!1},u.this=Object(i.a)(t),t}return Object(o.a)(u,[{key:"componentDidMount",value:function(){this.onTopList()}},{key:"onLoad",value:function(){var t=this;m.a.post(e.Url+"business/resourcesMap",{category_id:e.titid}).then((function(a){var n=a.data.data;console.log(n),n&&"success"===a.data.msg?t.setState({treeList:n}):(f()(".PageShow").show().find("h1").html(a.data.msg),e.Time())}))}},{key:"onTopList",value:function(){var t=this;m.a.get(e.Url+"device/info/countForCategory").then((function(a){var n=a.data.data;console.log(n),n&&"success"===a.data.msg?t.setState({TopList:n}):(f()(".PageShow").show().find("h1").html(a.data.msg),e.Time())}))}},{key:"generateMenu",value:function(e){var t=this,a=[];if(e instanceof Array){var l,o=[],i=Object(n.a)(e);try{for(i.s();!(l=i.n()).done;){var r=l.value;o.push(this.generateMenu(r))}}catch(s){i.e(s)}finally{i.f()}a.push(d.a.createElement("ul",{key:"single"},o))}else{if(null==e)return;a.push(d.a.createElement("li",{key:e,className:"newMap",id:"newMap"+e.id},d.a.createElement("span",{onClick:function(a){return t.onMenuClicked(a,e)}},function(){switch(e.node_type){case"grid_region":return d.a.createElement("i",{className:"group"});case"grid_info":return d.a.createElement("i",{className:"grid"});case"device_info":return d.a.createElement("i",{className:"details"});default:return null}}(),function(){switch(e.node_type){case"grid_region":return e.region_name;case"grid_info":return e.grid_name;case"device_info":return e.device_name;default:return null}}(),"device_info"===e.node_type?"":d.a.createElement("em",null,e.count)),this.generateMenu(e.children)))}return a}},{key:"onMenuClicked",value:function(t,a){t.stopPropagation();var n=f()(t.target).siblings("ul");if(n.css("display","none"===n.css("display")?"block":"none"),f()("#newMap"+a.id).parents().find("li").find("span").css({color:"#fff",fontWeight:"100"}),f()("#newMap"+a.id).parents().find("span").find("i").removeClass("only"),f()("#newMap"+a.id).find("span").css({color:"#54b2df",fontWeight:"bold"}),f()("#newMap"+a.id).find("span").find("i").addClass("only"),f()("#newMap"+a.id).siblings().find("span").css({color:"#fff",fontWeight:"100"}),f()("#newMap"+a.id).siblings().find("span").find("i").removeClass("only"),f()("#newMap"+a.id).children().find("span").css({color:"#fff",fontWeight:"100"}),f()("#newMap"+a.id).children().find("span").find("i").removeClass("only"),console.log("\u6211\u662f\u5b50\u7c7b"),"device_info"===a.node_type)if(parseInt(a.build_id)<0)!1===this.state.isShow&&(g.a.BuildingShow({show:!1}),this.setState({isShow:!0})),m.a.get(e.Url+"map/under/list").then((function(e){var t=e.data.data;if(t){f()("#liu").css({display:"block"}),f()("#liu").find(".configShowNav").find("span").html("\u5730\u4e0b\u5ba4");var n={result:t,number:1};g.a.returnData(n);var l=[],o=new RegExp("/","g");t.forEach((function(e){null!=e.model_url&&l.push({modelId:e.model_url.replace(o,"_"),order_num:e.order_num,more:e})}))}var i=parseInt(a.floor_id.split("B")[1].substr(0,1));g.a.onMenuClickedV3(l[i-1].modelId,l),g.a.returnData(a),g.a.dxsFlyTo(a)}));else{this.state.isShow&&(g.a.BuildingShow({show:!0}),this.setState({isShow:!1}));var l={id:a.id};g.a.returnData(a),g.a.CoordinateModelID(l)}}},{key:"AssignedLabelID",value:function(t){e.titid=t.id;var a={id:u.this.state.deleteId};g.a.removeBubbleLabel(a),this.onLoad(),this.setState({titlename:t.category_name+"\u5217\u8868",deleteId:t.id}),f()(".onlyNav"+t.id).parents().css({color:"#fff"}),f()(".onlyNav"+t.id).css({color:"#01F8FF"}),f()(".onlyNav"+t.id).siblings().css({color:"#fff"}),f()(".onlyNav"+t.id).children().css({color:"#fff"});var n={id:t.id,image:t.category_icon};g.a.AddBubbleLabel(n)}},{key:"render",value:function(){var e=this,t=this.state,a=t.TopList,n=t.treeList,l=t.titlename;return d.a.createElement(c.Fragment,null,d.a.createElement("div",{className:"AlarmShow resourceMap",style:{height:"calc(100vh - 125px)"}},d.a.createElement("h1",null,d.a.createElement("span",null,"\u8d44\u6e90\u56fe\u8c31")),d.a.createElement("div",{className:"ResourceMapList"},d.a.createElement("button",null,d.a.createElement("i",null),d.a.createElement("span",null,"\u8d44\u6e90\u56fe\u8c31")),d.a.createElement("ul",null,a.length>0&&a.map((function(t,a){return d.a.createElement("li",{key:a,className:"onlyNav"+t.id,onClick:function(){return e.AssignedLabelID(t)}},t.category_name,"(",t.count,")")})))),d.a.createElement("div",{className:"ResourceMapTree"},d.a.createElement("h2",null,d.a.createElement("span",null,l)),d.a.createElement("div",{className:"ResourceMapTreeUl"},this.generateMenu(n)))))}}]),u}(c.Component);t.a=p}).call(this,a(18))},345:function(e,t,a){"use strict";(function(e){var n=a(47),l=a.n(n),o=a(69),i=a(9),r=a(10),s=a(2),c=a(12),d=a(11),u=a(0),m=a.n(u),h=(a(219),a(1)),f=a.n(h),g=(a(220),a(262),a(266),a(167),a(270),a(346)),p=a.n(g),v=a(5),y=a.n(v),b=a(3),E=a(347),w=a.n(E),S=a(52),C=a.n(S),k=function(t){Object(c.a)(n,t);var a=Object(d.a)(n);function n(e){var t;return Object(i.a)(this,n),(t=a.call(this,e)).getOption=function(){var e=t.state;return{tooltip:{trigger:"axis"},xAxis:{data:e.Date,axisLine:{lineStyle:{color:"#fff"}}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#fff"}}},series:[{name:"\u544a\u8b66\u6570\u91cf",type:"line",data:e.Number,areaStyle:{normal:{color:"#8cd5c2"}}}]}},t.handlePhoto=function(){var e=Object(o.a)(l.a.mark((function e(a){var n,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(o=new FileReader).readAsDataURL(a.target.files[0]),i=Object(s.a)(t),o.onload=function(e){n=e.target.result,i.setState({renFaceImg:n,RenType:1})};case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.state={Date:[],Number:[],alarmNumber:[],startTime:"",endTime:"",renFaceImg:w.a,RenType:0,RenName:"",RenID:"",RenList:[],RouteTable:[],RouteTable1:[],Similarity:90},n.this=Object(s.a)(t),t.fileInputEl=m.a.createRef(),t.onAlarm=t.onAlarm.bind(Object(s.a)(t)),t.RenButClick=t.RenButClick.bind(Object(s.a)(t)),t.TimeSerch=t.TimeSerch.bind(Object(s.a)(t)),t.RenClose=t.RenClose.bind(Object(s.a)(t)),t.faceDatabase=t.faceDatabase.bind(Object(s.a)(t)),t.RenIdSearch=t.RenIdSearch.bind(Object(s.a)(t)),t.onTable=t.onTable.bind(Object(s.a)(t)),t.RenVideo=t.RenVideo.bind(Object(s.a)(t)),t.PDF=t.PDF.bind(Object(s.a)(t)),t}return Object(r.a)(n,[{key:"time",value:function(){var e=C()().format("YYYY.MM.DD HH:mm:ss"),t=C()().format("YYYY.MM.DD");n.this.setState({startTime:t+" 00:00:00",endTime:e})}},{key:"onAlarm",value:function(){var t=this;f()(".Two").toggle(),f()(".TwoAlarm").toggle(),f()(".Two").is(":visible")&&y.a.post(e.Url+"event/info/statisticsForDay",{day:30}).then((function(a){var n=a.data.data;if(n){console.log(n);for(var l=[],o=[],i=0;i<n.length;i++)l.push(n[i].date),o.push(n[i].count);t.setState({Date:l,Number:o})}else f()(".PageShow").show().find("h1").html(a.data.msg),e.Time()}))}},{key:"RenButClick",value:function(){f()(".RenButBut").hide(),f()(".RenSearch").show()}},{key:"componentDidMount",value:function(){this.time(),window.receiveMessageFromIndex=function(e){if(void 0!==e)switch(e.data.switchName){case"TrackTracking":console.log(e.data),!0===e.data.Personnel.state?f()(".IndexHome").css({width:"100%",top:"0",zIndex:"100"}):f()(".IndexHome").css({width:"100%",top:"100px",zIndex:"0"});break;default:return null}}}},{key:"inputStartChange",value:function(e){n.this.setState({startTime:e.target.value})}},{key:"inputEndChange",value:function(e){n.this.setState({endTime:e.target.value})}},{key:"SimilarityChange",value:function(e){n.this.setState({Similarity:e.target.value})}},{key:"RenClose",value:function(e){1===e?(f()(".RenButBut").show(),f()(".RenSearch").hide(),f()(".faceDatabase").hide(),b.a.closeHistoricalTrack()):f()(".faceDatabase").hide()}},{key:"faceDatabase",value:function(){f()(".faceDatabase").show(),y.a.post(e.Url+"business/selectFacebank",{name:"",certificateNum:"",pageNo:1,pageSize:1e3}).then((function(t){var a=t.data.data;a?(console.log(a),setTimeout((function(){n.this.setState({RenList:a})}),0)):(f()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"renNameChange",value:function(e){n.this.setState({RenName:e.target.value})}},{key:"renIDChange",value:function(e){n.this.setState({RenID:e.target.value})}},{key:"RenIdSearch",value:function(t){var a;if(1===t){var l=this.state;a={name:l.RenName,certificateNum:l.RenID,pageNo:1,pageSize:1e3}}else a={name:"",certificateNum:"",pageNo:1,pageSize:1e3};y.a.post(e.Url+"business/selectFacebank",a).then((function(t){var a=t.data.data;a?(console.log(a),setTimeout((function(){n.this.setState({RenList:a})}),0)):(f()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"onTable",value:function(e){setTimeout((function(){n.this.setState({renFaceImg:e,RenType:2})}),0),f()(".faceDatabase").hide()}},{key:"TimeSerch",value:function(){var t=this.state,a=t.renFaceImg,l=t.startTime,o=t.endTime,i=t.RenType,r=t.Similarity;if(l>o)f()(".PageShow").show().find("h1").html("\u5f00\u59cb\u65f6\u95f4\u4e0d\u80fd\u8d85\u8fc7\u7ed3\u675f\u65f6\u95f4\uff01"),e.Time();else{var s;if(0===i)return f()(".PageShow").show().find("h1").html("\u8bf7\u9009\u62e9\u7167\u7247"),void e.Time();1===i?(console.info("startTime",l),console.info("endTime",o),s={minSimilarity:r,startTime:l,endTime:o,facePicUrl:"",facePicBinaryData:a}):2===i&&(s={minSimilarity:r,startTime:l,endTime:o,facePicUrl:a,facePicBinaryData:""}),console.log(s),y.a.post(e.Url+"business/SearchImg",s).then((function(t){var a=t.data.data;a?(console.log(a),setTimeout((function(){n.this.setState({RouteTable:a.exist,RouteTable1:a}),b.a.historicalTrack(a)}),0),f()(".faceButton1").show()):(f()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}}},{key:"PDF",value:function(){b.a.downloadPDFV2(n.this.state.RouteTable1)}},{key:"RenVideo",value:function(e,t){var a={camera:[{code:e,time:t}]};b.a.playback(a)}},{key:"render",value:function(){var e=this,t=this.state,a=t.renFaceImg,n=t.startTime,l=t.endTime,o=t.RenName,i=t.RenID,r=t.RenList,s=t.RouteTable,c=t.Similarity;return m.a.createElement(u.Fragment,null,m.a.createElement("div",{className:"AlarmButton TwoAlarm",onClick:function(){return e.onAlarm()}},"\u62a5\u8b66\u8d8b\u52bf"),m.a.createElement("div",{className:"AlarmShow Two",style:{display:"none"}},m.a.createElement("h1",null,m.a.createElement("span",null,"\u62a5\u8b66\u8d8b\u52bf(7\u5929)")),m.a.createElement("div",{className:"AlarmContent"},m.a.createElement(p.a,{option:this.getOption(),style:{height:"300px",marginTop:"-20px"},className:"react_for_echarts"})),m.a.createElement("div",{className:"But",onClick:function(){return e.onAlarm()}})),m.a.createElement("div",{className:"RenBut"},m.a.createElement("div",{className:"RenButBut"},m.a.createElement("button",{onClick:function(){return e.RenButClick()}},"\u4eba\u8138\u8f68\u8ff9\u67e5\u8be2")),m.a.createElement("div",{className:"RenSearch"},m.a.createElement("div",{className:"RenTop"},m.a.createElement("h1",null,"\u4eba\u8138\u5386\u53f2\u8f68\u8ff9\u67e5\u8be2 ",m.a.createElement("i",{onClick:function(){return e.RenClose(1)}})),m.a.createElement("div",{className:"RenImg"},m.a.createElement("input",{type:"file",ref:this.fileInputEl,accept:".jpg,.jpeg,.png",hidden:!0,onChange:function(t){return e.handlePhoto(t)}}),m.a.createElement("img",{src:a,alt:""})),m.a.createElement("div",{className:"faceButtonArea"},m.a.createElement("button",{className:"faceUpload",onClick:function(){e.fileInputEl.current.click()}},"\u4e0a\u4f20\u56fe\u7247"),m.a.createElement("button",{className:"faceStore",onClick:function(){return e.faceDatabase()}},"\u4eba\u8138\u5e93")),m.a.createElement("div",{className:"faceTimeStamp"},m.a.createElement("li",null,m.a.createElement("span",null,"\u76f8\u4f3c\u5ea6"),m.a.createElement("input",{type:"text",onChange:function(t){return e.SimilarityChange(t)},defaultValue:c}),"%"),m.a.createElement("li",null,m.a.createElement("span",null,"\u8d77\u59cb\u65f6\u95f4"),m.a.createElement("input",{type:"data",onChange:function(t){return e.inputStartChange(t)},defaultValue:n})),m.a.createElement("li",null,m.a.createElement("span",null,"\u7ed3\u675f\u65f6\u95f4"),m.a.createElement("input",{type:"data",onChange:function(t){return e.inputEndChange(t)},defaultValue:l}))),m.a.createElement("div",{className:"faceButton",onClick:function(){return e.TimeSerch()}},"\u641c\u7d22"),m.a.createElement("div",{className:"faceButton1",onClick:function(){return e.PDF()}},"\u751f\u6210\u62a5\u8868")),m.a.createElement("div",{className:"RenTable"},m.a.createElement("table",null,m.a.createElement("thead",null,m.a.createElement("tr",null,m.a.createElement("td",null,"\u5e8f\u53f7"),m.a.createElement("td",null,"\u76f8\u673a\u540d\u79f0"))),m.a.createElement("tbody",null,s.length>0&&s.map((function(e,t){return m.a.createElement("tr",{key:t},m.a.createElement("td",null,t+1),m.a.createElement("td",null,e.cameraName))})),s.length<0?m.a.createElement("div",{style:{"text-align":"center"}},"\u6682\u65e0\u6570\u636e"):null)))),m.a.createElement("div",{className:"faceDatabase"},m.a.createElement("h1",null,"\u4eba\u8138\u5e93 ",m.a.createElement("i",{onClick:function(){return e.RenClose(2)}})),m.a.createElement("div",{className:"faceDatabaseCont"},m.a.createElement("div",{className:"ContTitle"},m.a.createElement("div",{className:"ContTitleLeft"},m.a.createElement("span",null,"\u59d3\u540d\uff1a"),m.a.createElement("input",{type:"text",onChange:function(t){return e.renNameChange(t)},defaultValue:o}),m.a.createElement("span",null,"\u8bc1\u4ef6\u53f7\uff1a"),m.a.createElement("input",{type:"text",onChange:function(t){return e.renIDChange(t)},defaultValue:i})),m.a.createElement("div",{className:"ContTitleRight"},m.a.createElement("span",{onClick:function(){return e.RenIdSearch(1)}},m.a.createElement("i",null),"\u641c\u7d22"),m.a.createElement("span",{onClick:function(){return e.RenIdSearch(2)}},m.a.createElement("i",null),"\u91cd\u7f6e"))),m.a.createElement("div",{className:"ContList"},r.length>0&&r.map((function(t,a){return m.a.createElement("li",{key:a,onClick:function(){return e.onTable(t.facePic.faceUrl)}},m.a.createElement("img",{src:t.facePic.faceUrl,alt:""}),m.a.createElement("p",null,m.a.createElement("span",null,"\u59d3\u540d\uff1a"),t.faceInfo.name),m.a.createElement("p",null,m.a.createElement("span",null,"\u6027\u522b\uff1a"),"female"===t.faceInfo.sex?"\u5973":"\u7537"),m.a.createElement("p",null,m.a.createElement("span",null,"\u8bc1\u4ef6\u53f7\uff1a")),m.a.createElement("p",null,t.faceInfo.certificateNum))})),r.length<0?m.a.createElement("div",{style:{"text-align":"center",color:"#01a1ff"}},"\u6682\u65e0\u6570\u636e"):null)))))}}]),n}(u.Component);t.a=k}).call(this,a(18))},347:function(e,t,a){e.exports=a.p+"static/media/RenIcon.74afb808.png"},348:function(e,t,a){"use strict";(function(e){var n=a(47),l=a.n(n),o=a(69),i=a(9),r=a(10),s=a(2),c=a(12),d=a(11),u=a(0),m=a.n(u),h=a(5),f=a.n(h),g=a(1),p=a.n(g),v=a(3),y=a(114),b=a.n(y),E=a(115),w=function(t){Object(c.a)(n,t);var a=Object(d.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=a.call(this,t)).ChangeSpeedOne=function(e){n.this.setState({speedOne:e.target.value})},r.ChangeSpeedTwo=function(e){n.this.setState({speedTwo:e.target.value})},r.changeProblem=function(e){console.log(e.target.value),n.this.setState({problem:e.target.value,problemId:e.target.value})},r.handlePhoto=function(){var e=Object(o.a)(l.a.mark((function e(t){var a,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(o=new FileReader).readAsDataURL(t.target.files[0]),o.onload=function(e){a=e.target.result,n.this.setState({UploadImg:a})},i=r.state.UploadImg,console.log(i,t.target.files[0]),p()(".img2").show(),p()(".img1,h5").hide();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.alarmBtn=function(){var t=Object(s.a)(r),a=r.state.alarmFlag,n=r.state.isLoad;if(a)console.log(222),r.setState({alarmFlag:!a,isLoad:!n});else{console.log(111);var l={headers:{"Content-Type":"multipart/form-data"}},o=new FormData;o.append("ex_typeid",0),console.log(o,l),f.a.post(e.Url+"ex/info/list",o,l).then((function(e){console.log(e.data.data),t.setState({alarmValue:e.data.data,alarmFlag:!0,isLoad:!n})})).catch((function(e){console.log(e)}))}r.props.parent.qhChangtai(Object(s.a)(r),!1)},r.receiveMessage=function(e){void 0!==e&&e.data&&e.data.name&&console.log("\u63a5\u53d7iframe\u7684\u6570\u636e",e.data)},r.handleClick=function(){document.getElementById("core_content").contentWindow.postMessage(1233,"*")},r.state={isLoad:!0,workList:[],treeList:[],DisplayList:[],EndCount:1,speedOne:5,speedTwo:20,UploadImg:b.a,cameraName:"",cameraId:"",problem:"",problemId:null,problemList:{},problemRemark:"",alarmFlag:!1,alarmValue:[],timezxyN:"",timezxyS:""},n.this=Object(s.a)(r),r.fileInputEl=m.a.createRef(),r.Work=r.Work.bind(Object(s.a)(r)),r.Work1=r.Work1.bind(Object(s.a)(r)),r.Sign=r.Sign.bind(Object(s.a)(r)),r.Report=r.Report.bind(Object(s.a)(r)),r.ReportClose=r.ReportClose.bind(Object(s.a)(r)),r.SaveBut=r.SaveBut.bind(Object(s.a)(r)),r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){n.this.ClosePic(),this.onLoad(),this.ProList(),this.onButLoad(),window.receiveMessageFromIndex=function(t){if(void 0!==t)switch(t.data.switchName){case"roamingDisplay":if(console.log(t.data),n.this.state.EndCount++,"end"===t.data.msg){var a=n.this.state,l=a.timezxyN,o=a.timezxyS;if(f.a.post(e.Url+"patrol/statistics/add",{patrol_name:l,start_time:o,end_time:n.this.timeNow()}).then((function(e){"success"===e.data.msg&&(n.this.setState({timezxyN:"",timezxyS:""}),console.log(e.data.msg,"\u5de1\u903b\u6dfb\u52a0\u6210\u529f"))})),n.this.state.EndCount>=n.this.state.DisplayList.length)return v.a.endVod(),v.a.deleteRoamingRoute(),p()(".IndexHome").css({width:"100%",top:"100px",zIndex:"0"}),void p()(".iframeBut").hide();console.log(n.this.state.EndCount,n.this.state.DisplayList),v.a.roamingDisplay(n.this.state.DisplayList[n.this.state.EndCount])}break;case"poamingPlaybackS":var i=t.data.cameraData;console.log(t.data),n.this.setState({cameraName:i.camera_name,cameraId:i.cameraQueueList[0]});break;case"CloseAlarmBox":n.this.Sign();break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1)}},{key:"onLoad",value:function(){f.a.get(e.Url+"patrol/line/list").then((function(t){var a=t.data.data;a?(console.log(a),n.this.setState({workList:a})):(p()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"onButLoad",value:function(){f.a.get(e.Url+"patrol/plan/list").then((function(t){var a=t.data.data;a?(console.log(a),n.this.setState({treeList:a})):(p()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"timeNow",value:function(){var e="",t=new Date;return e+=t.getFullYear()+"-",e+=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,e+="-",e+=t.getDate()<10?"0"+t.getDate():t.getDate(),e+=" ",e+=t.getHours()<10?"0"+t.getHours():t.getHours(),e+=":",e+=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),e+=":00"}},{key:"Work",value:function(t,a,l){var o=this;n.this.ClosePic(),n.this.setState({End:!0,timezxyN:l,timezxyS:this.timeNow()}),f.a.post(e.Url+"patrol/line/alllist",{id:a}).then((function(t){var a=t.data.data;if(a){console.log(a),p()(".IndexHome").css({width:"100%",top:"0",zIndex:"3"}),p()(".iframeBut").show();var n=o.state,l=n.speedOne,i=n.speedTwo;console.log(1e3*l.toString(),1e3*i.toString()),a.EmptySegment=1e3*l.toString(),a.SinglePhase=1e3*i.toString(),console.log(a),v.a.roamingDisplay(a)}else p()(".PageShow").show().find("h1").html(t.data.msg),e.Time()}))}},{key:"Work1",value:function(t,a){var l=this;n.this.ClosePic(),f.a.post(e.Url+"patrol/plan/list",{plan_id:a}).then((function(t){var a=t.data.data;if(a){if(console.log(a),p()(".IndexHome").css({width:"100%",top:"0",zIndex:"3"}),p()(".iframeBut").show(),!(a.length>1))return null;n.this.state.DisplayList=a,n.this.state.EndCount=0;for(var o=l.state,i=o.speedOne,r=o.speedTwo,s=[],c=0;c<n.this.state.DisplayList.length;c++){var d=n.this.state.DisplayList[c];d.EmptySegment=1e3*i.toString(),d.SinglePhase=1e3*r.toString(),s.push(d)}n.this.state.DisplayList=s,console.log(1e3*i.toString(),1e3*r.toString()),v.a.roamingDisplay(n.this.state.DisplayList[n.this.state.EndCount])}else p()(".PageShow").show().find("h1").html(t.data.msg),e.Time()}))}},{key:"Sign",value:function(){v.a.endVod(),v.a.deleteRoamingRoute(),p()(".IndexHome").css({width:"100%",top:"100px",zIndex:"0"}),p()(".iframeBut").hide(),p()("#iframeBut").html("\u6682\u505c"),p()(".addReport").hide(),n.this.ClosePic()}},{key:"ProList",value:function(){f.a.get(e.Url+"ex/type/list",{}).then((function(e){var t=e.data.data;t&&"success"===e.data.msg?n.this.setState({problemList:t,problem:t[0].type_name,problemId:t[0].id}):alert(e.msg)}))}},{key:"Report",value:function(){v.a.multiplier(0),p()("#iframeBut").html("\u7ee7\u7eed"),p()(".addReport").show()}},{key:"ReportClose",value:function(){p()(".addReport").hide(),n.this.ClosePic()}},{key:"ClosePic",value:function(){p()(".img2").hide(),p()(".img1,h5").show(),n.this.setState({UploadImg:b.a,cameraName:""})}},{key:"changeProblemRemark",value:function(e){n.this.setState({problemRemark:e.target.value})}},{key:"SaveBut",value:function(){var t=this.state,a=t.cameraName,n=t.problem,l=t.cameraId,o=t.problemRemark,i=t.problemId,r=new FormData;r.append("detail_info",o),r.append("device_code",l),r.append("ex_name",n),r.append("ex_typeid",i),r.append("device_name",a),r.append("files",p()("#optUrl")[0].files[0]),console.log(r),a?(console.log(void 0),f.a.post(e.Url+"ex/info/add",r).then((function(t){var a=t.data.data;console.log(a),a&&"success"===t.data.msg?(p()(".PageShow1").show().find("h1").html("\u5f02\u5e38\u4e0a\u62a5\u6210\u529f\uff01"),p()(".PageShowCont h2").hide(),p()(".addReport").hide(),e.Time()):(p()(".PageShow1").show().find("h1").html(t.data.msg),p()(".PageShowCont h2").hide(),e.Time())}))):(p()(".PageShow1").show().find("h1").html("\u6682\u65e0\u5f02\u5e38\u7684\u6444\u50cf\u5934\uff01"),p()(".PageShowCont h2").hide(),e.Time())}},{key:"render",value:function(){var t=this,a=this.state,n=a.alarmValue,l=a.alarmFlag,o=a.isLoad,i=a.workList,r=a.treeList,s=a.speedOne,c=a.speedTwo,d=a.cameraName,h=a.problem,f=a.problemList,g=a.problemRemark,p=a.UploadImg;return m.a.createElement(u.Fragment,null,o?m.a.createElement("div",null,m.a.createElement("div",{className:"AlarmShow resourceMap"},m.a.createElement("h1",null,m.a.createElement("span",null,"\u5de1\u903b\u8def\u7ebf")),m.a.createElement("div",{className:"work"},m.a.createElement("ul",null,i.length>0&&i.map((function(e,a){return m.a.createElement("li",{key:e.id},m.a.createElement("span",null,e.line_name),m.a.createElement("button",{onClick:function(a){return t.Work(a,e.id,e.line_name)}},"\u5f00\u59cb"))}))))),m.a.createElement("div",{className:"AlarmShow resourceMap",style:{marginTop:"320px"}},m.a.createElement("h1",null,m.a.createElement("span",null,"\u5de1\u903b\u9884\u6848\u8def\u7ebf")),m.a.createElement("div",{className:"work"},m.a.createElement("ul",null,r.length>0&&r.map((function(e,a){return m.a.createElement("li",{key:e.id},m.a.createElement("span",null,e.plan_name),m.a.createElement("button",{onClick:function(a){return t.Work1(a,e.id)}},"\u5f00\u59cb"))}))))),m.a.createElement("div",{className:"AlarmShow resourceMap",style:{marginTop:"640px",height:"150px"}},m.a.createElement("h1",null,m.a.createElement("span",null,"\u5de1\u903b\u901f\u5ea6")),m.a.createElement("div",{className:"work"},m.a.createElement("li",null,m.a.createElement("span",null,"\u65e0\u8bbe\u5907\u8def\u7ebf\u901f\u5ea6\uff1a"),m.a.createElement("input",{type:"number",step:"0",value:s,onChange:function(e){return t.ChangeSpeedOne(e)}}),"\u79d2"),m.a.createElement("li",null,m.a.createElement("span",null,"\u5355\u4e2a\u8bbe\u5907\u901f\u5ea6\uff1a"),m.a.createElement("input",{type:"number",step:"0",value:c,onChange:function(e){return t.ChangeSpeedTwo(e)}}),"\u79d2"))),m.a.createElement("div",{className:"iframeBut"},m.a.createElement("button",{id:"iframeBut",onClick:function(){return e.suspend()}},"\u6682\u505c"),m.a.createElement("button",{onClick:function(){return t.Sign()}},"\u9000\u51fa"),m.a.createElement("button",{onClick:function(){return t.Report()}},"\u5f02\u5e38\u4e0a\u4f20")),m.a.createElement("div",{className:"addReport"},m.a.createElement("h1",null,"\u5f02\u5e38\u4fe1\u606f ",m.a.createElement("i",{onClick:function(){return t.ReportClose()}})),m.a.createElement("div",{className:"addReportCont"},m.a.createElement("p",null,m.a.createElement("span",null,"\u76f8\u673a\u540d\u79f0\uff1a"),m.a.createElement("input",{type:"text",defaultValue:d})),m.a.createElement("p",null,m.a.createElement("span",null,"\u5e38\u89c1\u95ee\u9898\uff1a"),m.a.createElement("select",{name:"",onChange:function(e){return t.changeProblem(e)},value:h},f.length>0&&f.map((function(e,t){return m.a.createElement("option",{key:t,value:e.id},e.type_name)})))),m.a.createElement("p",null,m.a.createElement("span",null,"\u8be6\u60c5\u4fe1\u606f\uff1a"),m.a.createElement("textarea",{className:"AddTextarea",style:{height:"90px"},defaultValue:g,onChange:function(e){return t.changeProblemRemark(e)}})),m.a.createElement("p",null,m.a.createElement("span",null,"\u4e0a\u4f20\u6587\u4ef6\uff1a"),m.a.createElement("div",{className:"upload",style:{position:"relative"}},m.a.createElement("input",{type:"file",id:"optUrl",ref:this.fileInputEl,accept:".jpg,.jpeg,.png,.mp4",hidden:!0,onChange:function(e){return t.handlePhoto(e)}}),m.a.createElement("div",{onClick:function(){t.fileInputEl.current.click()}},m.a.createElement("img",{className:"img1",src:p,alt:""}),m.a.createElement("img",{className:"img2",src:p,alt:"",style:{display:"none"}}),m.a.createElement("h5",null,"\u70b9\u51fb\u4e0a\u4f20")))),m.a.createElement("div",{className:"submit",onClick:function(){return t.SaveBut()}},"\u4fdd\u5b58\u4fe1\u606f")))):null,l&&m.a.createElement("div",{className:"Exception alarmFlag"},m.a.createElement(E.b,{alarmValue:n,onClick:this.alarmBtn,title:"\u5de1\u903b\u5f02\u5e38\u4fe1\u606f"})),m.a.createElement("div",{className:"AlarmButton OneAlarm",style:{bottom:"400px"},onClick:this.alarmBtn},"\u5de1\u903b\u5f02\u5e38"))}}]),n}(u.PureComponent);t.a=w}).call(this,a(18))},349:function(e,t,a){"use strict";(function(e){var n=a(9),l=a(10),o=a(2),i=a(12),r=a(11),s=a(0),c=a.n(s),d=(a(310),a(1)),u=a.n(d),m=a(3),h=function(t){Object(i.a)(d,t);var a=Object(r.a)(d);function d(e){var t;return Object(n.a)(this,d),t=a.call(this,e),d.this=Object(o.a)(t),t.state={name:"",FloorList:{},center_position:{},History:null,FloorId:""},t.Close=t.Close.bind(Object(o.a)(t)),t}return Object(l.a)(d,[{key:"AssignedModelID",value:function(e,t){var a;u()(".Floor"+e).addClass("active"),u()(".FloorListNav").find("li").removeClass("active");var n=[],l=new RegExp("/","g");t.forEach((function(e){null!=e.model_url&&n.push({modelId:e.model_url.replace(l,"_"),order_num:e.order_num,more:e})}));for(var o=0;o<t.length;o++)if(t[o].id===e){if(a=t[o].model_url.replace(l,"_"),null==t[o].model_url)return;if(null==t[o].center_position)null!=a&&(-1!==a.indexOf("DXS")?(m.a.onMenuClickedV3(a,n),m.a.removefloorOther()):m.a.onMenuClickedV2(a,n));else{var i=t[o].center_position,r={y:i.y,x:i.x,z:i.z,h:i.heading,p:i.pitch,r:i.roll};m.a.onMenuClickedV2(a,n),m.a.CoordinateLocation(r),console.log("Floors",t[o].center_position)}break}}},{key:"Close",value:function(e){u()(".FloorListNav").find("li").removeClass("active"),u()("#liu").css({display:"none"});var t=new RegExp("/","g");console.log(e);for(var a=[],n=0;n<e.length;n++)null!=e[n].model_url&&a.push({modelId:e[n].model_url.replace(t,"_"),order_num:e[n].order_num});a.length>0&&-1===a[0].modelId.indexOf("DXS")&&(m.a.ShowSpecifiedModel(a),m.a.Close()),m.a.BuildingShow({show:!0})}},{key:"componentDidMount",value:function(){window.receiveMessageFromIndex=function(e){if(void 0!==e)switch(e.data.switchName){case"returnData":console.log(e.data),d.this.setState({FloorId:e.data.floor_id}),u()(".FloorListNav").find("li").removeClass("active"),u()(".Floor"+e.data.floor_id).addClass("active"),1===e.data.number&&d.this.setState({FloorList:e.data.result});break;case"TabClick":if(console.log(e.data),"{}"!==JSON.stringify(d.this.state.FloorList)&&d.this.state.History!==e.data.tabid&&null!=d.this.state.History){var t=d.this.state.FloorList;d.this.Close(t)}if(e.data.indoor){var a=JSON.parse(sessionStorage.getItem("Floor"));u()("#liu").css({display:"block"});for(var n=0;n<a.length;n++)if(a[n].FloorItems.id===e.data.tabid){d.this.setState({name:a[n].FloorItems.build_name,FloorList:a[n].Floorlists,center_position:a[n].FloorItems.center_position,build_id:e.data.tabid}),d.this.state.History=a[n].FloorItems.id;break}}else{a=JSON.parse(sessionStorage.getItem("Floor"));for(var l=0;l<a.length;l++)if(a[l].FloorItems.id===d.this.state.build_id){a=a[l].Floorlists,u()("#liu").css({display:"none"});for(var o=new RegExp("/","g"),i=[],r=0;r<a.length;r++)null!=a[r].model_url&&i.push({modelId:a[r].model_url.replace(o,"_"),order_num:a[r].order_num});m.a.ShowSpecifiedModel(i);break}}break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1)}},{key:"render",value:function(){var t=this,a=this.state,n=a.name,l=a.FloorList;return e.floooList=l,c.a.createElement(s.Fragment,null,c.a.createElement("div",{content:l,className:"configShow",id:"liu",style:{position:"fixed",marginTop:"35px",width:"350px",marginLeft:"-380px",zIndex:"5",left:"100%",display:"none",height:"auto",maxHeight:"700px"}},c.a.createElement("div",{className:"configShowNav"},c.a.createElement("span",{style:{width:"80%",float:"left",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},n),c.a.createElement("i",{id:"LiuClose",onClick:function(){return t.Close(l)}})),c.a.createElement("div",{className:"configShowConent"},c.a.createElement("div",{className:"configShowConent_cont AlarmCont"},c.a.createElement("ul",{className:"FloorListNav"},l.length>0&&l.map((function(e,a){return c.a.createElement("li",{onClick:function(){return t.AssignedModelID(e.id,l)},className:"Floor"+e.id,key:a,id:e.id},e.floor_name)})))))))}}]),d}(s.Component);t.a=h}).call(this,a(18))},350:function(e,t,a){"use strict";(function(e){var n=a(9),l=a(10),o=a(2),i=a(12),r=a(11),s=a(0),c=a.n(s),d=a(16),u=a(5),m=a.n(u),h=a(1),f=a.n(h),g=a(38),p=(a(44),a(310),a(351)),v=a(3),y=function(t){Object(i.a)(d,t);var a=Object(r.a)(d);function d(){var e;return Object(n.a)(this,d),(e=a.call(this)).state={showAddPosition:!1,locationList:[],Bscroll:"",activeBtn:!1,RemoverId:"",RemoverIndex:"",listIndex:0},e.handleClick=e.handleClick.bind(Object(o.a)(e)),e.closeBtn=e.closeBtn.bind(Object(o.a)(e)),e.getLocationList=e.getLocationList.bind(Object(o.a)(e)),e.addOver=e.addOver.bind(Object(o.a)(e)),e.deleteItem=e.deleteItem.bind(Object(o.a)(e)),e.centerAim=e.centerAim.bind(Object(o.a)(e)),e}return Object(l.a)(d,[{key:"KuaiJieJian",value:function(){var e=this;this.getLocationList(),document.body.addEventListener("keyup",(function(t){window.event&&(t=window.event);var a=t.charCode||t.keyCode,n=e.state.locationList;if(106===a){var l=e.state.listIndex;e.centerAim(n[l].position),n.length-1>l?e.setState({listIndex:l+1}):e.setState({listIndex:0}),console.log(n[l].position,"\u5750\u6807"+l)}}))}},{key:"componentWillMount",value:function(){document.body.removeEventListener("keyup",(function(){}))}},{key:"componentDidMount",value:function(){this.KuaiJieJian(),window.receiveMessageFromIndex=function(e){if(void 0!==e)switch(e.data.switchName){case"getCameraView":sessionStorage.setItem("updatePosition",this.JSON.stringify(e.data.cv,null,4));break;case"InterceptImg":sessionStorage.setItem("upadteImg",JSON.stringify(e.data));break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1)}},{key:"componentDidUpdate",value:function(){f()("#PositionList").children().length>=5?(f()("#PositionList").addClass("PositionList"),f()(".PositionLeft").addClass("PositionLeftChange")):(f()("#PositionList").removeClass("PositionList"),f()(".PositionLeft").removeClass("PositionLeftChange")),0===f()("#PositionList").children().length?f()(".PositionLeft").css("display","none"):f()(".PositionLeft").css("display","block")}},{key:"getLocationList",value:function(){var t=this;this.setState({activeBtn:!this.state.activeBtn});var a=new FormData;a.append("user_id",sessionStorage.getItem("role")),m.a.post(e.Url+"map/location/list",a).then((function(a){var n=a.data.data;n?(console.log(n),t.setState({locationList:n})):(f()(".PageShow").show().find("h1").html(a.data.msg),e.Time())}))}},{key:"handleClick",value:function(){this.setState({showAddPosition:!this.state.showAddPosition})}},{key:"closeBtn",value:function(){this.setState({showAddPosition:!1})}},{key:"addOver",value:function(e){this.state.locationList.push(e);var t=this.state.locationList;this.setState({locationList:t}),this.forceUpdate()}},{key:"deleteItem",value:function(e,t){f()(".position").show(),this.setState({RemoverId:t,RemoverIndex:e})}},{key:"PageDeletedData4",value:function(){var t=this,a=this.state,n=a.RemoverId,l=a.RemoverIndex;m.a.post(e.Url+"map/location/delete",{id:n}).then((function(a){"success"===a.data.msg?(t.state.locationList.splice(l,1),t.setState({locationList:t.state.locationList}),t.forceUpdate(),f()(".position").hide(),f()(".PageShow").show().find("h1").html("\u5220\u9664\u6210\u529f"),e.Time()):alert(a.data.msg)}))}},{key:"changeItem",value:function(e,t){v.a.onCoordinate(),v.a.InterceptImg();var a=this;setTimeout((function(){a.saveChange(e,t)}),0)}},{key:"saveChange",value:function(t,a){var n=this,l={};l.location_name=a.location_name,l.id=a.id,l.position=JSON.parse(sessionStorage.getItem("updatePosition")),l.pic=JSON.parse(sessionStorage.getItem("upadteImg")).base64Img,m.a.post(e.Url+"map/location/update",l).then((function(a){var o=a.data.data;console.log(o),o?(n.state.locationList.splice(t,1,l),n.setState({locationList:n.state.locationList}),n.forceUpdate()):(f()(".PageShow").show().find("h1").html(a.data.msg),e.Time())}))}},{key:"centerAim",value:function(e){v.a.CoordinateLocation(e)}},{key:"render",value:function(){var t=this,a=this.props,n=a.index,l=a.clickIcon,o=this.state,i=o.locationList,r=o.showAddPosition,d=o.activeBtn;return c.a.createElement(s.Fragment,null,c.a.createElement("li",{onClick:function(){l(2),t.getLocationList()},className:d&&2===n?"active":""},c.a.createElement("i",{className:"icon2"}),c.a.createElement("span",null,"\u5e38\u7528\u4f4d\u7f6e")),2===n&&d?c.a.createElement("div",{className:"PositionWrapper"},c.a.createElement("div",{className:"PositionLeft"},c.a.createElement("div",{className:"PositionList",id:"PositionList"},i.length>0?i.map((function(e,a){return c.a.createElement("div",{className:"PositionListItem",key:a,index:a,id:e.id},c.a.createElement("span",null,c.a.createElement("em",null,e.location_name),c.a.createElement("i",{className:"item1",style:{cursor:"pointer"},onClick:function(){return t.deleteItem(a,e.id)}}),c.a.createElement("i",{className:"item2",style:{cursor:"pointer"},onClick:function(){return t.changeItem(a,e)}})),c.a.createElement("img",{src:e.pic,style:{cursor:"pointer"},onClick:function(){t.centerAim(e.position)},alt:""}))})):"")),c.a.createElement("div",{className:"PositionRight",onClick:function(){return t.handleClick()}},c.a.createElement("i",null),"\u6dfb\u52a0\u4f4d\u7f6e"),r?c.a.createElement(p.a,{changeData:this.closeBtn,addData:this.addOver}):""):"",c.a.createElement("div",{className:"PageShow1 position"},c.a.createElement("div",{className:"PageShowCont"},c.a.createElement("h1",null,"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u561b\uff01"),c.a.createElement("h2",null,c.a.createElement("button",{onClick:function(){return t.PageDeletedData4()}},"\u786e\u5b9a"),c.a.createElement("button",{onClick:function(){return e.PageHide()}},"\u53d6\u6d88")))))}}]),d}(s.PureComponent);t.a=Object(d.b)((function(e){return{index:e.footer.get("index")}}),(function(e){return{clickIcon:function(t){e(g.a.click_Icon(t)),f()("#liu").css({display:"none"})}}}))(y)}).call(this,a(18))},351:function(e,t,a){"use strict";(function(e){var n=a(9),l=a(10),o=a(2),i=a(12),r=a(11),s=a(0),c=a.n(s),d=(a(44),a(5)),u=a.n(d),m=a(1),h=a.n(m),f=a(3),g=function(t){Object(i.a)(s,t);var a=Object(r.a)(s);function s(e){var t;return Object(n.a)(this,s),(t=a.call(this,e)).state={currentPosition:{}},t.back=t.back.bind(Object(o.a)(t)),t.addLocation=t.addLocation.bind(Object(o.a)(t)),t}return Object(l.a)(s,[{key:"componentDidMount",value:function(){h()("#locationName").focus(),window.receiveMessageFromIndex=function(e){if(void 0!==e)switch(e.data.switchName){case"getCameraView":sessionStorage.setItem("currentPosition",this.JSON.stringify(e.data.cv,null,4));break;case"InterceptImg":sessionStorage.setItem("Img",JSON.stringify(e.data));break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1)}},{key:"back",value:function(e){e.stopPropagation(),this.props.changeData()}},{key:"addLocation",value:function(){if(""===h()("#locationName").val())return h()(".PageShow").show().find("h1").html("\u8bf7\u8f93\u5165\u540d\u79f0"),void e.Time();f.a.onCoordinate(),f.a.InterceptImg();var t=this;setTimeout((function(){t.saveLocation()}),800)}},{key:"saveLocation",value:function(){var t=this,a={};a.location_name=h()("#locationName").val(),a.position=JSON.parse(sessionStorage.getItem("currentPosition")),a.pic=JSON.parse(sessionStorage.getItem("Img")).base64Img,a.user_id=sessionStorage.getItem("role"),u.a.post(e.Url+"map/location/add",a).then((function(a){var n=a.data.data;n?(t.props.addData(n),t.props.changeData()):(h()(".PageShow").show().find("h1").html(a.data.msg),e.Time())}))}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"addPositionBox",style:{color:"#fff"}},c.a.createElement("div",{style:{marginTop:"34px"}},c.a.createElement("span",{style:{marginLeft:"22px",fontSize:"15px"}},"\u4f4d\u7f6e\u540d\u79f0"),c.a.createElement("input",{type:"text",id:"locationName"})),c.a.createElement("div",{className:"addPositionButtonArea"},c.a.createElement("div",{className:"addPosBtn",onClick:function(){e.addLocation()},style:{marginLeft:"100px",cursor:"pointer"}},"\u4fdd\u5b58"),c.a.createElement("div",{className:"addPosBtn",onClick:function(t){return e.back(t)},style:{marginLeft:"21px",cursor:"pointer"}},"\u53d6\u6d88")))}}]),s}(s.PureComponent);t.a=g}).call(this,a(18))},352:function(e,t,a){"use strict";(function(e){var n=a(33),l=a(9),o=a(10),i=a(2),r=a(12),s=a(11),c=a(0),d=a.n(c),u=(a(44),a(38)),m=a(16),h=a(3),f=a(1),g=a.n(f),p=a(5),v=a.n(p),y=a(208),b=a.n(y),E={RainwaterSystem:!0,snowSystem:!0,Fogging:!0,enableLighting:!0,MeasurementHeight:!0,measureLineSpace:!0,measureAreaSpace:!0,onSurveillance:!0,WeiShiDu:!0,ZhuiTi:!1,UnderList:!0,VideoTracking:!0},w=function(t){Object(r.a)(u,t);var a=Object(s.a)(u);function u(e){var t;return Object(l.a)(this,u),(t=a.call(this,e)).state={activeBtn:!1,kxList:{},layerList:{},guangboList:[],checkGb:[],songList:[],isSadian:!1,isdianbo:!1,DianData:{},modelId:[],XianData:{},DataList:{},lx_name:"",lx_startTime:"",lx_endTime:"",stime:"",etime:"",xgList:[{name:"\u8def\u7ebf\u4ffa\u662f",startTime:"2020-12-09 11:27:88",endTime:"2020-12-09 11:27:88"},{name:"\u8def\u7ebf\u4ffa\u662f",startTime:"2020-12-09 11:27:88",endTime:"2020-12-09 11:27:88"},{name:"\u8def\u7ebf\u4ffa\u662f",startTime:"2020-12-09 11:27:88",endTime:"2020-12-09 11:27:88"},{name:"\u8def\u7ebf\u4ffa\u662f",startTime:"2020-12-09 11:27:88",endTime:"2020-12-09 11:27:88"},{name:"\u8def\u7ebf\u4ffa\u662f",startTime:"2020-12-09 11:27:88",endTime:"2020-12-09 11:27:88"},{name:"\u8def\u7ebf\u4ffa\u662f",startTime:"2020-12-09 11:27:88",endTime:"2020-12-09 11:27:88"},{name:"\u8def\u7ebf\u4ffa\u662f",startTime:"2020-12-09 11:27:88",endTime:"2020-12-09 11:27:88"},{name:"\u8def\u7ebf\u4ffa\u662f",startTime:"2020-12-09 11:27:88",endTime:"2020-12-09 11:27:88"}],allxgList:[],pageSize:0,allpageNum:0,xuhao:1},u.this=Object(i.a)(t),t.changeStatus=t.changeStatus.bind(Object(i.a)(t)),t.JianKong=t.JianKong.bind(Object(i.a)(t)),t.JianClose=t.JianClose.bind(Object(i.a)(t)),t.Flay=t.Flay.bind(Object(i.a)(t)),t.dianbo=t.dianbo.bind(Object(i.a)(t)),t.Demand=t.Demand.bind(Object(i.a)(t)),t.selectItem=t.selectItem.bind(Object(i.a)(t)),t.Dian=t.Dian.bind(Object(i.a)(t)),t.Xain=t.Xian.bind(Object(i.a)(t)),t.CloseTrace=t.CloseTrace.bind(Object(i.a)(t)),t.VideoSee=t.VideoSee.bind(Object(i.a)(t)),t}return Object(o.a)(u,[{key:"componentDidMount",value:function(){this.getxgList(),window.receiveMessageFromIndex=function(t){if(void 0!==t)switch(t.data.switchName){case"initBubble":console.log(t.data),sessionStorage.setItem("TadId",t.data.tabid);break;case"SelectCameras":console.log(t.data),u.this.setState({kxList:t.data.cameras.data}),g()(".JianKongList").show();break;case"fage":for(var a=t.data.songData,n=[],l=0;l<a.MP3.length;l++)n.push(a.MP3[l].split("_"));u.this.setState({songList:n});break;case"drawPoint":var o=u.this.state.modelId;o.push(t.data.id),console.log("\u70b9",t.data),u.this.setState({DianData:t.data.position,modelId:o});var i={type:"point",positions:[t.data.position]};console.log(i,"paramer"),v.a.post("http://192.168.0.111:8090/33010403001/watch/drag/list",i).then((function(t){console.log(t,"aaaaaaaaaa");var a=t.data.data;a&&"success"===t.data.msg?(console.log(a,"results"),u.this.setState({DataList:a}),g()(".Videist").show(),g()(".TraceCT").css({height:"500px"})):(g()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}));break;case"drawPolyline":var r=u.this.state.modelId;r.push(t.data.id),u.this.setState({XianData:t.data.parameter,modelId:r});var s={type:"linestring",positions:[t.data.parameter.position]};console.log(s,"paramerlist"),v.a.post("http://192.168.0.111:8090/33010403001/watch/drag/list",s).then((function(t){console.log(t,"bbbbbb");var a=t.data.data;a&&"success"===t.data.msg?(console.log(a,"results"),u.this.setState({DataList:a}),g()(".Videist").show(),g()(".TraceCT").css({height:"500px"})):(g()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}));break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1)}},{key:"changeStatus",value:function(){this.setState({activeBtn:!this.state.activeBtn})}},{key:"Flay",value:function(e,t){e.stopPropagation(),g()("#layer"+t.id).find("span").css({color:"#54b2df"}),g()("#layer"+t.id).siblings().find("span").css({color:"#fff"}),g()(".layer_t").find("span").css({color:"#fff"}),console.log(t),h.a.InitialPositioning(t);var a,n=new RegExp("/","g"),l=[],o=[];JSON.parse(sessionStorage.getItem("Floor")).forEach((function(e){e.Floorlists.forEach((function(e){o.push(e)}))})),console.log(o),o.forEach((function(e){null!=e.model_url&&l.push({modelId:e.model_url.replace(n,"_"),order_num:e.order_num,more:e})}));for(var i=0;i<o.length;i++)if(o[i].id===t.floor_id){if(a=o[i].model_url.replace(n,"_"),null==o[i].model_url)return;if(null==o[i].center_position)null!=a&&(-1!==a.indexOf("DXS")?(h.a.onMenuClickedV3(a,l),h.a.removefloorOther()):h.a.onMenuClickedV2(a,l));else{var r=o[i].center_position,s={y:r.y,x:r.x,z:r.z,h:r.heading,p:r.pitch,r:r.roll};h.a.onMenuClickedV2(a,l),h.a.CoordinateLocation(s),console.log("Floors",o[i].center_position)}break}h.a.SadianUp()}},{key:"Vertebral",value:function(){E.ZhuiTi?(E.ZhuiTi=!1,h.a.drawViewCentrum()):(E.ZhuiTi=!0,h.a.ViewShedclearModel())}},{key:"MeasurementHeight",value:function(){E.MeasurementHeight?(E.MeasurementHeight=!1,h.a.MeasurementHeight()):(E.MeasurementHeight=!0,h.a.RemoveHeight())}},{key:"measureLineSpace",value:function(){E.measureLineSpace?(E.measureLineSpace=!1,h.a.measureLineSpace()):(E.measureLineSpace=!0,h.a.RemoveLine())}},{key:"measureAreaSpace",value:function(){E.measureAreaSpace?(E.measureAreaSpace=!1,h.a.measureAreaSpace()):(E.measureAreaSpace=!0,h.a.RemoveArea())}},{key:"snowSystem",value:function(){E.snowSystem?(E.snowSystem=!1,h.a.snowSystemV2()):(E.snowSystem=!0,h.a.snowDelete())}},{key:"RainwaterSystem",value:function(){E.RainwaterSystem?(E.RainwaterSystem=!1,h.a.RainwaterSystemV2()):(E.RainwaterSystem=!0,h.a.RainDelete())}},{key:"Fogging",value:function(){E.Fogging?(E.Fogging=!1,h.a.Fogging()):(E.Fogging=!0,h.a.fogDelete())}},{key:"enableLighting",value:function(){E.enableLighting?(E.enableLighting=!1,h.a.enableLightingV2()):(E.enableLighting=!0,h.a.lightDelete())}},{key:"Surveillance",value:function(){E.onSurveillance?(E.onSurveillance=!1,h.a.onSurveillance()):(E.onSurveillance=!0,h.a.onMap())}},{key:"SPZC",value:function(){if(E.VideoTracking)E.VideoTracking=!1,g()(".TraceCT").show();else{E.VideoTracking=!0,g()(".TraceCT").hide(),g()(".Videist").hide(),g()(".TraceCT").css({height:"200px"});var e=this.state.modelId;e.length>0&&e.forEach((function(e){h.a.RemoveDX(e)}))}}},{key:"UnderList",value:function(){var t=e.floooList;if(t.length>0&&-1===t[0].model_url.indexOf("DXS")){for(var a=new RegExp("/","g"),n=[],l=0;l<t.length;l++)null!=t[l].model_url&&n.push({modelId:t[l].model_url.replace(a,"_"),order_num:t[l].order_num});h.a.ShowSpecifiedModel(n)}E.UnderList?(console.log("\u6253\u5f00"),E.UnderList=!1,h.a.BuildingShow({show:!1}),u.this.Under()):(console.log("\u5173\u95ed"),E.UnderList=!0,h.a.BuildingShow({show:!0}))}},{key:"Under",value:function(){v.a.get(e.Url+"map/under/list").then((function(e){var t=e.data.data;if(t){console.log(t),h.a.UndergroundInspection({buildList:t}),g()("#liu").css({display:"block"}),g()("#liu").find(".configShowNav").find("span").html("\u5730\u4e0b\u5ba4");var a={result:t,number:1};h.a.returnData(a)}}))}},{key:"See",value:function(){u.this.Vertebral()}},{key:"WeiShiDu",value:function(){if(E.WeiShiDu)E.WeiShiDu=!1,h.a.initBubble();else{E.WeiShiDu=!0;var e={id:sessionStorage.getItem("TadId"),type:0};h.a.removeBubbleBombbox(e)}}},{key:"JianKong",value:function(e){console.log(e);var t={id:e.id};h.a.CoordinateModelID(t),h.a.returnData(e)}},{key:"JianClose",value:function(){u.this.setState({kxList:{}}),g()("#liu,.JianKongList").hide(),h.a.onResetCoordinates()}},{key:"RenClose",value:function(){u.this.setState({layerList:{}}),g()("#liu,.renList").hide();h.a.deletePositioning("_2DPositioningBox");for(var e=new RegExp("/","g"),t=[],a=JSON.parse(sessionStorage.getItem("Floor")),n=0;n<a.length;n++)null!=a[n].model_url&&t.push({modelId:a[n].model_url.replace(e,"_"),order_num:a[n].order_num});console.log(JSON.parse(sessionStorage.getItem("Floor")),t),t.length>0&&-1===t[0].modelId.indexOf("DXS")&&h.a.ShowSpecifiedModel(t),h.a.BuildingShow({show:!0}),g()("#liu").css({display:"none"})}},{key:"gbClose",value:function(){g()("#liu,.gbList").hide(),g()("#liu,.gdList").hide()}},{key:"gdClose",value:function(){g()("#liu,.gdList").hide()}},{key:"dianbo",value:function(){var e=[];g()("#gblb input:checkbox[name='song']:checked").each((function(t){e.push(g()(this).val())})),u.this.setState({checkGb:e}),g()(".gdList").show(),g()(".gbList").hide(),console.log(e,"gbArr")}},{key:"Demand",value:function(e,t){var a=this.state.checkGb;h.a.moreDemand(e,a,t)}},{key:"selectItem",value:function(e,t){"\u5168\u9009"===t.device_name?g()("#gblb input:checkbox[name='song']").each((function(t){g()(this).get(0).checked=e.target.checked})):e.target.checked||g()("#gblb input:checkbox[name='song']").each((function(e){"00"===g()(this).get(0).value&&(g()(this).get(0).checked=!1)}));var a=[];g()("#gblb input:checkbox[name='song']").each((function(e){a.push({blena:g()(this).get(0).checked})}))}},{key:"Dian",value:function(){var e=this.state.modelId;e.length>0&&e.forEach((function(e){h.a.RemoveDX(e)})),h.a.drawPoint(),u.this.setState({DataList:{}}),g()(".Videist").hide(),g()(".TraceCT").css({height:"200px"})}},{key:"Xian",value:function(){var e=this.state.modelId;e.length>0&&e.forEach((function(e){h.a.RemoveDX(e)}));var t={Polyline_style:{PolylineWitch:"10",PolylineColor:"yellow",borderWitchPolyline:"5",borderColor:"#ff0000",borderTransparencyPolyline:"100"}};h.a.drawPolyline(t),u.this.setState({DataList:{}}),g()(".Videist").hide(),g()(".TraceCT").css({height:"200px"})}},{key:"CloseTrace",value:function(){var e=this.state.modelId;e.length>0&&e.forEach((function(e){h.a.RemoveDX(e)})),g()(".Videist").hide(),g()(".TraceCT").css({height:"200px"})}},{key:"VideoSee",value:function(e,t){console.log(e,t),h.a.spzcsp(t)}},{key:"closeXG",value:function(){g()(".xgtj").hide()}},{key:"lx_name",value:function(e){this.setState({lx_name:e.target.value})}},{key:"timeChange",value:function(e,t,a){var l,o=new Date(a.target.value),i=o.getFullYear()+"-"+((o.getMonth()+1<10?"0"+(o.getMonth()+1):o.getMonth()+1)+"-")+((o.getDate()<10?"0"+o.getDate():o.getDate())+" ")+((o.getHours()<10?"0"+o.getHours():o.getHours())+":")+((o.getMinutes()<10?"0"+o.getMinutes():o.getMinutes())+":")+(o.getSeconds()<10?"0"+o.getSeconds():o.getSeconds());console.log(i,a.target.value),this.setState((l={},Object(n.a)(l,e,a.target.value),Object(n.a)(l,t,i),l))}},{key:"getxgList",value:function(){var t=this,a=this.state.pageSize;v.a.get(e.Url+"patrol/statistics/list").then((function(n){var l=n.data.data;l?t.setState({xgList:l[a],allxgList:l,allpageNum:n.data.count}):(g()(".PageShow").show().find("h1").html(n.data.msg),e.Time())}))}},{key:"handleSearch",value:function(){var t=this,a=this.state,n=a.lx_name,l=a.stime,o=a.etime;v.a.post(e.Url+"patrol/statistics/list",{patrol_name:n,start_time:l,end_time:o}).then((function(a){var n=a.data.data;n?t.setState({xgList:n[0],pageSize:0,allxgList:n,allpageNum:a.data.count}):(g()(".PageShow").show().find("h1").html(a.data.msg),e.Time())}))}},{key:"handleRest",value:function(){this.setState({lx_name:"",stime:"",etime:"",lx_startTime:"",lx_endTime:""})}},{key:"pageButoon",value:function(t){var a,n=this.state,l=n.allxgList,o=n.pageSize;if("pre"===t){if(0===o)return g()(".PageShow").show().find("h1").html("\u6ca1\u6709\u6570\u636e\u8fa3\uff01"),void e.Time();a=7*--o+1}else{if(o===l.length-1)return g()(".PageShow").show().find("h1").html("\u6ca1\u6709\u6570\u636e\u8fa3\uff01"),void e.Time();a=7*++o+1}this.setState({pageSize:o,xgList:l[o],xuhao:a})}},{key:"render",value:function(){var e=this,t=this.props,a=t.index,n=t.clickIcon,l=t.moreIndex,o=t.clickIconItem,i=t.clickIconItemNav,r=this.state,s=r.activeBtn,u=r.kxList,m=r.layerList,h=r.guangboList,f=r.songList,g=r.DataList,p=r.lx_name,v=r.lx_startTime,y=r.lx_endTime,E=r.xgList,w=r.allpageNum,S=r.pageSize,C=r.xuhao;return d.a.createElement(c.Fragment,null,d.a.createElement("li",{onClick:function(){n(3),e.changeStatus()},className:s&&3===a?"active":""},d.a.createElement("i",{className:"icon3"}),d.a.createElement("span",null,"\u66f4\u591a")),3===a&&s?d.a.createElement("div",{className:"MoreShow"},d.a.createElement("div",{className:"MoreItem",id:"MoreItem1",onClick:function(e){return o(e,1)}},d.a.createElement("i",{className:"more12"}),"\u76f8\u673a\u89c6\u91ce"),d.a.createElement("div",{className:"MoreItem",id:"MoreItem2",onClick:function(e){return o(e,2)}},d.a.createElement("i",{className:"more2"}),"\u6f2b\u6e38"),d.a.createElement("div",{className:"MoreItem",id:"MoreItem3",onClick:function(e){return o(e,3)}},d.a.createElement("i",{className:"more3"}),"\u91cf\u6d4b",3===l?d.a.createElement("div",{className:"LcShow"},d.a.createElement("div",{className:"LcItem",id:"LcItem1",onClick:function(e){return i(e,1)}},"\u6d4b\u9ad8"),d.a.createElement("div",{className:"LcItem",id:"LcItem2",onClick:function(e){return i(e,2)}},"\u6d4b\u8ddd"),d.a.createElement("div",{className:"LcItem",id:"LcItem3",onClick:function(e){return i(e,3)}},"\u6d4b\u9762\u79ef")):" "),d.a.createElement("div",{className:"MoreItem",id:"MoreItem4",onClick:function(e){return o(e,4)}},d.a.createElement("i",{className:"more4"}),"\u7279\u6548",4===l?d.a.createElement("div",{className:"LcShow"},d.a.createElement("div",{className:"LcItem",id:"LcItem4",onClick:function(e){return i(e,4)}},d.a.createElement("span",null,"\u96e8")," ",d.a.createElement("i",{className:"LcIcon1"})),d.a.createElement("div",{className:"LcItem",id:"LcItem5",onClick:function(e){return i(e,5)}},d.a.createElement("span",null,"\u96ea")," ",d.a.createElement("i",{className:"LcIcon2"})),d.a.createElement("div",{className:"LcItem",id:"LcItem6",onClick:function(e){return i(e,6)}},d.a.createElement("span",null,"\u96fe")," ",d.a.createElement("i",{className:"LcIcon3"})),d.a.createElement("div",{className:"LcItem",id:"LcItem7",onClick:function(e){return i(e,7)}},d.a.createElement("span",null,"\u5149\u7167")," ",d.a.createElement("i",{className:"LcIcon4"}))):" "),d.a.createElement("div",{className:"MoreItem",id:"MoreItem5",onClick:function(e){return o(e,5)}},d.a.createElement("i",{className:"more5"}),"\u5730\u4e0b"),d.a.createElement("div",{className:"MoreItem",id:"MoreItem6",onClick:function(e){return o(e,6)}},d.a.createElement("i",{className:"more6"}),"\u865a\u62df\u5316"),d.a.createElement("div",{className:"MoreItem",id:"MoreItem8",onClick:function(e){return o(e,8)}},d.a.createElement("i",{className:"more13"}),"\u6846\u9009")):"",d.a.createElement("div",{className:"JianKongList"},d.a.createElement("h1",null,"\u76d1\u63a7\u70b9\u5217\u8868 ",d.a.createElement("i",{onClick:function(){return e.JianClose()}})),d.a.createElement("ul",null,u.length>0&&u.map((function(t,a){return d.a.createElement("li",{key:a,className:"Data2"+t.id,onClick:function(){return e.JianKong(t)}},d.a.createElement("i",null),t.device_name)})))),d.a.createElement("div",{className:"renList"},d.a.createElement("h1",null,"\u4eba\u5458\u5b9a\u4f4d\u5217\u8868 ",d.a.createElement("i",{onClick:function(){return e.RenClose()}})),d.a.createElement("ul",null,m.length>0&&m.map((function(t,a){return d.a.createElement("li",{key:a,className:"layer",id:"layer"+t.id,onClick:function(a){return e.Flay(a,t)}},d.a.createElement("span",{title:t.name},t.name))})))),d.a.createElement("div",{className:"gbList"},d.a.createElement("h1",null,"\u5e7f\u64ad\u8bbe\u5907\u5217\u8868",d.a.createElement("i",{onClick:function(){return e.gbClose()}})),d.a.createElement("div",{className:"contentg"},d.a.createElement("ul",{id:"gblb"},h.length>0&&h.map((function(t,a){return d.a.createElement("li",{key:a,className:"gbli"+t.id},d.a.createElement("label",null,d.a.createElement("input",{type:"checkbox",name:"song",value:t.device_code,onChange:function(a){return e.selectItem(a,t)}}),t.device_name))})))),d.a.createElement("div",{className:"gbutton",onClick:function(){return e.dianbo()}},"\u70b9\u64ad")),d.a.createElement("div",{className:"gdList"},d.a.createElement("h1",null,"\u6b4c\u5355\u5217\u8868",d.a.createElement("i",{onClick:function(){return e.gdClose()}})),d.a.createElement("div",{className:"contentg"},d.a.createElement("ul",{id:"gblb"},f.length>0&&f.map((function(t,a){return d.a.createElement("li",{key:a,className:"gdli"},d.a.createElement("span",{title:t.type_name},t[0]),d.a.createElement("div",{className:"caozuo"},d.a.createElement("div",{className:"dianbo",onClick:function(){return e.Demand(t[1],"0")}},"\u70b9\u64ad"),d.a.createElement("div",{className:"guaduan",onClick:function(){return e.Demand(t[1],"1")}},"\u6302\u65ad")))}))))),d.a.createElement("div",{className:"TraceCT"},d.a.createElement("h2",{className:"Trace_tit"}," ",d.a.createElement("span",null,"\u76f8\u673a\u8ffd\u67e5")),d.a.createElement("div",{className:"Trace"},d.a.createElement("span",{onClick:function(){return e.Dian()}},"\u70b9"),d.a.createElement("span",{onClick:function(){return e.Xian()}},"\u7ebf"),d.a.createElement("span",{onClick:function(){return e.CloseTrace()}},"\u6e05\u9664")),d.a.createElement("div",{className:"Videist"},g.length>0&&g.map((function(t,a){return d.a.createElement("div",{className:"Videospotlist",key:a},d.a.createElement("i",null,t.device_name),d.a.createElement("span",{onClick:function(a){return e.VideoSee(a,t.device_code)}},"\u67e5\u770b\u89c6\u9891"))})))),d.a.createElement("div",{className:"xgtj"},d.a.createElement("div",{className:"xgtj_title"},d.a.createElement("h1",null,"\u5de1\u66f4\u7edf\u8ba1\u67e5\u8be2",d.a.createElement("i",{onClick:function(){return e.closeXG()}}))),d.a.createElement("div",{className:"xgtj_search"},d.a.createElement("ul",null,d.a.createElement("li",null,d.a.createElement("p",null,"\u7ebf\u8def\u540d\u79f0\uff1a"),d.a.createElement("input",{type:"text",value:p,onChange:this.lx_name.bind(this)})),d.a.createElement("li",null,d.a.createElement("p",null,"\u8d77\u59cb\u65f6\u95f4\uff1a"),d.a.createElement("input",{type:"datetime-local",step:"01",id:"myLocalDate",value:v,onChange:this.timeChange.bind(this,"lx_startTime","stime")}),d.a.createElement("img",{src:b.a,alt:"",style:{width:"25px",height:"25px",position:"absolute",left:"469px",top:"38px",zIndex:"-1"}})),d.a.createElement("li",null,d.a.createElement("p",null,"\u7ed3\u675f\u65f6\u95f4\uff1a"),d.a.createElement("input",{type:"datetime-local",step:"01",id:"myLocalDate",value:y,onChange:this.timeChange.bind(this,"lx_endTime","etime")}),d.a.createElement("img",{src:b.a,alt:"",style:{width:"25px",height:"25px",position:"absolute",left:"750px",top:"38px",zIndex:"-1"}}))),d.a.createElement("div",{className:"xgtj_button"},d.a.createElement("button",{onClick:this.handleSearch.bind(this)},"\u641c\u7d22"),d.a.createElement("button",{onClick:this.handleRest.bind(this)},"\u91cd\u7f6e"))),d.a.createElement("div",{className:"xgtj_table"},d.a.createElement("table",null,d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",{style:{width:"97px"}},"\u5e8f\u53f7"),d.a.createElement("th",{style:{width:"230px"}},"\u7ebf\u8def\u540d\u79f0"),d.a.createElement("th",{style:{width:"290px"}},"\u5f00\u59cb\u65f6\u95f4"),d.a.createElement("th",{style:{width:"290px"}},"\u7ed3\u675f\u65f6\u95f4"))),d.a.createElement("tbody",null,E.length<=0?d.a.createElement("tr",null,d.a.createElement("td",{style:{width:"97px"}},"\u6682\u65e0\u6570\u636e"),d.a.createElement("td",{style:{width:"230px"}},"\u6682\u65e0\u6570\u636e"),d.a.createElement("td",{style:{width:"290px"}},"\u6682\u65e0\u6570\u636e"),d.a.createElement("td",{style:{width:"290px"}},"\u6682\u65e0\u6570\u636e")):E.map((function(e,t){return d.a.createElement("tr",{key:t},d.a.createElement("td",{style:{width:"97px"}},t+C),d.a.createElement("td",{style:{width:"230px"}},e.patrol_name),d.a.createElement("td",{style:{width:"290px"}},e.start_time),d.a.createElement("td",{style:{width:"290px"}},e.end_time))}))))),d.a.createElement("div",{className:"xgtj_page"},d.a.createElement("div",{className:"pageData"},d.a.createElement("p",null,"\u5171\u8ba1\uff1a",w," \u6761\u5de1\u903b\u8bb0\u5f55\uff01 \u5f53\u524d\u4e3a\u7b2c ",S+1," \u9875\uff01")),d.a.createElement("div",{className:"pageButton"},d.a.createElement("div",{className:"prePage",onClick:this.pageButoon.bind(this,"pre")},"\u4e0a\u4e00\u9875"),d.a.createElement("div",{className:"nextPage",onClick:this.pageButoon.bind(this,"next")},"\u4e0b\u4e00\u9875")))))}}]),u}(c.PureComponent);t.a=Object(m.b)((function(e){return{index:e.footer.get("index"),moreIndex:e.footer.get("moreIndex"),moreIndexItem:e.footer.get("moreIndexItem")}}),(function(t){return{clickIcon:function(e){h.a.BuildingShow({show:!0}),g()("#liu").css({display:"none"}),t(u.a.click_Icon(e))},clickIconItem:function(a,n){switch(g()("#liu").css({display:"none"}),a.stopPropagation(),t(u.a.click_Icon_Item(n)),g()(".MoreShow").children(".MoreItem").removeClass("active"),g()("#MoreItem"+n).addClass("active"),g()(".TraceCT").hide(),n){case 1:w.this.See();break;case 2:h.a.manyouhh(),w.this.setState({activeBtn:!w.this.state.activeBtn});break;case 5:w.this.UnderList();break;case 6:w.this.Surveillance();break;case 7:break;case 8:h.a.SelectCameras();break;case 9:v.a.get(e.Url+"base/station/list",{}).then((function(e){var t=e.data.data;t&&"success"===e.data.msg?(console.log(e),w.this.setState({layerList:t}),g()(".renList").show()):alert(e.msg)}));break;case 10:g()(".PageShow").show().find("h1").html("\u52a0\u8f7d\u5e7f\u64ad\u5217\u8868\u4e2d..."),v.a.post(e.Url+"device/info/list",{}).then((function(e){var t=e.data.data;if(t){for(var a=[],n=0;n<t.length;n++)"AC15BF0E7C69C740D288D573A85EDDFC"===t[n].category_id?a.push(t[n]):(g()(".PageShow").show().find("h1").html("\u6682\u65e0\u5e7f\u64ad\u8bbe\u5907\uff01"),setTimeout((function(){g()(".PageShow").hide()}),800));a.unshift({device_code:"00",device_name:"\u5168\u9009"}),console.log(a,"\u6570\u7ec4"),w.this.setState({guangboList:a}),a.length>0&&g()(".PageShow").hide(),g()(".gbList").show()}else alert("\u6682\u65e0\u5e7f\u64ad\u8bbe\u5907")}));break;case 14:w.this.SPZC();break;case 15:g()(".xgtj").show();break;default:return null}},clickIconItemNav:function(e,a){switch(e.stopPropagation(),t(u.a.click_Icon_Item_Nav(a)),g()("#LcItem"+a).toggleClass("active"),a){case 1:w.this.MeasurementHeight();break;case 2:w.this.measureLineSpace();break;case 3:w.this.measureAreaSpace();break;case 4:w.this.RainwaterSystem();break;case 5:w.this.snowSystem();break;case 6:w.this.Fogging();break;case 7:w.this.enableLighting();break;default:return null}}}}))(w)}).call(this,a(18))},353:function(e,t,a){"use strict";(function(e){var n=a(9),l=a(10),o=a(2),i=a(12),r=a(11),s=a(0),c=a.n(s),d=(a(44),a(38)),u=a(16),m=a(5),h=a.n(m),f=a(3),g=a(1),p=a.n(g),v=function(t){Object(i.a)(d,t);var a=Object(r.a)(d);function d(e){var t;return Object(n.a)(this,d),(t=a.call(this,e)).OnClickDisplay=function(e,a){p()("#more"+a).find("span").toggleClass("active"),p()("#more"+a).find("img").toggleClass("active");for(var n=t.state.dataList,l=0;l<n.length;l++)n[l].item.id===a&&(n[l].item.state?(console.log("0"),f.a.ClearCustomView(a),n[l].item.state=!1):(n[l].item.state=!0,console.log("1"),f.a.CustomView(a)))},t.state={activeBtn:!1,dataList:null,imgclick:null},t.changeStatus=t.changeStatus.bind(Object(o.a)(t)),t.OnClickDisplay=t.OnClickDisplay.bind(Object(o.a)(t)),t}return Object(l.a)(d,[{key:"changeStatus",value:function(){this.setState({activeBtn:!this.state.activeBtn})}},{key:"componentWillMount",value:function(){var t=this;h.a.get(e.Url+"map/group/list").then((function(a){var n=a.data.data;if(n){var l=[];n.forEach((function(e){var t={item:e,state:!0};l.push(t)})),t.setState({dataList:l})}else p()(".PageShow").show().find("h1").html(a.data.msg),e.Time()}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.index,n=t.clickIcon,l=this.state,o=l.activeBtn,i=l.dataList;return c.a.createElement(s.Fragment,null,c.a.createElement("li",{onClick:function(){n(4),e.changeStatus()},className:o&&4===a?"active":""},c.a.createElement("i",{className:"icon4"}),c.a.createElement("span",null,"\u81ea\u5b9a\u4e49")),4===a&&o?c.a.createElement("div",{className:"addMore"},c.a.createElement("div",{className:"MoreShow MoreCur"},i.length>0&&i.map((function(t,a){return c.a.createElement("div",{key:a,onClick:function(n){return e.OnClickDisplay(n,t.item.id,a)},className:"MoreItem",id:"more"+t.item.id},c.a.createElement("img",{alt:"",src:t.item.group_icon}),c.a.createElement("span",null,t.item.group_name))})))):" ")}}]),d}(s.PureComponent);t.a=Object(u.b)((function(e){return{index:e.footer.get("index"),moreIndex:e.footer.get("moreIndex")}}),(function(e){return{clickIcon:function(t){p()("#liu").css({display:"none"}),e(d.a.click_Icon(t))},clickIconItem:function(t,a){t.stopPropagation(),e(d.a.click_Icon_Item(a))}}}))(v)}).call(this,a(18))},354:function(e,t,a){"use strict";(function(e){var n=a(9),l=a(10),o=a(2),i=a(12),r=a(11),s=a(0),c=a.n(s),d=(a(219),a(355)),u=a.n(d),m=a(1),h=a.n(m),f=a(5),g=a.n(f),p=a(52),v=a.n(p),y=a(3),b=function(t){Object(i.a)(d,t);var a=Object(r.a)(d);function d(t){var l;return Object(n.a)(this,d),(l=a.call(this,t)).state={info:e.AlarmNumber,device:{},detailsList:{},TatolNum:0,listData:{},WebList:[],webCode:"",webTime:""},d.this=Object(o.a)(l),l.onAlarm=l.onAlarm.bind(Object(o.a)(l)),l.Total=l.Total.bind(Object(o.a)(l)),l.onReturn=l.onReturn.bind(Object(o.a)(l)),l.onTable=l.onTable.bind(Object(o.a)(l)),l}return Object(l.a)(d,[{key:"onDevice",value:function(){this.onObject(),setTimeout((function(){}),1e3)}},{key:"onObject",value:function(){var t=this,a=[],n=[];g.a.post(e.Url+"device/category/list",{enable:!0}).then((function(l){var o=l.data.data;o&&"success"===l.data.msg?(a=o,g.a.get(e.Url+"event/info/countTodayForCategory").then((function(l){var o=l.data.data;if(o&&"success"===l.data.msg){n=o,h.a.extend(!0,a,n),t.setState({device:a});for(var i=0,r=0;r<o.length;r++)i+=parseInt(o[r].count);t.setState({TatolNum:i})}else h()(".PageShow").show().find("h1").html(l.data.msg),e.Time()}))):(h()(".PageShow").show().find("h1").html(l.data.msg),e.Time())}))}},{key:"webfunction",value:function(t){var a=d.this.state.WebList;if("subscribe success"!==t.data){var n=a.length,l=JSON.parse(t.data).event_info.device_code,o=JSON.parse(t.data).event_info.start_time,i=d.this.state.webCode,r=d.this.state.webTime;switch(n){case 0:console.log(1,a),e.AlarmNumber++,d.this.state.TatolNum++,d.this.state.listData=t.data,h()("#Num"+JSON.parse(t.data).event_info.device_category).html(parseInt(h()("#Num"+JSON.parse(t.data).event_info.device_category).html())+1),h()("#NumList"+JSON.parse(t.data).event_info.device_category).html(parseInt(h()("#NumList"+JSON.parse(t.data).event_info.device_category).html())+1).show(),h()("#NumOne"+JSON.parse(t.data).event_info.device_category).html(parseInt(h()("#NumOne"+JSON.parse(t.data).event_info.device_category).html())+1),h()("#NumOneList"+JSON.parse(t.data).event_info.device_category).html(parseInt(h()("#NumOneList"+JSON.parse(t.data).event_info.device_category).html())+1).show(),h()("#NumList"+t.data.category_id).css({display:"block"}),h()("#NumOneList"+t.data.category_id).css({display:"block"}),h()(".OneAlarm").find("span").css({display:"block"}),a.push(JSON.parse(t.data)),y.a.AlarmBox(JSON.parse(t.data));var s={id:JSON.parse(t.data).device_info.id};y.a.CoordinateModelID(s),y.a.returnData(JSON.parse(t.data).device_info),console.log(a),d.this.setState({webCode:l,webTime:o});break;default:if(i===l&&r===o)break;e.AlarmNumber++,d.this.state.TatolNum++,d.this.state.listData=t.data,console.log(a,"WebListWebListWebListWebListWebListWebListWebList"),h()("#Num"+JSON.parse(t.data).event_info.device_category).html(parseInt(h()("#Num"+JSON.parse(t.data).event_info.device_category).html())+1),h()("#NumList"+JSON.parse(t.data).event_info.device_category).html(parseInt(h()("#NumList"+JSON.parse(t.data).event_info.device_category).html())+1).show(),h()("#NumOne"+JSON.parse(t.data).event_info.device_category).html(parseInt(h()("#NumOne"+JSON.parse(t.data).event_info.device_category).html())+1),h()("#NumOneList"+JSON.parse(t.data).event_info.device_category).html(parseInt(h()("#NumOneList"+JSON.parse(t.data).event_info.device_category).html())+1).show(),h()("#NumList"+t.data.category_id).css({display:"block"}),h()("#NumOneList"+t.data.category_id).css({display:"block"}),h()(".OneAlarm").find("span").css({display:"block"}),a.push(JSON.parse(t.data));var c={id:JSON.parse(t.data).device_info.id};y.a.CoordinateModelID(c),console.log(c,"\u51b2\u51b2\u51b2"),y.a.returnData(JSON.parse(t.data).device_info),y.a.AlarmBox(JSON.parse(t.data)),console.log(2,a),d.this.setState({webCode:l,webTime:o})}h()("#UnmCount").html(e.AlarmNumber),console.log(d.this.state.info,e.AlarmNumber)}}},{key:"componentDidMount",value:function(){var t=this.state.WebList;console.log(this.props.router);var a=e.WebSocketUrl,n=new WebSocket(a);n.onopen=function(e){console.log("webSocket is open"),n.send("subscribe")},null===n.onmessage&&(n.onmessage=this.webfunction),window.receiveMessageFromIndex=function(a){if(void 0!==a)switch(a.data.switchName){case"removeBubbleBombbox":console.log(a.data),e.AlarmNumber=e.AlarmNumber-1,console.log(h()("#NumList"+a.data.category_id).html()),0===parseInt(h()("#NumList"+a.data.category_id).html())||parseInt(h()("#NumList"+a.data.category_id).html())<0?(h()("#NumList"+a.data.category_id).css({display:"none"}),h()("#NumOneList"+a.data.category_id).css({display:"none"}),h()(".OneAlarm").find("span").css({display:"none"})):(h()(".OneAlarm").find("span").css({display:"block"}),h()("#NumList"+a.data.category_id).html(parseInt(h()("#NumList"+a.data.category_id).html())-1),h()("#NumOneList"+a.data.category_id).html(parseInt(h()("#NumOneList"+a.data.category_id).html())-1),("0"===h()("#NumList"+a.data.category_id).html()||h()("#NumList"+a.data.category_id).html()<"0")&&(h()("#NumList"+a.data.category_id).css({display:"none"}),h()("#NumOneList"+a.data.category_id).css({display:"none"}),h()(".OneAlarm").find("span").css({display:"none"})));for(var n=0;n<t.length;n++)"\u91cd\u70b9\u4eba\u5458\u8bc6\u522b"===t[n].event_info.event_type_name?a.data.id===t[n].face.faceName&&(console.log(a.data.id,"oo+"+t[n].event_info.id),t.splice(n,1)):a.data.id===t[n].event_info.id&&(console.log(a.data.id,"oo+"+t[n].event_info.id),t.splice(n,1));d.this.setState({info:e.AlarmNumber});break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1),this.onDevice()}},{key:"onAlarm",value:function(){h()(".One").toggle(),h()(".alrmSelf").toggle()}},{key:"Total",value:function(){h()(".One .AlarmContent").hide(),h()(".One .AlarmTotal").show()}},{key:"onReturn",value:function(e){1===e?(h()(".AlarmContent").show(),h()(".AlarmTotal").hide()):2===e&&(h()(".AlarmContent,.AlarmTotal").show(),h()(".AlarmList").hide(),h()(".One h1 span").html("\u4eca\u65e5\u62a5\u8b66\u7edf\u8ba1"))}},{key:"onTable",value:function(t){var a=this;h()(".One .AlarmContent,.One .AlarmTotal").hide(),h()(".One .AlarmList").show(),h()(".One h1 span").html("\u89c6\u9891\u62a5\u8b66");var n=v()().format("YYYY-MM-DD");n+=" 00:00:00",g.a.post(e.Url+"event/info/list",{device_category:t,start_time:n}).then((function(t){var n=t.data.data;n&&"success"===t.data.msg?a.setState({detailsList:n}):(h()(".PageShow").show().find("h1").html(t.data.msg),e.Time())})).catch((function(){}))}},{key:"GMTToStr",value:function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+"\xa0"+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}},{key:"render",value:function(){var e=this,t=this.state,a=t.device,n=t.detailsList,l=t.TatolNum,o=t.info;return c.a.createElement(s.Fragment,null,c.a.createElement("div",{className:"AlarmButton OneAlarm alrmSelf",onClick:function(){return e.onAlarm()}},"\u4eca\u65e5\u62a5\u8b66 ",c.a.createElement("span",{id:"UnmCount"},o)),c.a.createElement("div",{className:"AlarmShow One",style:{display:"none"}},c.a.createElement("h1",null,c.a.createElement("span",null,"\u4eca\u65e5\u62a5\u8b66\u7edf\u8ba1")),c.a.createElement("div",{className:"AlarmContent"},c.a.createElement("div",{className:"Total"},c.a.createElement("h2",null,"\u603b\u62a5\u8b66"),c.a.createElement("span",null,l,c.a.createElement("em",null,"\u6b21"))),c.a.createElement("ul",null,a.length>0&&a.map((function(t,a){return a>2?null:c.a.createElement("li",{key:a,onClick:function(){return e.onTable(t.id)}},c.a.createElement("img",{src:t.category_icon,alt:""}),c.a.createElement("span",null,t.category_name,c.a.createElement("br",null),c.a.createElement("h3",{id:"Num"+t.category_id},t.count),c.a.createElement("em",{style:{display:"none"},id:"NumList"+t.category_id},0)))})),c.a.createElement("li",{onClick:function(){return e.Total()}},c.a.createElement("img",{src:u.a,alt:""}),c.a.createElement("span",null,"\u5176\u4ed6\u62a5\u8b66")))),c.a.createElement("div",{className:"AlarmTotal"},c.a.createElement("ul",null,a.length>0&&a.map((function(t,a){return c.a.createElement("li",{id:t.id,key:a,onClick:function(){return e.onTable(t.id)}},c.a.createElement("img",{src:t.category_icon,alt:""}),c.a.createElement("span",null,t.category_name,c.a.createElement("br",null),c.a.createElement("h3",{id:"NumOne"+t.category_id},t.count),c.a.createElement("em",{style:{display:"none"},id:"NumOneList"+t.category_id},0)))}))),c.a.createElement("i",{onClick:function(){return e.onReturn(1)}})),c.a.createElement("div",{className:"AlarmList"},c.a.createElement("div",{className:"AlarmListTable"},c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"\u7c7b\u578b"),c.a.createElement("th",null,"\u540d\u79f0"),c.a.createElement("th",null,"\u65f6\u95f4"),c.a.createElement("th",null,"\u5904\u7406"))),c.a.createElement("tbody",null,n.length>0&&n.map((function(e,t){return c.a.createElement("tr",{key:t},c.a.createElement("td",{title:e.event_type_name},e.event_type_name),c.a.createElement("td",{title:e.device_name},e.device_name),c.a.createElement("td",{title:e.start_time},e.start_time),c.a.createElement("td",null,e.handle?c.a.createElement("span",{className:"green"},"\u5df2\u5904\u7406"):c.a.createElement("span",{className:"red"},"\u5f85\u5904\u7406")))}))))),c.a.createElement("i",{onClick:function(){return e.onReturn(2)}})),c.a.createElement("div",{className:"But",onClick:function(){return e.onAlarm()}})))}}]),d}(s.Component);t.a=b}).call(this,a(18))},355:function(e,t,a){e.exports=a.p+"static/media/moreIcon.a391e678.png"},356:function(e,t,a){"use strict";(function(e){var n=a(9),l=a(10),o=a(12),i=a(11),r=a(0),s=a.n(r),c=(a(44),a(357)),d=a(150),u=a(95),m=a.n(u),h=a(27),f=a(152),g=a(21),p=a(16),v=function(t){Object(o.a)(u,t);var a=Object(i.a)(u);function u(){return Object(n.a)(this,u),a.apply(this,arguments)}return Object(l.a)(u,[{key:"componentDidMount",value:function(){this.props.navClick(0),console.log(this.props.list)}},{key:"render",value:function(){var t=sessionStorage.getItem("user"),a=sessionStorage.getItem("typeId");return null!==t&&"1"===a?s.a.createElement(m.a,{title:"\u56fe\u4e3a\u89c6\u667a\u6167\u5b89\u9632\u4e09\u7ef4\u5e73\u53f0-\u540e\u53f0\u7ba1\u7406"},s.a.createElement(r.Fragment,null,s.a.createElement("div",{className:"header"},s.a.createElement(c.a,null)),s.a.createElement("div",{className:"IndexHome"},s.a.createElement("div",{className:"left"}),s.a.createElement("div",{className:"right"}),s.a.createElement("div",{className:"conent"},s.a.createElement(d.a,null))),s.a.createElement(f.a,null),s.a.createElement("div",{className:"PageShow"},s.a.createElement("div",{className:"PageShowCont"},s.a.createElement("h1",null,"\u4fdd\u5b58\u6210\u529f\uff01"))),s.a.createElement("div",{className:"PageShow1 PageShowOne"},s.a.createElement("div",{className:"PageShowCont"},s.a.createElement("h1",null,"111"),s.a.createElement("h2",null,s.a.createElement("button",{onClick:function(){return e.Server()}},"\u4e0b\u8f7d"),s.a.createElement("button",{onClick:function(){return e.PageHide()}},"\u5173\u95ed")))))):s.a.createElement(h.a,{to:"/login"})}}]),u}(r.Component);t.a=Object(p.b)((function(e){return{list:e.admin.get("list")}}),(function(e){return{navClick:function(){e(g.a.nav_click(30))}}}))(v)}).call(this,a(18))},357:function(e,t,a){"use strict";(function(e){var n=a(9),l=a(10),o=a(12),i=a(11),r=a(0),s=a.n(r),c=(a(44),a(358)),d=a(359),u=a(360),m=a(5),h=a.n(m),f=a(370),g=a(375),p=a(379),v=a(381),y=a(68),b=a(1),E=a.n(b),w=function(t){Object(o.a)(m,t);var a=Object(i.a)(m);function m(e){var t;return Object(n.a)(this,m),(t=a.call(this,e)).state={success:!1,adminTitle:"",adminUser:sessionStorage.getItem("userName")},t}return Object(l.a)(m,[{key:"componentDidMount",value:function(){this.HQstate(),this.HQConfig()}},{key:"HQstate",value:function(){h.a.get(e.Url+"sys/config/isConfig").then((function(t){var a=t.data.data;a?console.log(a):(E()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"HQConfig",value:function(){var t=this;h.a.get(e.Url+"sys/config").then((function(a){var n=a.data.data;n?(console.log(n),sessionStorage.setItem("adminTitle",n.sys_name),t.setState({adminTitle:n.sys_name,success:!0}),sessionStorage.setItem("Serverurl",n.data_server_uri),sessionStorage.setItem("data_type",n.data_type)):(E()(".PageShow").show().find("h1").html(a.data.msg),e.Time())}))}},{key:"render",value:function(){var e=this.state,t=e.adminUser,a=e.adminTitle,n=e.success;return s.a.createElement(r.Fragment,null,s.a.createElement("div",{className:"HeaderLeft"},n?a:"",s.a.createElement("i",null)),s.a.createElement("div",{className:"HeaderContent"},s.a.createElement(c.a,null),s.a.createElement(d.a,null),s.a.createElement(u.a,null),s.a.createElement(f.a,null),s.a.createElement(g.a,null),s.a.createElement(p.a,null),s.a.createElement(v.a,null)),s.a.createElement("div",{className:"HeaderRight"},s.a.createElement("em",null),s.a.createElement("span",{className:"HeaderTime"}),s.a.createElement(y.b,{to:"/"},s.a.createElement("span",{className:"HeaderBank",title:"\u524d\u53f0\u7ba1\u7406"})),s.a.createElement("span",{className:"HeaderUser"},"\u5f53\u524d\u7528\u6237",s.a.createElement("i",null,t))))}}]),m}(r.Component);t.a=w}).call(this,a(18))},358:function(e,t,a){"use strict";(function(e){var n=a(9),l=a(10),o=a(2),i=a(12),r=a(11),s=a(0),c=a.n(s),d=(a(311),a(5)),u=a.n(d),m=a(16),h=a(21),f=a(1),g=a.n(f),p=a(52),v=a.n(p),y=a(3),b=function(t){Object(i.a)(d,t);var a=Object(r.a)(d);function d(t){var l;return Object(n.a)(this,d),(l=a.call(this,t)).addressChange=function(e){l.setState({mapAddress:e.target.value})},l.handleChange=function(e){l.setState({mapName:e.target.value})},l.handleIsStand=function(e){l.setState((function(e){return{isStand:!e.isStand}}))},l.handleIsLogin=function(e){l.setState((function(e){return{isLogin:!e.isLogin}}))},l.configSave=function(t,a,n,o){l.setState({alarmTest:!1}),console.log(t,a,n,o,e.Database),u.a.post(e.Url+"sys/config/updatePro",{data_server_uri:t,data_type:a,is_stand:n,is_login:o}).then((function(t){var a=t.data.data;if(console.log(a),a){sessionStorage.setItem("Serverurl",a.data_server_uri),sessionStorage.setItem("data_type",a.data_type);document.getElementById("core_content").contentWindow.postMessage({Event:"RefreshPage()",ModName:"",parameter:{}},"*"),g()(".PageShow").show(),e.Time()}else g()(".PageShow").show().find("h1").html(t.data.msg),e.Time()})).catch((function(e){console.log(e)})),l.props.navClick(100)},l.state={isToggleOn:!1,mapAddress:"",mapName:"normal",isStand:!1,isLogin:!1,alarmTest:!1,device:{},deviceId:"",alarmDevice:{},alarmDeviceId:"",deviceList:{}},d.this=Object(o.a)(l),l.onConfig=l.onConfig.bind(Object(o.a)(l)),l.addressChange=l.addressChange.bind(Object(o.a)(l)),l.handleChange=l.handleChange.bind(Object(o.a)(l)),l.handleIsStand=l.handleIsStand.bind(Object(o.a)(l)),l.handleIsLogin=l.handleIsLogin.bind(Object(o.a)(l)),l.configSave=l.configSave.bind(Object(o.a)(l)),l.AlarmTest=l.AlarmTest.bind(Object(o.a)(l)),l.Test=l.Test.bind(Object(o.a)(l)),l}return Object(l.a)(d,[{key:"componentDidMount",value:function(){this.onConfig()}},{key:"onConfig",value:function(){var t=this,a=this;u.a.get(e.Url+"sys/config").then((function(n){var l=n.data.data;l?(console.log(l),sessionStorage.setItem("adminTitle",l.sys_name),a.state={homeTitle:l.sys_name},sessionStorage.setItem("Serverurl",l.data_server_uri),sessionStorage.setItem("data_type",l.data_type),t.setState({mapAddress:l.data_server_uri,mapName:l.data_type,isStand:l.is_stand,isLogin:l.is_login})):(g()(".PageShow").show().find("h1").html(n.data.msg),e.Time())})),this.setState((function(e){return{isToggleOn:!e.isToggleOn,Display:e.isToggleOn?"none":"block"}}))}},{key:"AlarmTest",value:function(){var t=this;g()(".Basic").css({display:"block"}),u.a.post(e.Url+"device/category/list",{enable:!0}).then((function(a){var n=a.data.data;n?(console.log(n),t.setState({device:n,alarmTest:!0,deviceId:n[0].id})):(g()(".PageShow").show().find("h1").html(a.data.msg),e.Time())}))}},{key:"deviceChange",value:function(t){var a=this;t.preventDefault(),this.setState({deviceId:t.target.value}),u.a.post(e.Url+"event/type/list",{enable:!0,category_id:t.target.value}).then((function(t){var n=t.data.data;n?(console.log(n),a.setState({alarmDevice:n}),n.length>0?a.setState({alarmDeviceId:n[0].id}):a.setState({alarmDeviceId:""})):(g()(".PageShow").show().find("h1").html(t.data.msg),e.Time())})),u.a.post(e.Url+"device/info/list",{on_map:!0,category_id:t.target.value}).then((function(t){var n=t.data.data;n?(console.log(n),a.setState({deviceList:n})):(g()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"alarmDeviceChange",value:function(e){e.preventDefault(),this.setState({alarmDeviceId:e.target.value})}},{key:"Test",value:function(t,a){function n(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function l(){return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()}console.log(t,a);var o,i=this.state.alarmDeviceId,r=v()().format("YYYY-MM-DD HH:mm:ss");o="C1F7A2BD34C8A84704D80C4DF6E72D93"===i?{event_id:l(),event_type:i,status:0,start_time:r,stop_time:r,event_name:a+"_"+g()("#Two").find("option:selected").text(),device_code:t,device_name:a,ext_info:{method:"OnEventNotify",params:{ability:"",events:[{eventDetails:[{ability:"event_frs",data:{faceRecognitionResult:{faceMatch:[{certificate:"1516",certificateType:"111",faceGroupCode:"9cb324d352ec4472a401febd184c2965",faceGroupName:"\u76d7\u7a83\u5acc\u7591\u4eba",faceInfoCode:"11d636217f964ccb90cfb181ab2955dd",faceInfoName:"\u95e8\u8bca\u76d7\u7a83\u624b\u673a2",faceInfoSex:"male",facePicUrl:"https://192.168.100.237:6113/pic?=d14i0d80i5e5=o89-ap3e1bs1i7995*0870859=21i5m*ep=t3p6i=d1s*i6d3d*=*1b5i7b56d40ec7zdb--=2de60*l10fod3-94453fd9&AccessKeyId=V+TncZ3Vn2kPp7gP&Expires=1594437920&Signature=hfcxI67asA/NIDlVHlOLVFmLWno=",similarity:.82}],snap:{ageGroup:"middle",bkgUrl:"http://192.168.100.237:6120/pic?=d47i0d01i5e5=o29-ap9=1bi8z69*9s4578414135m9ep=t1i7d*=*1pdi=*1s1i5i3d5=*4b5c7bd6d-0ed7e5b-147oe6-*l80ffd08944d3&AccessKeyId=V TncZ3Vn2kPp7gP&Expires=1594436819&Signature=PVZ5w9uYSIASuMlGWL hUHZUHXc=",faceTime:"2020-07-11T10:50:20+08:00",faceUrl:"http://192.168.100.237:6120/pic?=d47i0d01i5e5=o09-ap9z1b*=s497831493559e4=t1i6m*=p1p1i=d1s*i5d3d*=*1b5i7b56d40ec7idb--e2de66*l10fod0-94834fd8&AccessKeyId=V+TncZ3Vn2kPp7gP&Expires=1594436819&Signature=usYAq0Http4i7V5SqP/vcvMSr4Y=",gender:"male",glass:"no"}},resInfo:[{cn:"\u4e8c\u53f7\u5c97\u51fa\u5165\u53e3\uff08\u5165\uff09-\u4eba\u8138\u8bc6\u522b",indexCode:"3e5dccf2bf524f4b8ebc1082c4fff94f",resourceType:"camera"}],srcEventId:"3632AC6C-76E7-EA46-9BC5-1E8F91C24938"},eventOriginalId:"3f823098-7a34-4e41-9a89-bdfa2f6d4b15",eventType:1644175361,locationIndexCode:"",locationName:"",regionIndexCode:"b90e81ae-d754-4a1c-905f-c790f43e02c6",regionName:"\u4e2d\u56fd\u798f\u5229\u4f1a\u56fd\u9645\u548c\u5e73\u5987\u5e7c\u4fdd\u5065\u9662/\u672c\u9662/\u4eba\u8138\u8bc6\u522b",srcIndex:"9cb324d352ec4472a401febd184c2965",srcName:"\u76d7\u7a83\u5acc\u7591\u4eba",srcType:"facegroup"}],eventId:"C8534A4967BD48A7BFF5449D69353EAE",eventLvl:3,eventName:"\u76d7\u7a83\u5acc\u7591\u4eba",eventOldId:"3f823098-7a34-4e41-9a89-bdfa2f6d4b15",eventType:0,happenTime:"2020-07-11T10:49:26+08:00",linkageAcion:[{content:'[{"cameraIndexCode":"3e5dccf2bf524f4b8ebc1082c4fff94f","cameraName":"\u4e8c\u53f7\u5c97\u51fa\u5165\u53e3\uff08\u5165\uff09-\u4eba\u8138\u8bc6\u522b","cameraType":"0","cascadeCode":"","decodeTag":"hikvision","treatyType":"1"}]\n',linkageType:"popUpLiveViewOnClient"},{content:'[{"cameraIndexCode":"3e5dccf2bf524f4b8ebc1082c4fff94f","cameraName":"\u4e8c\u53f7\u5c97\u51fa\u5165\u53e3\uff08\u5165\uff09-\u4eba\u8138\u8bc6\u522b","cameraType":"0","cascadeCode":"","decodeTag":"hikvision","treatyType":"1"}]\n',linkageType:"popUpPlayBackOnClient"},{content:'{"bPopupEventPicture":true}\n',linkageType:"popUpPictureOnClient"},{content:'{"soundText":"\u4e2d\u56fd\u798f\u5229\u4f1a\u56fd\u9645\u548c\u5e73\u5987\u5e7c\u4fdd\u5065\u9662/\u672c\u9662/\u4eba\u8138\u8bc6\u522b\uff0c\u53d1\u73b0\u76d7\u7a83\u5acc\u7591\u4eba"}\n',linkageType:"alertByEventInfo"}],linkageRecord:"true",linkageResult:[{content:'[{"cameraIndexCode":"3e5dccf2bf524f4b8ebc1082c4fff94f","cameraName":"\u4e8c\u53f7\u5c97\u51fa\u5165\u53e3\uff08\u5165\uff09-\u4eba\u8138\u8bc6\u522b","cameraType":"0","cascadeCode":"","decodeTag":"hikvision","recordType":0,"streamType":0,"treatyType":"1"}]\n',linkageType:"recordEventVideo"}],remark:"",ruleDescription:"",srcIndex:"aa051118546c4b928ef585f5c1ddb95f",srcName:"\u76d7\u7a83\u5acc\u7591\u4eba",srcType:"eventRule",status:4,stopTime:"2020-07-11T10:49:26+08:00",timeout:0}],sendTime:"2020-07-11T10:50:20.785+08:00"}},linkage_info:'[{"cameraIndexCode":"3e5dccf2bf524f4b8ebc1082c4fff94f","cameraName":"\u4e8c\u53f7\u5c97\u51fa\u5165\u53e3\uff08\u5165\uff09-\u4eba\u8138\u8bc6\u522b","cameraType":"0","cascadeCode":"","decodeTag":"hikvision","treatyType":"1"}]\n'}:{event_id:l(),event_type:i,status:0,start_time:r,stop_time:r,event_name:a+"_"+g()("#Two").find("option:selected").text(),device_code:t,device_name:a,ext_info:{method:"OnEventNotify",params:{ability:"event_face_recognition",events:[{eventId:"80e51ca2-931f-4e97-ac9c-d66e751114d8",eventType:1644175361,happenTime:"2019-08-14T20:55:09.000+08:00",srcIndex:"8fb82557b587479e8013ab9279319dd6",srcName:"123",srcType:"facegroup",status:0,timeout:0,eventDetails:[{ability:"event_ias",data:{extendKey:"simulate",lanId:"zh_CN"},eventOriginalId:"GSZ7ALAYNOIH1F2I0UEEEEOXGK3NJ5XU",eventType:327681,locationIndexCode:"",locationName:"",regionIndexCode:"724da3de-2819-41b7-9630-48df9852fb06",regionName:"\u4e2d\u56fd\u798f\u5229\u4f1a\u56fd\u9645\u548c\u5e73\u5987\u5e7c\u4fdd\u5065\u9662/\u672c\u9662/\u4e00\u53f7\u697c\uff08\u7efc\u5408\u697c\uff09",srcIndex:"cce79ff77a7249b8b1b73ea8ad7d7f98",srcName:"\u5730\u4e0b2\u5c42\u6863\u6848\u5ba4\u7d27\u6025\u62a5\u8b66",srcType:"defence"}]}],sendTime:"2019-08-14T20:55:16.000+08:00"}}},console.log(i),console.log(o),u.a.post(e.Url+"event/info/accept",o).then((function(t){var a=t.data.data;a?console.log(a):(g()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.mapAddress,n=t.mapName,l=t.isStand,o=t.isLogin,i=t.alarmTest,r=t.device,d=t.deviceId,u=t.alarmDevice,m=t.alarmDeviceId,h=t.deviceList,f=this.props,g=f.adminItem,p=f.navClick;return c.a.createElement(s.Fragment,null,c.a.createElement("li",{key:"1",className:1===g?"cur":"",onClick:function(){return p(1)}},"\u4e13\u4e1a\u914d\u7f6e"),1===g?c.a.createElement("div",null,c.a.createElement("div",{className:"configShow"},c.a.createElement("div",{className:"configShowNav"},"\u4e13\u4e1a\u914d\u7f6e ",c.a.createElement("i",{onClick:function(){return p(100)}})),c.a.createElement("div",{className:"configShowConent"},c.a.createElement("div",{className:"configShowConent_cont"},c.a.createElement("li",null,c.a.createElement("span",null,"\u5730\u56fe\u6570\u636e\u5730\u5740\uff1a"),c.a.createElement("input",{type:"text",value:a,onChange:function(t){return e.addressChange(t)}})),c.a.createElement("li",null,c.a.createElement("span",null,"\u9ed8\u8ba4\u5730\u56fe\uff1a"),c.a.createElement("input",{type:"radio",name:"",value:"normal",checked:"normal"===n,onChange:function(t){return e.handleChange(t)}}),c.a.createElement("label",null,"\u4e09\u7ef4\u6a21\u578b"),c.a.createElement("input",{type:"radio",name:"",value:"virtual",checked:"virtual"===n,onChange:function(t){return e.handleChange(t)}}),c.a.createElement("label",null,"\u865a\u62df\u5316"),c.a.createElement("div",{className:"dot"},"gender: ")),c.a.createElement("li",null,c.a.createElement("span",null,"\u72ec\u7acb\u8fd0\u884c\uff1a"),c.a.createElement("input",{type:"checkbox",checked:l,onChange:function(t){return e.handleIsStand(t)}})),c.a.createElement("li",null,c.a.createElement("span",null,"\u514d\u5bc6\u767b\u5f55\uff1a"),c.a.createElement("input",{type:"checkbox",checked:o,onChange:function(t){return e.handleIsLogin(t)}}))),c.a.createElement("div",{className:"configBut"},c.a.createElement("button",{onClick:function(){return e.configSave(a,n,l,o)}},"\u4fdd\u5b58"),c.a.createElement("button",null,"\u6a21\u578b\u68c0\u67e5"),c.a.createElement("button",{onClick:function(){return e.AlarmTest()}},"\u62a5\u8b66\u68c0\u6d4b")))),i?c.a.createElement("div",{className:"configShow Basic",style:{marginLeft:"520px"}},c.a.createElement("div",{className:"configShowNav"},"\u62a5\u8b66\u6d4b\u8bd5 ",c.a.createElement("i",{onClick:function(){return p(101)}})),c.a.createElement("div",{className:"configShowConent"},c.a.createElement("div",{className:"configShowConent_cont DevicePic"},c.a.createElement("li",null,c.a.createElement("span",null,"\u8bbe\u5907\u7c7b\u522b\uff1a"),c.a.createElement("select",{onChange:function(t){return e.deviceChange(t)},className:"AddSelect",id:"One",value:d},r.length>0&&r.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.category_name)})))),c.a.createElement("li",null,c.a.createElement("span",null,"\u62a5\u8b66\u7c7b\u578b\uff1a"),c.a.createElement("select",{onChange:function(t){return e.alarmDeviceChange(t)},className:"AddSelect",id:"Two",value:m},u.length>0&&u.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.event_name)})))),c.a.createElement("div",{className:"GridNavTable",style:{marginTop:"10px"}},c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"\u8bbe\u5907\u540d\u79f0"),c.a.createElement("th",null,"\u64cd\u4f5c"))),c.a.createElement("tbody",null,h.length>0&&h.map((function(t,a){return c.a.createElement("tr",{key:a},c.a.createElement("td",null,t.device_name),c.a.createElement("td",null,c.a.createElement("button",{onClick:function(){return e.Test(t.device_code,t.device_name)}},"\u6d4b\u8bd5\u62a5\u8b66")))})))))))):""):"")}}]),d}(s.PureComponent);t.a=Object(m.b)((function(e){return{adminItem:e.admin.get("adminItem")}}),(function(t){return{navClick:function(a){100===a?(t(h.a.nav_click(a)),b.this.setState({alarmTest:!1})):101===a?b.this.setState({alarmTest:!1}):(y.a.Close(),t(h.a.nav_click(a)),u.a.get(e.Url+"sys/config").then((function(t){var a=t.data.data;a?(console.log(a),sessionStorage.setItem("adminTitle",a.sys_name),sessionStorage.setItem("Serverurl",a.data_server_uri),sessionStorage.setItem("data_type",a.data_type),b.this.setState({mapAddress:a.data_server_uri,mapName:a.data_type,isStand:a.is_stand,isLogin:a.is_login})):(g()(".PageShow").show().find("h1").html(t.data.msg),e.Time())})))}}}))(b)}).call(this,a(18))},359:function(e,t,a){"use strict";(function(e){var n=a(9),l=a(10),o=a(2),i=a(12),r=a(11),s=a(0),c=a.n(s),d=(a(311),a(5)),u=a.n(d),m=a(3),h=a(16),f=a(21),g=a(1),p=a.n(g),v=function(t){Object(i.a)(d,t);var a=Object(r.a)(d);function d(t){var l;return Object(n.a)(this,d),(l=a.call(this,t)).syaName=function(e){l.setState({mapSysName:e.target.value})},l.configSave=function(t,a){u.a.post(e.Url+"sys/config/updateBase",{sys_name:t,center_location:JSON.parse(a)}).then((function(t){var a=t.data.data;a?(console.log(a),p()(".PageShow").show(),e.Time(),this.setState({mapSysName:a.sys_name,coordinate:a.center_location})):(p()(".PageShow").show().find("h1").html(t.data.msg),e.Time())})).catch((function(e){console.log(e)})),l.props.navClick(100)},l.state={isToggleOn:!1,mapSysName:"",modelId:"",tabNav:0,coordinate:[]},d.this=Object(o.a)(l),l.syaName=l.syaName.bind(Object(o.a)(l)),l.Tab=l.Tab.bind(Object(o.a)(l)),l.configSave=l.configSave.bind(Object(o.a)(l)),l}return Object(l.a)(d,[{key:"componentDidMount",value:function(){var e=this;window.receiveMessageFromIndex=function(t){if(void 0!==t)switch(t.data.switchName){case"getCameraView":sessionStorage.setItem("dataZB",this.JSON.stringify(t.data.cv,null,4)),sessionStorage.setItem("dataZB1",t.data.cv),console.log(sessionStorage.getItem("dataZB")),e.setState({coordinate:sessionStorage.getItem("dataZB")});break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1)}},{key:"Tab",value:function(e){switch(this.setState({tabNav:e}),e){case 0:m.a.onRetrospectiveCameraView(),this.setState({coordinate:sessionStorage.getItem("dataZB")});break;case 1:m.a.onCoordinate(),this.setState({coordinate:sessionStorage.getItem("dataZB")});break;default:return null}}},{key:"render",value:function(){var e=this,t=this.state,a=t.mapSysName,n=t.tabNav,l=t.coordinate,o=this.props,i=o.adminItem,r=o.navClick;return c.a.createElement(s.Fragment,null,c.a.createElement("li",{key:"2",className:2===i?"cur":"",onClick:function(){return r(2)}},"\u57fa\u7840\u914d\u7f6e"),2===i?c.a.createElement("div",{className:"configShow Basic"},c.a.createElement("div",{className:"configShowNav"},"\u57fa\u7840\u914d\u7f6e ",c.a.createElement("i",{onClick:function(){return r(100)}})),c.a.createElement("div",{className:"configShowConent"},c.a.createElement("div",{className:"configShowConent_cont"},c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("span",null,"\u7cfb\u7edf\u540d\u79f0\uff1a"),c.a.createElement("input",{type:"text",value:a,onChange:function(t){return e.syaName(t)}})),c.a.createElement("li",null,c.a.createElement("span",null,"\u521d\u59cb\u4f4d\u7f6e\uff1a"),c.a.createElement("div",{className:"newNav"},c.a.createElement("ul",null,c.a.createElement("li",{key:"nav1",className:0===n?"cur":"",onClick:function(){return e.Tab(0)}},"\u5750\u6807\u5b9a\u4f4d"),c.a.createElement("li",{key:"nav2",className:1===n?"cur":"",onClick:function(){return e.Tab(1)}},"\u5f53\u524d\u4f4d\u7f6e")),c.a.createElement("div",{className:"liCont"},l))))),c.a.createElement("div",{className:"configBut"},c.a.createElement("button",{onClick:function(){return e.configSave(a,l)}},"\u4fdd\u5b58")))):"")}}]),d}(s.PureComponent);t.a=Object(h.b)((function(e){return{adminItem:e.admin.get("adminItem")}}),(function(t){return{navClick:function(a){m.a.Close(),t(f.a.nav_click(a)),u.a.get(e.Url+"sys/config").then((function(t){var a=t.data.data;a?(console.log(a),sessionStorage.setItem("mapSysName",a.sys_name),sessionStorage.setItem("dataZB",JSON.stringify(a.center_location)),v.this.setState({mapSysName:sessionStorage.getItem("mapSysName"),coordinate:JSON.stringify(a.center_location)})):(p()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}}}))(v)}).call(this,a(18))},36:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return l}));var l={ListV:function(){setTimeout((function(){n=document.getElementById("core_content2")}),10)},preview:function(e,t){var a={Event:"",ModName:"preview",parameter:{code:e,type:t}};null!=n&&n.contentWindow.postMessage(a,"*")},setSize:function(e,t){var a={Event:"",ModName:"setSize",parameter:{width:e,height:t}};null!=n&&n.contentWindow.postMessage(a,"*")},initialization:function(e){var t={Event:"",ModName:"initialization",parameter:{chushiCode:e}};null!=n&&n.contentWindow.postMessage(t,"*")},deInitialization:function(){null!=n&&n.contentWindow.postMessage({Event:"",ModName:"deInitialization",parameter:{}},"*")},playback:function(e){var t={Event:"",ModName:"playback",parameter:{code:e}};null!=n&&n.contentWindow.postMessage(t,"*")},playbackls:function(e,t,a){var l={Event:"",ModName:"playback",parameter:{code:e,stime:t,etime:a}};null!=n&&n.contentWindow.postMessage(l,"*")},hideVideo:function(){null!=n&&n.contentWindow.postMessage({Event:"",ModName:"hideVideo",parameter:{}},"*")},showVideo:function(){null!=n&&n.contentWindow.postMessage({Event:"",ModName:"showVideo",parameter:{}},"*")}}},360:function(e,t,a){"use strict";(function(e){var n=a(9),l=a(10),o=a(2),i=a(12),r=a(11),s=a(0),c=a.n(s),d=a(16),u=a(21),m=a(361),h=a(366),f=a(367),g=a(368),p=a(369),v=a(3),y=function(t){Object(i.a)(d,t);var a=Object(r.a)(d);function d(e){var t;return Object(n.a)(this,d),(t=a.call(this,e)).state={nav:!0,navItem:0},t.navItemClick=t.navItemClick.bind(Object(o.a)(t)),d.this=Object(o.a)(t),t}return Object(l.a)(d,[{key:"navItemClick",value:function(t){if(this.setState({nav:!1,navItem:t}),5===t){var a=e.floooList;if(a.length>0&&-1===a[0].model_url.indexOf("DXS")){for(var n=new RegExp("/","g"),l=[],o=0;o<a.length;o++)null!=a[o].model_url&&l.push({modelId:a[o].model_url.replace(n,"_"),order_num:a[o].order_num});v.a.ShowSpecifiedModel(l)}v.a.BuildingShow({show:!1})}else v.a.BuildingShow({show:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.nav,n=t.navItem,l=this.props,o=l.adminItem,i=l.navClick,r=l.adminIndex;return c.a.createElement(s.Fragment,null,c.a.createElement("li",{key:"3",className:3===o?"cur":"",onClick:function(){return i(3,2)}},"\u6570\u636e\u914d\u7f6e"),3===o&&a?c.a.createElement("div",{className:"navItem",style:{left:"285px"}},c.a.createElement("li",{className:1===n?"cur":"",onClick:function(){return e.navItemClick(1)}},"\u5efa\u7b51\u5206\u5c42"),c.a.createElement("li",{className:2===n?"cur":"",onClick:function(){return e.navItemClick(2)}},"\u5730\u56fe\u6807\u6ce8"),c.a.createElement("li",{className:3===n?"cur":"",onClick:function(){return e.navItemClick(3)}},"\u81ea\u5b9a\u4e49\u56fe\u5c42"),c.a.createElement("li",{className:4===n?"cur":"",onClick:function(){return e.navItemClick(4)}},"\u7f51\u683c\u6a21\u5f0f"),c.a.createElement("li",{className:5===n?"cur":"",onClick:function(){return e.navItemClick(5)}},"\u5730\u4e0b\u6a21\u5f0f")):"",1===n&&2===r?c.a.createElement(m.a,null):"",2===n&&2===r?c.a.createElement(h.a,null):"",3===n&&2===r?c.a.createElement(f.a,null):"",4===n&&2===r?c.a.createElement(g.a,null):"",5===n&&2===r?c.a.createElement(p.a,null):"")}}]),d}(s.PureComponent);t.a=Object(d.b)((function(e){return{adminItem:e.admin.get("adminItem"),adminIndex:e.admin.get("adminIndex")}}),(function(e){return{navClick:function(t,a){e(u.a.nav_click(t,a)),v.a.Close(),3===t&&y.this.setState({nav:!0,navItem:0})}}}))(y)}).call(this,a(18))},361:function(e,t,a){"use strict";(function(e){var n=a(14),l=a(9),o=a(10),i=a(2),r=a(12),s=a(11),c=a(0),d=a.n(c),u=a(16),m=a(21),h=a(3),f=a(5),g=a.n(f),p=a(1),v=a.n(p),y=a(6),b=a.n(y),E=a(28),w=function(t){Object(r.a)(u,t);var a=Object(s.a)(u);function u(e){var t;return Object(l.a)(this,u),t=a.call(this,e),u.this=Object(i.a)(t),t.state={navItemShow:!1,Nav:!0,navItem:0,X:"",Y:"",Z:"",labelname:"",labelid:"",Floor:JSON.parse(sessionStorage.getItem("Floor")),CameraViewOne:"",CameraViewState:!1,ShowPublic:!1,OneHtml:!0,TwoHtml:!1,fontSize:1,fontColorPicker:!1,borderColorPicker:!1,fontColor:"#fff300",borderColor:"#ff0000",borderWitch:1},t.CameraView=t.CameraView.bind(Object(i.a)(t)),t.AssignedLabelID=t.AssignedLabelID.bind(Object(i.a)(t)),t.NavClickOne=t.NavClickOne.bind(Object(i.a)(t)),t.SaveNav=t.SaveNav.bind(Object(i.a)(t)),t}return Object(o.a)(u,[{key:"componentDidMount",value:function(){console.log(u.this.Floor),window.receiveMessageFromIndex=function(e){if(void 0!==e)switch(console.log("\u6211\u662freact,\u6211\u63a5\u53d7\u5230\u4e86\u6765\u81eaiframe\u7684\u6a21\u578bID\uff1a",e.data),e.data.switchName){case"GeoaddlabelV3":console.log(e.data),u.this.setState({X:e.data.parameter.label_position.x,Y:e.data.parameter.label_position.y,Z:e.data.parameter.label_position.z,borderColor:e.data.parameter.label_style.borderColor,borderWitch:e.data.parameter.label_style.borderWitch,fontColor:e.data.parameter.label_style.fontColor,fontSize:e.data.parameter.label_style.fontSize});break;case"GeoaddlabelV2":sessionStorage.setItem("labelData",this.JSON.stringify(e.data));var t=JSON.parse(sessionStorage.getItem("labelData")).style.position;u.this.setState({X:t.x,Y:t.y,Z:t.z});break;case"getCameraView":u.this.setState({CameraViewOne:this.JSON.stringify(e.data.cv)}),console.log("\u6570\u636e\u5df2\u5237\u65b0",u.this.state.CameraViewOne);break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1),this.initData()}},{key:"initData",value:function(){var e=u.this.state.Floor;if(console.log(e),null==e[0].FloorItems.center_position)u.this.setState({labelname:e[0].FloorItems.build_name,labelid:e[0].FloorItems.id});else{var t=JSON.stringify({x:e[0].FloorItems.center_position.x,y:e[0].FloorItems.center_position.y,z:e[0].FloorItems.center_position.z,h:e[0].FloorItems.center_position.heading,p:e[0].FloorItems.center_position.pitch,r:e[0].FloorItems.center_position.roll});console.log(t),u.this.setState({X:e[0].FloorItems.label_position.x,Y:e[0].FloorItems.label_position.y,Z:e[0].FloorItems.label_position.z,labelname:e[0].FloorItems.build_name,labelid:e[0].FloorItems.id,CameraViewOne:JSON.stringify({x:e[0].FloorItems.center_position.x,y:e[0].FloorItems.center_position.y,z:e[0].FloorItems.center_position.z,h:e[0].FloorItems.center_position.heading,p:e[0].FloorItems.center_position.pitch,r:e[0].FloorItems.center_position.roll})})}}},{key:"GeoaddlabelV2",value:function(){console.log(this.state.labelid);var e=this.state,t=e.labelname,a=e.labelid,n=e.fontSize,l=e.fontColor,o=e.borderColor,i={id:a,label_name:t,label_style:{fontSize:n,fontColor:l,borderWitch:e.borderWitch,borderColor:o}};console.log(i),h.a.GeoaddlabelV3(i)}},{key:"AssignedLabelID",value:function(e,t){h.a.CancelTilesHighlight(),console.log(t,"i dont care");var a=t.FloorItems.center_position;null===a?(console.log(),console.log(t.FloorItems.id),u.this.setState({labelid:t.FloorItems.id,labelname:t.FloorItems.build_name,X:"",Y:"",Z:"",CameraViewOne:"",OneHtml:!0,TwoHtml:!1})):t.FloorItems.center_position?t.FloorItems.label_style?u.this.setState({labelid:t.FloorItems.id,labelname:t.FloorItems.build_name,X:t.FloorItems.label_position.x,Y:t.FloorItems.label_position.y,Z:t.FloorItems.label_position.z,CameraViewOne:JSON.stringify({x:a.x,y:a.y,z:a.z,h:a.heading,p:a.pitch,r:a.roll}),OneHtml:!0,TwoHtml:!1,fontSize:t.FloorItems.label_style.fontSize,borderWitch:t.FloorItems.label_style.borderWitch,fontColor:t.FloorItems.label_style.fontColor,borderColor:t.FloorItems.label_style.borderColor}):null===t.FloorItems.label_style&&u.this.setState({labelid:t.FloorItems.id,labelname:t.FloorItems.build_name,X:t.FloorItems.label_position.x,Y:t.FloorItems.label_position.y,Z:t.FloorItems.label_position.z,CameraViewOne:JSON.stringify({x:a.x,y:a.y,z:a.z,h:a.heading,p:a.pitch,r:a.roll}),OneHtml:!0,TwoHtml:!1,fontSize:2.5,borderWitch:5,fontColor:"#fff300",borderColor:"#ff0000"}):u.this.setState({labelname:t.FloorItems.build_name,fontSize:2.5,borderWitch:5,fontColor:"#fff300",borderColor:"#ff0000"}),e.stopPropagation();var n=v()(e.target).children();n.css("display","none"===n.css("display")?"block":"none"),v()(".DataConfigTreeDiv").find("ul").find("li").css({color:"#fff"}),v()(".Data1"+t.FloorItems.id).css({color:"#50a4f4"});var l=0,o=new RegExp("/","g");if(t.Floorlists.length>0){for(var i=0;i<t.Floorlists.length;i++)l<t.Floorlists[i].order_num&&(l=t.Floorlists[i].order_num);for(var r=0;r<t.Floorlists.length;r++)if(t.Floorlists[r].order_num===l){var s={show:!0,id:t.Floorlists[r].model_url.replace(o,"_")};h.a.TilesHighlight(s);break}}}},{key:"RefreshLabel",value:function(){var e=this;setTimeout((function(){h.a.ModifyLabel({id:e.state.labelid,labeltxt:e.state.labelname,x:Number(e.state.X),y:Number(e.state.Y),z:Number(e.state.Z),label_style:{fontSize:e.state.fontSize,fontColor:e.state.fontColor,borderWitch:e.state.borderWitch,borderColor:e.state.borderColor}})}),0)}},{key:"ChangeStyle",value:function(){setTimeout((function(){var e=u.this.state,t={id:e.labelid,labeltxt:e.labelname,label_style:{fontSize:e.fontSize,fontColor:e.fontColor,borderWitch:e.borderWitch,borderColor:e.borderColor}};h.a.GeoaddlabelV3(t)}),10)}},{key:"Push",value:function(){var t=[];g.a.get(e.Url+"map/build/list",{}).then((function(a){var n=a.data.data;if(n)for(var l=function(a){g.a.post(e.Url+"map/floor/list",{build_id:n[a].id}).then((function(l){var o=l.data.data;if(o){if(t.push({FloorItems:n[a],Floorlists:o}),a===n.length-1){var i=JSON.stringify(t);console.log(i),sessionStorage.setItem("Floor",i),console.log(t),u.this.setState({Floor:t})}}else v()(".PageShow").show().find("h1").html(l.data.msg),e.Time()}))},o=0;o<n.length;o++)l(o);else v()(".PageShow").show().find("h1").html(a.data.msg),e.Time()}))}},{key:"SubmitBuildingInformation",value:function(){var t=this;if(console.log(this.state.CameraViewOne),this.state.CameraViewOne)if(""===this.state.X||""===this.state.labelid)v()(".PageShow").show().find("h1").html("\u8bf7\u5148\u8bbe\u7f6e\u6807\u6ce8\u4f4d\u7f6e\uff01"),e.Time();else{var a=JSON.parse(this.state.CameraViewOne),n=this.state,l=n.labelid,o=n.labelname,i=n.fontSize,r=n.fontColor,s=n.borderColor,c=n.borderWitch,d={id:l,build_name:o,center_position:{y:a.y,x:a.x,z:a.z,heading:a.h,pitch:a.p,roll:a.r},label_position:{x:Number(this.state.X),y:Number(this.state.Y),z:Number(this.state.Z),heading:0,itch:0,roll:0},label_style:{borderColor:s,borderWitch:c,fontColor:r,fontSize:i},remark:1};console.log(d),g.a.post(e.Url+"map/build/update",d).then((function(a){a.data.data?(v()(".PageShow").show().find("h1").html("\u4fdd\u5b58\u6210\u529f"),e.Time(),t.Push()):(v()(".PageShow").show().find("h1").html(a.data.msg),e.Time())}))}else v()(".PageShow").show().find("h1").html("\u8bf7\u5148\u8bbe\u7f6e\u5750\u6807\u4f4d\u7f6e\uff01"),e.Time()}},{key:"changeX",value:function(e){u.this.setState({X:e.target.value}),u.this.RefreshLabel(),console.log(e.target.value)}},{key:"changeY",value:function(e){u.this.setState({Y:e.target.value}),u.this.RefreshLabel(),console.log(e.target.value)}},{key:"changeZ",value:function(e){u.this.setState({Z:e.target.value}),u.this.RefreshLabel(),console.log(e.target.value)}},{key:"Modifylabelname",value:function(e){u.this.setState({labelname:e.target.value}),this.RefreshLabel(),console.log(e.target.value)}},{key:"CameraView",value:function(){var t=JSON.parse(u.this.state.CameraViewOne);if(null===t)v()(".PageShow").show().find("h1").html("\u8bf7\u5148\u8fdb\u884c\u5b9a\u4f4d\uff01"),e.Time();else{console.log(t);var a={Event:"",ModName:"RetrospectiveCameraView",parameter:{x:t.x,y:t.y,z:t.z,h:t.h,p:t.p,r:t.r}};document.getElementById("core_content").contentWindow.postMessage(a,"*")}}},{key:"NavClickOne",value:function(e,t){e.stopPropagation(),h.a.CancelTilesHighlight();var a=t.center_position;console.log(t),null===a?u.this.setState({labelname:t.floor_name,CameraViewOne:JSON.stringify(a),OneHtml:!1,TwoHtml:!0}):u.this.setState({labelname:t.floor_name,CameraViewOne:JSON.stringify({x:a.x,y:a.y,z:a.z,h:a.heading,p:a.pitch,r:a.roll}),OneHtml:!1,TwoHtml:!0}),sessionStorage.setItem("navId",t.id),v()(".DataConfigTreeDiv").find("ul").find("li").css({color:"#fff"}),v()(".Data2"+t.id).css({color:"#50a4f4"})}},{key:"SaveNav",value:function(){var t=this,a=sessionStorage.getItem("navId"),n=JSON.parse(u.this.state.CameraViewOne);if(null===n)v()(".PageShow").show().find("h1").html("\u8bf7\u5148\u8fdb\u884c\u5b9a\u4f4d\uff01"),e.Time();else{var l={id:a,floor_name:u.this.state.labelname,center_position:{y:n.y,x:n.x,z:n.z,heading:n.h,pitch:n.p,roll:n.r},is_underground:!0,rise_height:10,remark:""};console.log(l),g.a.post(e.Url+"map/floor/update",l).then((function(a){a.data.data?(v()(".PageShow").show().find("h1").html("\u4fdd\u5b58\u6210\u529f"),e.Time(),t.Push()):(v()(".PageShow").show().find("h1").html(a.data.msg),e.Time())}))}}},{key:"changefontSize",value:function(e){u.this.setState({fontSize:e.target.value}),u.this.RefreshLabel()}},{key:"changeBorderWitch",value:function(e){u.this.setState({borderWitch:e.target.value}),u.this.RefreshLabel()}},{key:"handlePalette",value:function(e){"fontColor"===e?u.this.setState({fontColorPicker:!u.this.state.fontColorPicker}):"borderColor"===e&&u.this.setState({borderColorPicker:!u.this.state.borderColorPicker})}},{key:"handlePaletteClose",value:function(e){"fontColor"===e?u.this.setState({fontColorPicker:!1}):"borderColor"===e&&u.this.setState({borderColorPicker:!1})}},{key:"handleChoosePalette",value:function(e,t){"fontColor"===e?(u.this.setState({fontColor:t.hex}),u.this.RefreshLabel()):"borderColor"===e&&(u.this.setState({borderColor:t.hex}),u.this.RefreshLabel())}},{key:"render",value:function(){var e=this,t=this.state,a=t.Floor,l=t.X,o=t.Y,i=t.Z,r=t.labelname,s=t.CameraViewOne,u=t.OneHtml,m=t.TwoHtml,f=t.fontSize,g=t.fontColor,p=t.fontColorPicker,v=t.borderColor,y=t.borderColorPicker,w=t.borderWitch,S=b()({default:{color:{width:"50px",height:"25px",borderRadius:"2px",background:g,marginLeft:"100px",marginTop:"3px"},popover:{position:"absolute",zIndex:"2",top:"165px",right:"30px",color:"red"},cover:{position:"fixed",bottom:"0px",left:"0px",right:"0px",top:"0px"}}}),C=this.props.navClick;return d.a.createElement(c.Fragment,null,d.a.createElement("div",{className:"configShow",style:{width:"653px",height:"700px"}},d.a.createElement("div",{className:"configShowNav"},"\u5efa\u7b51\u914d\u7f6e ",d.a.createElement("i",{onClick:function(){return C(100)}})),d.a.createElement("div",{className:"NavigationButtonBorder"},d.a.createElement("div",{className:"configBut",style:{marginTop:"0px"}},d.a.createElement("button",{style:{position:"absolute",marginLeft:"20px"}},"\u6807\u6ce8\u914d\u7f6e"),d.a.createElement("button",{style:{marginRight:"380px"}},"\u64cd\u4f5c\u914d\u7f6e"))),d.a.createElement("div",{className:"DataConfigTreeDiv",style:{height:"575px"}},d.a.createElement("ul",null,a.length>0&&a.map((function(t,a){return d.a.createElement("li",{key:a,className:"Data1"+t.FloorItems.id,onClick:function(a){return e.AssignedLabelID(a,t)}},t.FloorItems.build_name,d.a.createElement("ul",{className:"navItemList"},t.Floorlists.length>=0&&t.Floorlists.map((function(t,a){return d.a.createElement("li",{key:a,className:"Data2"+t.id,onClick:function(a){return e.NavClickOne(a,t)}},t.floor_name)}))))})))),u?d.a.createElement("div",{className:"DataOne"},d.a.createElement("h1",null,"\u5efa\u7b51"),d.a.createElement("li",null,d.a.createElement("span",null,"\u5efa\u7b51\u540d\u79f0\uff1a"),d.a.createElement("input",{type:"text",value:r,onChange:function(t){return e.Modifylabelname(t)}})),d.a.createElement("li",null,d.a.createElement("span",null,"\u6807\u6ce8\u989c\u8272\uff1a"),d.a.createElement("div",{style:S.color,onClick:this.handlePalette.bind(this,"fontColor")}),p&&d.a.createElement("div",{style:S.popover},d.a.createElement("div",{style:S.cover,onClick:this.handlePaletteClose.bind(this,"fontColor")}),d.a.createElement(E.a,{color:g,onChange:this.handleChoosePalette.bind(this,"fontColor")}))),d.a.createElement("li",null,d.a.createElement("span",null,"\u6807\u6ce8\u5927\u5c0f\uff1a"),d.a.createElement("input",{type:"text",value:f,onChange:function(t){return e.changefontSize(t)}})),d.a.createElement("li",null,d.a.createElement("span",null,"\u8fb9\u6846\u989c\u8272\uff1a"),d.a.createElement("div",{style:Object(n.a)(Object(n.a)({},S.color),{},{background:v}),onClick:this.handlePalette.bind(this,"borderColor")}),y&&d.a.createElement("div",{style:Object(n.a)(Object(n.a)({},S.popover),{},{top:"245px"})},d.a.createElement("div",{style:S.cover,onClick:this.handlePaletteClose.bind(this,"borderColor")}),d.a.createElement(E.a,{color:v,onChange:this.handleChoosePalette.bind(this,"borderColor")}))),d.a.createElement("li",null,d.a.createElement("span",null,"\u8fb9\u6846\u5927\u5c0f\uff1a"),d.a.createElement("input",{type:"text",value:w,onChange:function(t){return e.changeBorderWitch(t)}})),d.a.createElement("li",null,d.a.createElement("span",null,"\u5efa\u7b51\u6807\u6ce8\uff1a"),d.a.createElement("button",{onClick:function(){return e.GeoaddlabelV2()}},"\u8bbe\u7f6e\u6807\u6ce8")),d.a.createElement("li",null,d.a.createElement("span",null,"\u6807\u6ce8\u4f4d\u7f6e\uff1a"),d.a.createElement("div",{className:"DataRight"},d.a.createElement("span",null,d.a.createElement("label",null,"X\uff1a"),d.a.createElement("input",{type:"text",defaultValue:l,onChange:function(t){return e.changeX(t)}})),d.a.createElement("span",null,d.a.createElement("label",null,"Y\uff1a"),d.a.createElement("input",{type:"text",defaultValue:o,onChange:function(t){return e.changeY(t)}})),d.a.createElement("span",null,d.a.createElement("label",null,"Z\uff1a"),d.a.createElement("input",{type:"text",defaultValue:i,onChange:function(t){return e.changeZ(t)}})))),d.a.createElement("li",null,d.a.createElement("span",null,"\u5b9a\u4f4d\u5750\u6807\uff1a"),d.a.createElement("span",{className:"newNav"},d.a.createElement("ul",null,d.a.createElement("li",{onClick:function(){return e.CameraView()}},"\u5750\u6807\u5b9a\u4f4d"),d.a.createElement("li",{className:"next",onClick:function(){return h.a.onCoordinate()}},"\u5f53\u524d\u4f4d\u7f6e")),d.a.createElement("div",{className:"liCont"},s))),d.a.createElement("div",{className:"configBut",style:{marginTop:"5px"},onClick:function(){return e.SubmitBuildingInformation()}},d.a.createElement("button",null,"\u4fdd\u5b58"))):"",m?d.a.createElement("div",{className:"DataOne"},d.a.createElement("h1",null,"\u697c\u5c42"),d.a.createElement("li",null,d.a.createElement("span",null,"\u697c\u5c42\u540d\u79f0\uff1a"),d.a.createElement("input",{type:"text",defaultValue:r,onChange:function(t){return e.Modifylabelname(t)}})),d.a.createElement("li",null,d.a.createElement("span",null,"\u5b9a\u4f4d\u5750\u6807\uff1a"),d.a.createElement("span",{className:"newNav"},d.a.createElement("ul",null,d.a.createElement("li",{onClick:function(){return e.CameraView()}},"\u5750\u6807\u5b9a\u4f4d"),d.a.createElement("li",{className:"next",onClick:function(){return h.a.onCoordinate()}},"\u5f53\u524d\u4f4d\u7f6e")),d.a.createElement("div",{className:"liCont"},s))),d.a.createElement("div",{className:"configBut",onClick:function(){return e.SaveNav()}},d.a.createElement("button",null,"\u4fdd\u5b58"))):""))}}]),u}(c.PureComponent);t.a=Object(u.b)(null,(function(e){return{navClick:function(t,a){h.a.CancelTilesHighlight(),e(m.a.nav_click(t,a))}}}))(w)}).call(this,a(18))},366:function(e,t,a){"use strict";(function(e){var n=a(14),l=a(9),o=a(10),i=a(2),r=a(12),s=a(11),c=a(0),d=a.n(c),u=a(16),m=a(21),h=a(5),f=a.n(h),g=a(3),p=a(1),v=a.n(p),y=a(6),b=a.n(y),E=a(28),w=function(t){Object(r.a)(u,t);var a=Object(s.a)(u);function u(e){var t;return Object(l.a)(this,u),(t=a.call(this,e)).state={isLoad:!0,mapList:{},mapName:"",mapTagName:"",fontSize:"1",fontColor:"#ffffff",borderWitch:"1",borderColor:"#ffffff",centerPosition:{},labelPosition:{},labelStyle:{},labelId:"",oneMap:!0,twoMap:!1,deletedId:"",fontColorPicker:!1,borderColorPicker:!1},u.this=Object(i.a)(t),t.Close=t.Close.bind(Object(i.a)(t)),t.setTag=t.setTag.bind(Object(i.a)(t)),t.saveTag=t.saveTag.bind(Object(i.a)(t)),t.AddList=t.AddList.bind(Object(i.a)(t)),t.changeTag=t.changeTag.bind(Object(i.a)(t)),t.ChangeList=t.ChangeList.bind(Object(i.a)(t)),t.onContextMenu=t.onContextMenu.bind(Object(i.a)(t)),t.DeletedTag=t.DeletedTag.bind(Object(i.a)(t)),t.PageDeletedData2=t.PageDeletedData2.bind(Object(i.a)(t)),t}return Object(o.a)(u,[{key:"componentDidMount",value:function(){this.onLoad(),document.oncontextmenu=function(){return!1},window.receiveMessageFromIndex=function(e){if(void 0!==e)switch(e.data.switchName){case"GeoaddlabelV3":console.log(e.data);var t=e.data.parameter;u.this.setState({labelId:t.label_id,labelStyle:t.label_style,labelPosition:t.label_position,mapName:t.label_name});break;case"getCameraView":var a=e.data.cv;u.this.setState({centerPosition:{y:a.y,x:a.x,z:a.z,heading:a.h,pitch:a.p,roll:a.r}});break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1)}},{key:"onLoad",value:function(){var t=this;f.a.get(e.Url+"map/label/list").then((function(a){var n=a.data.data;n?t.setState({mapList:n}):(v()(".PageShow").show().find("h1").html(a.data.msg),e.Time())}))}},{key:"Close",value:function(){this.setState({isLoad:!1})}},{key:"changeName",value:function(e){this.setState({mapName:e.target.value}),u.this.onChangeData()}},{key:"changFont",value:function(e){this.setState({fontSize:e.target.value}),u.this.onChangeData()}},{key:"ChangeColor",value:function(e){u.this.setState({fontColor:e.target.value}),u.this.onChangeData()}},{key:"changeBorder",value:function(e){this.setState({borderWitch:e.target.value}),u.this.onChangeData()}},{key:"ChangeBorderColor",value:function(e){u.this.setState({borderColor:e.target.value}),u.this.onChangeData()}},{key:"setTag",value:function(){var t=this.state,a=t.labelId,n=t.mapName,l=t.fontSize,o=t.fontColor,i=t.borderWitch,r=t.borderColor;if(n){var s={id:a,label_name:n,label_style:{fontSize:l,fontColor:o,borderWitch:i,borderColor:r}};console.log(s),g.a.GeoaddlabelV3(s)}else v()(".PageShow").show().find("h1").html("\u8bf7\u5148\u8f93\u5165\u6807\u6ce8\u540d\u79f0!"),e.Time()}},{key:"saveTag",value:function(){var t=u.this.state;t.mapName?"{}"===JSON.stringify(t.labelPosition)?(v()(".PageShow").show().find("h1").html("\u8bf7\u5148\u7ed8\u5236\u6807\u6ce8!"),setTimeout((function(){v()(".PageShow").hide()}),1e3)):(g.a.onCoordinate(),setTimeout((function(){var t=u.this.state,a={label_name:t.mapName,center_position:t.centerPosition,label_position:t.labelPosition,label_style:t.labelStyle,remark:"1"};console.log("data",t.centerPosition),"{}"===JSON.stringify(t.centerPosition)?(v()(".PageShow").show().find("h1").html("Cesium\u5185\u90e8\u51fa\u9519\u4e86\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u6216\u66f4\u6362\u6d4f\u89c8\u5668"),e.Time()):f.a.post(e.Url+"map/label/add",a).then((function(t){var a=t.data.data;a&&"success"===t.data.msg?(console.log(t,a),v()(".PageShow").show().find("h1").html("\u4fdd\u5b58\u6210\u529f!"),e.Time(),g.a.ResetLabel(),u.this.onLoad(),u.this.setState({oneMap:!1}),u.this.setEmty()):(v()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}),10)):(v()(".PageShow").show().find("h1").html("\u8bf7\u5148\u8f93\u5165\u6807\u6ce8\u540d\u79f0!"),e.Time())}},{key:"setEmty",value:function(){u.this.setState({oneMap:!0,mapName:"",centerPosition:{},labelPosition:{},labelStyle:{},fontSize:"1",fontColor:"#ffffff",borderWitch:"1",borderColor:"#ffffff",labelId:""})}},{key:"AddList",value:function(){this.setState({oneMap:!0,twoMap:!1}),u.this.setEmty(),v()(".RightDelete").css({display:"none"})}},{key:"ChangeList",value:function(t){this.setState({oneMap:!1,twoMap:!0}),v()("#Right"+t).css({color:"#54b2df",fontWeight:"bold"}),v()("#Right"+t).siblings().css({color:"#fff",fontWeight:"100"}),v()("#Right"+t).find(".RightDelete").css({display:"none"}),v()("#Right"+t).siblings().find(".RightDelete").css({display:"none"}),f.a.post(e.Url+"map/label",{id:t}).then((function(t){var a=t.data.data;a?(console.log(a,a.label_style.fontSize),u.this.setState({mapName:a.label_name,mapTagName:a.label_name,fontSize:a.label_style.fontSize,fontColor:a.label_style.fontColor,borderWitch:a.label_style.borderWitch,borderColor:a.label_style.borderColor,centerPosition:a.center_position,labelPosition:a.label_position,labelId:a.id,labelStyle:{borderColor:a.label_style.borderColor,borderWitch:a.label_style.borderWitch,fontColor:a.label_style.fontColor,fontSize:a.label_style.fontSize}})):(v()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"changeTag",value:function(){var t=u.this.state;t.mapName?"{}"===JSON.stringify(t.labelPosition)?(v()(".PageShow").show().find("h1").html("\u8bf7\u5148\u7ed8\u5236\u8bbe\u7f6e\u6807\u6ce8!"),e.Time()):(g.a.onCoordinate(),setTimeout((function(){var t=u.this.state,a={id:t.labelId,label_name:t.mapName,center_position:t.centerPosition,label_position:t.labelPosition,label_style:{fontSize:t.fontSize,fontColor:t.fontColor,borderWitch:t.borderWitch,borderColor:t.borderColor},remark:"1"};console.log(a,t.centerPosition),"{}"===JSON.stringify(t.centerPosition)?(v()(".PageShow").show().find("h1").html("Cesium\u5185\u90e8\u51fa\u9519\u4e86\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u6216\u66f4\u6362\u6d4f\u89c8\u5668"),e.Time()):f.a.post(e.Url+"map/label/update",a).then((function(t){var a=t.data.data;a&&"success"===t.data.msg?(console.log(t,a),v()(".PageShow").show().find("h1").html("\u4fee\u6539\u6210\u529f!"),e.Time(),u.this.onLoad()):(v()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}),10)):(v()(".PageShow").show().find("h1").html("\u8bf7\u5148\u8f93\u5165\u6807\u6ce8\u540d\u79f0!"),e.Time())}},{key:"onContextMenu",value:function(e,t){e.stopPropagation(),v()("#Right"+t).find(".RightDelete").css({display:"block"}),v()("#Right"+t).siblings().find(".RightDelete").css({display:"none"}),v()("#Right"+t).css({color:"#54b2df",fontWeight:"bold"}),v()("#Right"+t).siblings().css({color:"#fff",fontWeight:"100"})}},{key:"onChangeData",value:function(){setTimeout((function(){var e=u.this.state,t={id:e.labelId,labeltxt:e.mapName,label_style:{fontSize:e.fontSize,fontColor:e.fontColor,borderWitch:e.borderWitch,borderColor:e.borderColor}};g.a.ModifyLabel(t)}),10)}},{key:"DeletedTag",value:function(e,t){e.stopPropagation(),v()(".data2Show").show(),this.setState({deletedId:t})}},{key:"PageDeletedData2",value:function(){var t=this;v()(".data2Show").hide(),f.a.post(e.Url+"map/label/delete",{id:this.state.deletedId}).then((function(a){var n=a.data.data;n?(console.log(n),t.onLoad(),v()("#Right"+t.state.deletedId).find(".RightDelete").css({display:"none"}),g.a.ResetLabel(),v()(".PageShow").show().find("h1").html("\u5220\u9664\u6210\u529f!"),e.Time(),u.this.AddList()):(v()(".PageShow").show().find("h1").html(a.data.msg),e.Time())}))}},{key:"handlePalette",value:function(e){"fontColor"===e?this.setState({fontColorPicker:!this.state.fontColorPicker}):"borderColor"===e&&this.setState({borderColorPicker:!this.state.borderColorPicker})}},{key:"handlePaletteClose",value:function(e){"fontColor"===e?this.setState({fontColorPicker:!1}):"borderColor"===e&&this.setState({borderColorPicker:!1})}},{key:"handleChoosePalette",value:function(e,t){"fontColor"===e?this.setState({fontColor:t.hex}):"borderColor"===e&&this.setState({borderColor:t.hex}),u.this.onChangeData()}},{key:"render",value:function(){var t=this,a=this.state,l=a.isLoad,o=a.mapList,i=a.oneMap,r=a.twoMap,s=a.mapName,u=a.fontSize,m=a.fontColor,h=a.borderWitch,f=a.borderColor,g=a.mapTagName,p=a.fontColorPicker,v=a.borderColorPicker,y=b()({default:{color:{width:"50px",height:"25px",borderRadius:"2px",background:m,marginLeft:"100px",marginTop:"3px"},popover:{position:"absolute",zIndex:"2",top:"165px",right:"30px",color:"red"},cover:{position:"fixed",bottom:"0px",left:"0px",right:"0px",top:"0px"}}});return d.a.createElement(c.Fragment,null,l?d.a.createElement("div",{className:"configShow Map",style:{width:"460px",height:"400px"}},d.a.createElement("div",{className:"configShowNav"},"\u5730\u56fe\u6807\u6ce8 ",d.a.createElement("i",{onClick:function(){return t.Close()}})),d.a.createElement("div",{className:"configData"},d.a.createElement("div",{className:"configDataLeft"},d.a.createElement("h1",null,d.a.createElement("button",{onClick:function(){return t.AddList()}},"\u6dfb\u52a0")),d.a.createElement("ul",null,o.length>0&&o.map((function(e,a){return d.a.createElement("li",{key:a,className:"RightDeleted",id:"Right"+e.id,onClick:function(){return t.ChangeList(e.id)},onContextMenu:function(a){return t.onContextMenu(a,e.id)}},e.label_name,d.a.createElement("div",{className:"RightDelete",style:{display:"none"}},d.a.createElement("button",{onClick:function(a){return t.DeletedTag(a,e.id)}},"\u5220\u9664")))})))),i?d.a.createElement("div",{className:"configDataRight"},d.a.createElement("h1",null,"\u8bbe\u7f6e\u5730\u56fe\u6807\u6ce8"),d.a.createElement("li",null,d.a.createElement("span",null,"\u6807\u6ce8\u540d\u79f0\uff1a"),d.a.createElement("input",{type:"text",defaultValue:s,onChange:function(e){return t.changeName(e)}})),d.a.createElement("li",null,d.a.createElement("span",null,"\u5b57\u4f53\u5927\u5c0f\uff1a"),d.a.createElement("input",{type:"text",defaultValue:u,onChange:function(e){return t.changFont(e)}})),d.a.createElement("li",null,d.a.createElement("span",null,"\u5b57\u4f53\u989c\u8272\uff1a"),d.a.createElement("div",{style:y.color,onClick:this.handlePalette.bind(this,"fontColor")}),p&&d.a.createElement("div",{style:y.popover},d.a.createElement("div",{style:y.cover,onClick:this.handlePaletteClose.bind(this,"fontColor")}),d.a.createElement(E.a,{color:m,onChange:this.handleChoosePalette.bind(this,"fontColor")}))),d.a.createElement("li",null,d.a.createElement("span",null,"\u8fb9\u6846\u5bbd\u5ea6\uff1a"),d.a.createElement("input",{type:"text",defaultValue:h,onChange:function(e){return t.changeBorder(e)}})),d.a.createElement("li",null,d.a.createElement("span",null,"\u8fb9\u6846\u989c\u8272\uff1a"),d.a.createElement("div",{style:Object(n.a)(Object(n.a)({},y.color),{},{background:f}),onClick:this.handlePalette.bind(this,"borderColor")}),v&&d.a.createElement("div",{style:Object(n.a)(Object(n.a)({},y.popover),{},{top:"245px"})},d.a.createElement("div",{style:y.cover,onClick:this.handlePaletteClose.bind(this,"borderColor")}),d.a.createElement(E.a,{color:f,onChange:this.handleChoosePalette.bind(this,"borderColor")}))),d.a.createElement("div",{className:"configBut"},d.a.createElement("button",{onClick:function(){return t.saveTag()}},"\u4fdd\u5b58"),d.a.createElement("button",{onClick:function(){return t.setTag()}},"\u8bbe\u7f6e\u6807\u6ce8"))):"",r?d.a.createElement("div",{className:"configDataRight"},d.a.createElement("h1",null,"\u4fee\u6539",g,"\u6807\u6ce8"),d.a.createElement("li",null,d.a.createElement("span",null,"\u6807\u6ce8\u540d\u79f0\uff1a"),d.a.createElement("input",{type:"text",value:s,onChange:function(e){return t.changeName(e)}})),d.a.createElement("li",null,d.a.createElement("span",null,"\u5b57\u4f53\u5927\u5c0f\uff1a"),d.a.createElement("input",{type:"text",value:u,onChange:function(e){return t.changFont(e)}})),d.a.createElement("li",null,d.a.createElement("span",null,"\u5b57\u4f53\u989c\u8272\uff1a"),d.a.createElement("div",{style:y.color,onClick:this.handlePalette.bind(this,"fontColor")}),p&&d.a.createElement("div",{style:y.popover},d.a.createElement("div",{style:y.cover,onClick:this.handlePaletteClose.bind(this,"fontColor")}),d.a.createElement(E.a,{color:m,onChange:this.handleChoosePalette.bind(this,"fontColor")}))),d.a.createElement("li",null,d.a.createElement("span",null,"\u8fb9\u6846\u5bbd\u5ea6\uff1a"),d.a.createElement("input",{type:"text",value:h,onChange:function(e){return t.changeBorder(e)}})),d.a.createElement("li",null,d.a.createElement("span",null,"\u8fb9\u6846\u989c\u8272\uff1a"),d.a.createElement("div",{style:Object(n.a)(Object(n.a)({},y.color),{},{background:f}),onClick:this.handlePalette.bind(this,"borderColor")}),v&&d.a.createElement("div",{style:Object(n.a)(Object(n.a)({},y.popover),{},{top:"245px"})},d.a.createElement("div",{style:y.cover,onClick:this.handlePaletteClose.bind(this,"borderColor")}),d.a.createElement(E.a,{color:f,onChange:this.handleChoosePalette.bind(this,"borderColor")}))),d.a.createElement("div",{className:"configBut"},d.a.createElement("button",{onClick:function(){return t.changeTag()}},"\u4fee\u6539\u4fdd\u5b58"),d.a.createElement("button",{onClick:function(){return t.setTag()}},"\u91cd\u7f6e\u6807\u6ce8"))):"")):"",d.a.createElement("div",{className:"PageShow1 data2Show"},d.a.createElement("div",{className:"PageShowCont"},d.a.createElement("h1",null,"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u561b\uff01"),d.a.createElement("h2",null,d.a.createElement("button",{onClick:function(){return t.PageDeletedData2()}},"\u786e\u5b9a"),d.a.createElement("button",{onClick:function(){return e.PageHide()}},"\u53d6\u6d88")))))}}]),u}(c.PureComponent);t.a=Object(u.b)((function(e){return{adminItem:e.admin.get("adminItem"),adminIndex:e.admin.get("adminIndex")}}),(function(e){return{navClick:function(t,a){e(m.a.nav_click(t,a))}}}))(w)}).call(this,a(18))},367:function(e,t,a){"use strict";(function(e){var n=a(14),l=a(33),o=a(47),i=a.n(o),r=a(69),s=a(9),c=a(10),d=a(2),u=a(12),m=a(11),h=a(0),f=a.n(h),g=a(16),p=a(21),v=a(22),y=a.n(v),b=a(3),E=a(1),w=a.n(E),S=a(5),C=a.n(S),k=a(6),N=a.n(k),I=a(28),T=function(t){Object(u.a)(o,t);var a=Object(m.a)(o);function o(e){var t;return Object(s.a)(this,o),(t=a.call(this,e)).handlePhoto=function(){var e=Object(r.a)(i.a.mark((function e(a,n){var l,o,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(o=new FileReader).readAsDataURL(a.target.files[0]),r=Object(d.a)(t),o.onload=function(e){if(l=e.target.result,1===n)console.log(1),r.setState({Pic:l});else if(2===n){console.log(2),r.setState({twoPic:l});var t={id:r.state.labelId,image:r.state.twoPic};console.log(t),b.a.Modifybillboard(t)}};case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),t.state={pid:"",parensId:"",isLoad:!0,oneLayer:!0,twoLayer:!1,oneChange:!1,oneId:"",layerList:{},groupName:"",twoName:"",modeASelect:"label",Pic:y.a,twoPic:y.a,labelId:"",options:{},ChangeSave:!1,label_style:{isLining:!1,labelName:"",fontColor:"#ff0000",fontSize:"1",borderColor:"#ffffff",borderWitch:"1"},Polyline_style:{PolylineWitch:"1",PolylineColor:"#ff0000",borderWitchPolyline:"1",borderColor:"#ffffff",borderTransparencyPolyline:"50"},Polygon_style:{shapeColor:"#ff0000",shapeTransparency:"50",borderWitchPolygon:"1",borderColor:"#ffffff",borderTransparency:"50"},deletedName:"\u4e00\u7ea7",deletedOneId:"",deletedTwoId:"",polygonPicker:!1,borderPicker:!1,polylinePicker:!1,contrastPicker:!1,labelPicker:!1,addContrastPicker:!1},o.this=Object(d.a)(t),t.Close=t.Close.bind(Object(d.a)(t)),t.oneClick=t.oneClick.bind(Object(d.a)(t)),t.twoClick=t.twoClick.bind(Object(d.a)(t)),t.fileInputEl=f.a.createRef(),t.saveTag=t.saveTag.bind(Object(d.a)(t)),t.saveTwoTag=t.saveTwoTag.bind(Object(d.a)(t)),t.changeSaveTwoTag=t.changeSaveTwoTag.bind(Object(d.a)(t)),t.changeSaveTag=t.changeSaveTag.bind(Object(d.a)(t)),t.onContextMenu=t.onContextMenu.bind(Object(d.a)(t)),t.onContextMenu1=t.onContextMenu1.bind(Object(d.a)(t)),t.deleteOne=t.deleteOne.bind(Object(d.a)(t)),t.deleteTwo=t.deleteTwo.bind(Object(d.a)(t)),t.setTag=t.setTag.bind(Object(d.a)(t)),t.PageDeletedData4=t.PageDeletedData4.bind(Object(d.a)(t)),t}return Object(c.a)(o,[{key:"onChangeData",value:function(){setTimeout((function(){var e=o.this.state,t={id:e.labelId,labeltxt:e.label_style.labelName,label_style:e.label_style};b.a.ModifyLabel(t)}),10)}},{key:"setTag",value:function(t){var a=this.state,n=a.labelId,l=a.twoName,i=a.label_style,r=a.twoPic,s=a.Polyline_style,c=a.Polygon_style;if(i.isLining||(o.this.state.label_style.borderWitch=0,o.this.state.label_style.borderColor="#ffffff"),l){var d={};switch(t){case"label":i.labelName?(d={id:n,label_name:i.labelName,label_style:i},console.log(d),b.a.GeoaddlabelV3(d)):(w()(".PageShow").show().find("h1").html("\u6807\u6ce8\u6587\u672c\u4e0d\u80fd\u4e3a\u7a7a!"),e.Time());break;case"polygon":d={id:n,Polygon_style:c},console.log(d),b.a.drawPolygon(d);break;case"polyline":d={id:n,Polyline_style:s},console.log(d),b.a.drawPolyline(d);break;case"billboard":r===y.a?(w()(".PageShow").show().find("h1").html("\u8bf7\u9009\u62e9\u56fe\u7247!"),e.Time()):(d={id:n,image:r},console.log(d),b.a.AddPictureLabel(d))}}else w()(".PageShow").show().find("h1").html("\u56fe\u5c42\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a!"),e.Time()}},{key:"componentDidMount",value:function(){this.onLayer(),document.oncontextmenu=function(){return!1},window.receiveMessageFromIndex=function(e){if(void 0!==e)switch(e.data.switchName){case"GeoaddlabelV3":console.log(e.data);var t=e.data.parameter;o.this.setState({options:t,pid:t.label_id,labelId:t.label_id});break;case"AddPictureLabel":console.log(e.data);var a=e.data.parameter;o.this.setState({options:a,twoPic:a.style.image,pid:e.data.id});break;case"drawPolyline":case"drawPolygon":console.log(e.data),o.this.setState({options:e.data.parameter,pid:e.data.id});break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1)}},{key:"onLayer",value:function(){var t=[];C.a.get(e.Url+"map/group/list",{}).then((function(a){var n=a.data.data;if(console.log(n),n&&"success"===a.data.msg)if(n.length>0)for(var l=function(a){C.a.post(e.Url+"map/layer/list",{group_id:n[a].id}).then((function(l){var i=l.data.data;i&&"success"===l.data.msg?(t.push({LayerItems:n[a],LayerLists:i}),a===n.length-1&&setTimeout((function(){o.this.setState({layerList:t})}),100)):(w()(".PageShow").show().find("h1").html(l.data.msg),e.Time())}))},i=0;i<n.length;i++)l(i);else o.this.setState({layerList:{}});else w()(".PageShow").show().find("h1").html(a.data.msg),e.Time()}))}},{key:"Close",value:function(){this.setState({isLoad:!1})}},{key:"oneClick",value:function(e,t){b.a.ClearHandler(),o.this.setState({oneLayer:!0,twoLayer:!1}),1===e?(o.this.setState({groupName:"",Pic:y.a,oneChange:!1,oneId:""}),w()(".layer").find("span").css({color:"#fff"}),w()(".layer_t").find("span").css({color:"#fff"})):2===e&&(console.log(t),b.a.ClearCustomView(o.this.state.parensId),o.this.setState({oneChange:!0,groupName:t.LayerItems.group_name,Pic:t.LayerItems.group_icon,oneId:t.LayerItems.id,parensId:t.LayerItems.id}),w()("#layer"+t.LayerItems.id).find("span").css({color:"#54b2df"}),w()("#layer"+t.LayerItems.id).find("ul").css("display","block"),w()("#layer"+t.LayerItems.id).siblings().find("span").css({color:"#fff"}),w()("#layer"+t.LayerItems.id).siblings().find("ul").css("display","none"),w()(".layer_t").find("span").css({color:"#fff"}),w()(".layer").find(".Alert_tk").css("display","none"))}},{key:"emptyOne",value:function(){this.setState({groupName:"",Pic:y.a})}},{key:"saveTag",value:function(){var t=this,a=this.state,n=a.groupName,l=a.Pic;n?l===y.a?(w()(".PageShow").show().find("h1").html("\u8bf7\u9009\u62e9\u56fe\u7247!"),e.Time()):C.a.post(e.Url+"map/group/add",{group_name:n,group_icon:l,remark:""}).then((function(a){a.data.data?(w()(".PageShow").show().find("h1").html("\u6dfb\u52a0\u6210\u529f!"),e.Time(),t.onLayer(),o.this.setState({groupName:"",Pic:y.a})):(w()(".PageShow").show().find("h1").html(a.data.msg),e.Time())})):(w()(".PageShow").show().find("h1").html("\u8bf7\u8f93\u5165\u5206\u7ec4\u540d\u79f0!"),e.Time())}},{key:"changeSaveTag",value:function(){var t=this,a=this.state,n=a.groupName,l=a.Pic,o=a.oneId;n?l===y.a?(w()(".PageShow").show().find("h1").html("\u8bf7\u9009\u62e9\u56fe\u7247!"),e.Time()):C.a.post(e.Url+"map/group/update",{id:o,group_name:n,group_icon:l,remark:""}).then((function(a){a.data.data?(w()(".PageShow").show().find("h1").html("\u4fee\u6539\u6210\u529f!"),e.Time(),t.onLayer()):(w()(".PageShow").show().find("h1").html(a.data.msg),e.Time())})):(w()(".PageShow").show().find("h1").html("\u8bf7\u8f93\u5165\u5206\u7ec4\u540d\u79f0!"),e.Time())}},{key:"deleteOne",value:function(e,t){e.stopPropagation(),this.setState({deletedName:"\u4e00\u7ea7",deletedOneId:t}),w()(".data3Show").show()}},{key:"deleteTwo",value:function(e,t){e.stopPropagation(),this.setState({deletedName:"\u4e8c\u7ea7",deletedTwoId:t}),w()(".data3Show").show()}},{key:"PageDeletedData4",value:function(){w()(".data3Show").hide();var t=this.state,a=t.deletedName,n=t.deletedOneId,l=t.deletedTwoId;console.log(a,n,l),"\u4e00\u7ea7"===a?C.a.post(e.Url+"map/group/delete",{id:n}).then((function(t){t.data.data&&"success"===t.data.msg?(w()(".PageShow").show().find("h1").html("\u5220\u9664\u6210\u529f!"),e.Time(),o.this.onLayer(),w()(".layer").find(".Alert_tk").css("display","none")):(w()(".PageShow").show().find("h1").html(t.data.msg),e.Time())})):C.a.post(e.Url+"map/layer/delete",{id:l}).then((function(t){if(t.data.data&&"success"===t.data.msg){w()(".PageShow").show().find("h1").html("\u5220\u9664\u6210\u529f!"),e.Time(),o.this.onLayer(),o.this.state.oneLayer||o.this.setState({oneLayer:!0,twoLayer:!1,groupName:"",Pic:y.a,oneChange:!1,oneId:""});var a={id:l};b.a.Emptyentities(a),w()(".layer").find(".Alert_tk").css("display","none")}else w()(".PageShow").show().find("h1").html(t.data.msg),e.Time()}))}},{key:"twoClick",value:function(e,t,a){if(e.stopPropagation(),o.this.setState({oneLayer:!1,twoLayer:!0}),w()("#layer_t"+t.id).parents().find("span").css({color:"#fff"}),w()("#layer_t"+t.id).find("span").css({color:"#54b2df"}),w()("#layer_t"+t.id).siblings().find("span").css({color:"#fff"}),w()(".layer").find(".Alert_tk").css("display","none"),b.a.ClearHandler(),1===a)sessionStorage.setItem("numId",t.LayerItems.id),o.this.setState({twoName:"",modeASelect:"label",labelId:"",ChangeSave:!1,label_style:{isLining:!1,labelName:"",fontColor:"#ff0000",fontSize:"1",borderColor:"#ffffff",borderWitch:"1"},Polyline_style:{PolylineWitch:"1",PolylineColor:"#ff0000",borderWitchPolyline:"1",borderColor:"#ffffff",borderTransparencyPolyline:"50"},Polygon_style:{shapeColor:"#ff0000",shapeTransparency:"50",borderWitchPolygon:"1",borderColor:"#ffffff",borderTransparency:"50"},twoPic:y.a});else if(2===a){sessionStorage.setItem("numId",t.group_id);var n={id:o.this.state.pid};console.log(n,t),b.a.Emptyentities(n),o.this.setState({twoName:t.layer_name,modeASelect:t.layer_type,labelId:t.id,ChangeSave:!0,options:t.options,pid:t.id});var l={id:t.group_id,pid:t.id};console.log(l),"label"===t.layer_type?o.this.setState({label_style:t.options.label_style}):"billboard"===t.layer_type?o.this.setState({twoPic:t.options.style.image}):"polyline"===t.layer_type?o.this.setState({Polyline_style:t.options.style}):"polygon"===t.layer_type&&o.this.setState({Polygon_style:t.options.style}),b.a.ClickDisplayLayer(l)}}},{key:"ChangeSelect",value:function(e){e.preventDefault(),o.this.setState({modeASelect:e.target.value,options:{},label_style:{isLining:!1,labelName:"",fontColor:"#ff0000",fontSize:"1",borderColor:"#ffffff",borderWitch:"1"},Polyline_style:{PolylineWitch:"1",PolylineColor:"#ff0000",borderWitchPolyline:"1",borderColor:"#ffffff",borderTransparencyPolyline:"50"},Polygon_style:{shapeColor:"#ff0000",shapeTransparency:"50",borderWitchPolygon:"1",borderColor:"#ffffff",borderTransparency:"50"},twoPic:y.a});var t={id:o.this.state.pid};console.log(t),b.a.Emptyentities(t)}},{key:"onContextMenu",value:function(e,t){e.stopPropagation(),w()("#layer"+t).find("span").css({color:"#54b2df"}),w()("#layer"+t).siblings().find("span").css({color:"#fff"}),w()(".layer_t").find("span").css({color:"#fff"}),w()(".layer").find(".Alert_tk").css("display","none"),w()("#layer"+t).find("#Alert"+t).css("display","block")}},{key:"onContextMenu1",value:function(e,t){e.stopPropagation(),w()(".layer").find("span").css({color:"#fff"}),w()("#layer_t"+t).find("span").css({color:"#54b2df"}),w()("#layer_t"+t).siblings().find("span").css({color:"#fff"}),w()(".layer").find(".Alert_tk").css("display","none"),w()("#layer_t"+t).find("#Alert"+t).css("display","block")}},{key:"saveTwoTag",value:function(){var t=this.state,a=t.twoName,n=t.modeASelect,l=t.options,i=t.twoPic;if(a)if("{}"===JSON.stringify(l))w()(".PageShow").show().find("h1").html("\u8bf7\u5148\u7ed8\u5236\u56fe\u5c42!"),e.Time();else{switch(n){case"label":r();break;case"billboard":i===y.a?(w()(".PageShow").show().find("h1").html("\u8bf7\u9009\u62e9\u56fe\u7247!"),e.Time()):r();break;case"polyline":case"polygon":r()}function r(){C.a.post(e.Url+"map/layer/add",{layer_name:a,layer_type:n,group_id:sessionStorage.getItem("numId"),options:l,remark:""}).then((function(t){var a=t.data.data;console.log(t,a),a?(w()(".PageShow").show().find("h1").html("\u6dfb\u52a0\u6210\u529f!"),e.Time(),o.this.onLayer(),o.this.setState({twoName:"",modeASelect:"label",labelId:"",ChangeSave:!1,label_style:{isLining:!1,labelName:"",fontColor:"#ff0000",fontSize:"1",borderColor:"#ffffff",borderWitch:"1"},Polyline_style:{PolylineWitch:"1",PolylineColor:"#ff0000",borderWitchPolyline:"1",borderColor:"#ffffff",borderTransparencyPolyline:"50"},Polygon_style:{shapeColor:"#ff0000",shapeTransparency:"50",borderWitchPolygon:"1",borderColor:"#ffffff",borderTransparency:"50"},twoPic:y.a})):(w()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}}else w()(".PageShow").show().find("h1").html("\u8bf7\u8f93\u5165\u56fe\u5c42\u540d\u79f0!"),e.Time()}},{key:"changeSaveTwoTag",value:function(){b.a.ClearHandler();var t=this.state,a=t.twoName,n=t.modeASelect,l=t.options,i=t.twoPic,r=t.labelId;if(a)if("{}"===JSON.stringify(l))w()(".PageShow").show().find("h1").html("\u8bf7\u5148\u7ed8\u5236\u56fe\u5c42!"),e.Time();else{switch(n){case"label":o.this.setState({options:o.this.state.label_style}),s();break;case"billboard":i===y.a?(w()(".PageShow").show().find("h1").html("\u8bf7\u9009\u62e9\u56fe\u7247!"),e.Time()):s();break;case"polyline":o.this.setState({options:o.this.state.Polyline_style}),s();break;case"polygon":o.this.setState({options:o.this.state.Polygon_style}),s()}function s(){var t={layer_name:a,layer_type:n,group_id:sessionStorage.getItem("numId"),id:r,options:l.label_name=o.this.state.label_style.labelName};console.log(t),C.a.post(e.Url+"map/layer/update",{id:r,layer_name:a,layer_type:n,group_id:sessionStorage.getItem("numId"),options:l,remark:""}).then((function(t){var a=t.data.data;console.log(t,a),a?(w()(".PageShow").show().find("h1").html("\u4fee\u6539\u6210\u529f!"),e.Time(),o.this.onLayer()):alert(t.data.msg)}))}}else w()(".PageShow").show().find("h1").html("\u8bf7\u8f93\u5165\u56fe\u5c42\u540d\u79f0!"),e.Time()}},{key:"changeName",value:function(e){this.setState({groupName:e.target.value})}},{key:"changeTwoName",value:function(e){this.setState({twoName:e.target.value})}},{key:"changeLabelName",value:function(e){o.this.state.label_style.labelName=e.target.value,this.onChangeData()}},{key:"handleIsLining",value:function(e){var t=o.this.state.label_style;t.isLining=!o.this.state.label_style.isLining,o.this.setState((function(e){return t})),this.onChangeData()}},{key:"ChangeColor",value:function(e){o.this.state.label_style.fontColor=e.target.value,this.onChangeData()}},{key:"changeLabelFontSize",value:function(e){o.this.state.label_style.fontSize=e.target.value,this.onChangeData()}},{key:"changeLiningColor",value:function(e){o.this.state.label_style.borderColor=e.target.value,this.onChangeData()}},{key:"changeLiningBorderWitch",value:function(e){o.this.state.label_style.borderWitch=e.target.value,this.onChangeData()}},{key:"changePolylineWitch",value:function(e){o.this.state.Polyline_style.PolylineWitch=e.target.value;var t={id:o.this.state.labelId,Polyline_style:o.this.state.Polyline_style};b.a.ModifyPolyline(t)}},{key:"ChangePolylineColor",value:function(e){o.this.state.Polyline_style.PolylineColor=e.target.value;var t={id:o.this.state.labelId,Polyline_style:o.this.state.Polyline_style};b.a.ModifyPolyline(t)}},{key:"ChangePolylineBorderColor",value:function(e){o.this.state.Polyline_style.borderColor=e.target.value;var t={id:o.this.state.labelId,Polyline_style:o.this.state.Polyline_style};b.a.ModifyPolyline(t)}},{key:"changePolylineBorderWitch",value:function(e){o.this.state.Polyline_style.borderWitchPolyline=e.target.value;var t={id:o.this.state.labelId,Polyline_style:o.this.state.Polyline_style};b.a.ModifyPolyline(t)}},{key:"changeBorderTransparency",value:function(e){var t=o.this.state.Polyline_style;t.borderTransparencyPolyline=e.target.value,o.this.setState(t);var a={id:o.this.state.labelId,Polyline_style:o.this.state.Polyline_style};b.a.ModifyPolyline(a)}},{key:"ChangeShapeColor",value:function(e){o.this.state.Polygon_style.shapeColor=e.target.value;var t={id:o.this.state.labelId,Polygon_style:o.this.state.Polygon_style};b.a.ModifyPolygon(t)}},{key:"changeShapeTransparency",value:function(e){var t=o.this.state.Polygon_style;t.shapeTransparency=e.target.value,o.this.setState(t);var a={id:o.this.state.labelId,Polygon_style:o.this.state.Polygon_style};b.a.ModifyPolygon(a)}},{key:"ChangeBorderWitchPolygon",value:function(e){o.this.state.Polygon_style.borderWitchPolygon=e.target.value;var t={id:o.this.state.labelId,Polygon_style:o.this.state.Polygon_style};b.a.ModifyPolygon(t)}},{key:"ChangePolygonBorderColor",value:function(e){o.this.state.Polygon_style.borderColor=e.target.value;var t={id:o.this.state.labelId,Polygon_style:o.this.state.Polygon_style};b.a.ModifyPolygon(t)}},{key:"changeBorderTransparencyPolygon",value:function(e){var t=o.this.state.Polygon_style;t.borderTransparency=e.target.value,o.this.setState(t);var a={id:o.this.state.labelId,Polygon_style:o.this.state.Polygon_style};b.a.ModifyPolygon(a)}},{key:"handlePalette",value:function(e){this.setState(Object(l.a)({},e,!this.state[e]))}},{key:"handlePaletteClose",value:function(e){this.setState(Object(l.a)({},e,!1))}},{key:"handleChoosePalette",value:function(e,t,a){var i;this.setState(Object(l.a)({},t,Object(n.a)(Object(n.a)({},this.state[t]),{},Object(l.a)({},e,a.hex)))),"Polygon_style"===t?(i={id:o.this.state.labelId,Polygon_style:o.this.state.Polygon_style},b.a.ModifyPolygon(i)):"Polyline_style"===t?(i={id:o.this.state.labelId,Polyline_style:o.this.state.Polyline_style},b.a.ModifyPolyline(i)):"label_style"===t&&this.onChangeData()}},{key:"render",value:function(){var t=this,a=this.state,l=a.isLoad,o=a.oneLayer,i=a.twoLayer,r=a.layerList,s=a.groupName,c=a.modeASelect,d=a.Pic,u=a.label_style,m=a.oneChange,g=a.twoName,p=a.twoPic,v=a.Polygon_style,y=a.Polyline_style,b=a.ChangeSave,E=a.polygonPicker,w=a.borderPicker,S=a.polylinePicker,C=a.contrastPicker,k=a.labelPicker,T=a.addContrastPicker,P=N()({default:{outer:{position:"relative",marginLeft:"100px",marginTop:"3px"},color:{width:"50px",height:"25px",borderRadius:"2px",background:""},popover:{position:"absolute",zIndex:"2",top:"30px",right:"30px"},cover:{position:"fixed",bottom:"0px",left:"0px",right:"0px",top:"0px"}}});return f.a.createElement(h.Fragment,null,l?f.a.createElement("div",{className:"configShow Map",style:{width:"500px",height:"520px"}},f.a.createElement("div",{className:"configShowNav"},"\u56fe\u5c42\u7ba1\u7406 ",f.a.createElement("i",{onClick:function(){return t.Close()}})),f.a.createElement("div",{className:"configData",style:{height:"360px"}},f.a.createElement("div",{className:"LayerLeft"},f.a.createElement("h1",null,f.a.createElement("button",{onClick:function(){return t.oneClick(1)}},"\u6dfb\u52a0")),f.a.createElement("ul",null,r.length>0&&r.map((function(e,a){return f.a.createElement("li",{key:a,className:"layer",id:"layer"+e.LayerItems.id,onClick:function(){return t.oneClick(2,e)},onContextMenu:function(a){return t.onContextMenu(a,e.LayerItems.id)}},f.a.createElement("span",null,e.LayerItems.group_name),f.a.createElement("div",{className:"Alert_tk",id:"Alert"+e.LayerItems.id,style:{display:"none"}},f.a.createElement("button",{onClick:function(a){return t.twoClick(a,e,1)}},"\u6dfb\u52a0"),0===e.LayerLists.length?f.a.createElement("button",{onClick:function(a){return t.deleteOne(a,e.LayerItems.id)}},"\u5220\u9664"):""),f.a.createElement("ul",{style:{display:"none"}},e.LayerLists.length>0&&e.LayerLists.map((function(e,a){return f.a.createElement("li",{key:a,className:"layer_t",id:"layer_t"+e.id,onClick:function(a){return t.twoClick(a,e,2)},onContextMenu:function(a){return t.onContextMenu1(a,e.id)}},f.a.createElement("span",null,e.layer_name),f.a.createElement("div",{className:"Alert_tk",id:"Alert"+e.id,style:{display:"none"}},f.a.createElement("button",{onClick:function(a){return t.deleteTwo(a,e.id)}},"\u5220\u9664")))}))))})))),o?f.a.createElement("div",{className:"configDataRight LayerRight"},f.a.createElement("li",null,f.a.createElement("span",null,"\u5206\u7ec4\u540d\u79f0\uff1a"),f.a.createElement("input",{type:"text",value:s,onChange:function(e){return t.changeName(e)}})),f.a.createElement("li",null,f.a.createElement("span",null,"\u5206\u7ec4\u56fe\u6807\uff1a"),f.a.createElement("input",{type:"file",ref:this.fileInputEl,accept:".jpg,.jpeg,.png",hidden:!0,onChange:function(e){return t.handlePhoto(e,1)}}),f.a.createElement("em",{onClick:function(){t.fileInputEl.current.click()}},f.a.createElement("img",{src:d,alt:""}))),f.a.createElement("li",null,f.a.createElement("span",null,"\u5206\u7ec4\u5907\u6ce8\uff1a"),f.a.createElement("textarea",{className:"AddTextarea",style:{height:"30px"},defaultValue:"",onChange:this.handleInfo})),f.a.createElement("div",{className:"configBut"},m?f.a.createElement("button",{onClick:function(){return t.changeSaveTag()}},"\u4fee\u6539\u4fdd\u5b58"):f.a.createElement("button",{onClick:function(){return t.saveTag()}},"\u4fdd\u5b58"))):"",i?f.a.createElement("div",{className:"configDataRight"},f.a.createElement("li",null,f.a.createElement("span",null,"\u56fe\u5c42\u540d\u79f0\uff1a"),f.a.createElement("input",{type:"text",value:g,onChange:function(e){return t.changeTwoName(e)}})),f.a.createElement("li",null,f.a.createElement("span",null,"\u4e0a\u56fe\u65b9\u5f0f\uff1a"),f.a.createElement("select",{className:"AddSelect",onChange:function(e){return t.ChangeSelect(e)},value:c},f.a.createElement("option",{value:"label"},"\u6587\u672c"),f.a.createElement("option",{value:"billboard"},"\u56fe\u7247"),f.a.createElement("option",{value:"polyline"},"\u6298\u7ebf"),f.a.createElement("option",{value:"polygon"},"\u591a\u8fb9\u5f62"))),function(){switch(c){case"label":return f.a.createElement("div",null,f.a.createElement("li",null,f.a.createElement("span",null,"\u6807\u6ce8\u6587\u672c\uff1a"),f.a.createElement("input",{type:"text",defaultValue:u.labelName,onChange:function(e){return t.changeLabelName(e)}})),f.a.createElement("li",null,f.a.createElement("span",null,"\u6807\u6ce8\u989c\u8272\uff1a"),f.a.createElement("div",{style:P.outer},f.a.createElement("div",{style:Object(n.a)(Object(n.a)({},P.color),{},{background:u.fontColor}),onClick:t.handlePalette.bind(t,"labelPicker")}),k&&f.a.createElement("div",{style:P.popover},f.a.createElement("div",{style:P.cover,onClick:t.handlePaletteClose.bind(t,"labelPicker")}),f.a.createElement(I.a,{color:u.fontColor,onChange:t.handleChoosePalette.bind(t,"fontColor","label_style")})))),f.a.createElement("li",null,f.a.createElement("span",null,"\u5b57\u4f53\u5927\u5c0f\uff1a"),f.a.createElement("input",{type:"text",defaultValue:u.fontSize,onChange:function(e){return t.changeLabelFontSize(e)}})),f.a.createElement("li",null,f.a.createElement("span",null,"\u662f\u5426\u886c\u8272\uff1a"),f.a.createElement("input",{type:"checkbox",checked:u.isLining,onChange:function(e){return t.handleIsLining(e)}})),f.a.createElement("li",{className:u.isLining?"":"Grayscale"},f.a.createElement("span",null,"\u886c\u8272\u989c\u8272\uff1a"),f.a.createElement("div",{style:P.outer},f.a.createElement("div",{style:Object(n.a)(Object(n.a)({},P.color),{},{background:u.borderColor}),onClick:u.isLining?t.handlePalette.bind(t,"addContrastPicker"):null}),T&&f.a.createElement("div",{style:P.popover},f.a.createElement("div",{style:P.cover,onClick:t.handlePaletteClose.bind(t,"addContrastPicker")}),f.a.createElement(I.a,{color:u.borderColor,onChange:t.handleChoosePalette.bind(t,"borderColor","label_style")})))),f.a.createElement("li",{className:u.isLining?"":"Grayscale"},f.a.createElement("span",null,"\u886c\u8272\u5bbd\u5ea6\uff1a"),f.a.createElement("input",{type:"text",defaultValue:u.borderWitch,disabled:u.isLining?"":"disabled",onChange:function(e){return t.changeLiningBorderWitch(e)}})));case"billboard":return f.a.createElement("div",{className:"LayerRight"},f.a.createElement("li",null,f.a.createElement("span",null,"\u4e0a\u4f20\u56fe\u6807\uff1a"),f.a.createElement("input",{type:"file",ref:t.fileInputEl,accept:".jpg,.jpeg,.png",hidden:!0,onChange:function(e){return t.handlePhoto(e,2)}}),f.a.createElement("em",{onClick:function(){t.fileInputEl.current.click()}},f.a.createElement("img",{src:p,alt:""}))));case"polyline":return f.a.createElement("div",null,f.a.createElement("li",null,f.a.createElement("span",null,"\u6298\u7ebf\u989c\u8272\uff1a"),f.a.createElement("div",{style:P.outer},f.a.createElement("div",{style:Object(n.a)(Object(n.a)({},P.color),{},{background:y.PolylineColor}),onClick:t.handlePalette.bind(t,"polylinePicker")}),S&&f.a.createElement("div",{style:P.popover},f.a.createElement("div",{style:P.cover,onClick:t.handlePaletteClose.bind(t,"polylinePicker")}),f.a.createElement(I.a,{color:y.PolylineColor,onChange:t.handleChoosePalette.bind(t,"PolylineColor","Polyline_style")})))),f.a.createElement("li",null,f.a.createElement("span",null,"\u6298\u7ebf\u5bbd\u5ea6\uff1a"),f.a.createElement("input",{type:"text",defaultValue:y.PolylineWitch,onChange:function(e){return t.changePolylineWitch(e)}})),f.a.createElement("li",null,f.a.createElement("span",null,"\u886c\u8272\u989c\u8272\uff1a"),f.a.createElement("div",{style:P.outer},f.a.createElement("div",{style:Object(n.a)(Object(n.a)({},P.color),{},{background:y.borderColor}),onClick:t.handlePalette.bind(t,"contrastPicker")}),C&&f.a.createElement("div",{style:P.popover},f.a.createElement("div",{style:P.cover,onClick:t.handlePaletteClose.bind(t,"contrastPicker")}),f.a.createElement(I.a,{color:y.borderColor,onChange:t.handleChoosePalette.bind(t,"borderColor","Polyline_style")})))),f.a.createElement("li",null,f.a.createElement("span",null,"\u886c\u8272\u5bbd\u5ea6\uff1a"),f.a.createElement("input",{type:"text",defaultValue:y.borderWitchPolyline,onChange:function(e){return t.changePolylineBorderWitch(e)}})),f.a.createElement("li",null,f.a.createElement("span",null,"\u8fb9\u6846\u900f\u660e\u5ea6\uff1a"),f.a.createElement("input",{type:"range",max:"100",min:"0",defaultValue:y.borderTransparencyPolyline,onInput:function(e){return t.changeBorderTransparency(e)},onChange:function(e){return t.changeBorderTransparency(e)}}),f.a.createElement("i",null,y.borderTransparencyPolyline,"%")));case"polygon":return f.a.createElement("div",null,f.a.createElement("li",null,f.a.createElement("span",null,"\u591a\u8fb9\u5f62\u989c\u8272\uff1a"),f.a.createElement("div",{style:Object(n.a)(Object(n.a)({},P.outer),{},{marginLeft:"115px"})},f.a.createElement("div",{style:Object(n.a)(Object(n.a)({},P.color),{},{background:v.shapeColor}),onClick:t.handlePalette.bind(t,"polygonPicker")}),E&&f.a.createElement("div",{style:P.popover},f.a.createElement("div",{style:P.cover,onClick:t.handlePaletteClose.bind(t,"polygonPicker")}),f.a.createElement(I.a,{color:v.shapeColor,onChange:t.handleChoosePalette.bind(t,"shapeColor","Polygon_style")})))),f.a.createElement("li",null,f.a.createElement("span",null,"\u900f\u660e\u5ea6\uff1a"),f.a.createElement("input",{type:"range",defaultValue:v.shapeTransparency,onChange:function(e){return t.changeShapeTransparency(e)}}),f.a.createElement("i",null,v.shapeTransparency,"%")),f.a.createElement("li",null,f.a.createElement("span",null,"\u8fb9\u6846\u5bbd\u5ea6\uff1a"),f.a.createElement("input",{type:"text",defaultValue:v.borderWitchPolygon,onChange:function(e){return t.ChangeBorderWitchPolygon(e)}})),f.a.createElement("li",null,f.a.createElement("span",null,"\u8fb9\u6846\u989c\u8272\uff1a"),f.a.createElement("div",{style:P.outer},f.a.createElement("div",{style:Object(n.a)(Object(n.a)({},P.color),{},{background:v.borderColor}),onClick:t.handlePalette.bind(t,"borderPicker")}),w&&f.a.createElement("div",{style:Object(n.a)({},P.popover)},f.a.createElement("div",{style:P.cover,onClick:t.handlePaletteClose.bind(t,"borderPicker")}),f.a.createElement(I.a,{color:v.borderColor,onChange:t.handleChoosePalette.bind(t,"borderColor","Polygon_style")})))),f.a.createElement("li",null,f.a.createElement("span",null,"\u8fb9\u6846\u900f\u660e\u5ea6\uff1a"),f.a.createElement("input",{type:"range",defaultValue:v.borderTransparency,onChange:function(e){return t.changeBorderTransparencyPolygon(e)}}),f.a.createElement("i",null,v.borderTransparency,"%")));default:return null}}(),f.a.createElement("div",{className:"configBut"},b?f.a.createElement("button",{onClick:function(){return t.changeSaveTwoTag()}},"\u4fee\u6539\u4fdd\u5b58"):f.a.createElement("button",{onClick:function(){return t.saveTwoTag()}},"\u4fdd\u5b58"),f.a.createElement("button",{onClick:function(){return t.setTag(c)}},"\u7ed8\u5236\u56fe\u5c42"))):"")):"",f.a.createElement("div",{className:"PageShow1 data3Show"},f.a.createElement("div",{className:"PageShowCont"},f.a.createElement("h1",null,"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u561b\uff01"),f.a.createElement("h2",null,f.a.createElement("button",{onClick:function(){return t.PageDeletedData4()}},"\u786e\u5b9a"),f.a.createElement("button",{onClick:function(){return e.PageHide()}},"\u53d6\u6d88")))))}}]),o}(h.PureComponent);t.a=Object(g.b)((function(e){return{adminItem:e.admin.get("adminItem"),adminIndex:e.admin.get("adminIndex")}}),(function(e){return{navClick:function(t,a){e(p.a.nav_click(t,a))}}}))(T)}).call(this,a(18))},368:function(e,t,a){"use strict";(function(e){var n=a(14),l=a(33),o=a(70),i=a(9),r=a(10),s=a(2),c=a(12),d=a(11),u=a(0),m=a.n(u),h=a(16),f=a(21),g=a(5),p=a.n(g),v=a(1),y=a.n(v),b=a(3),E=a(6),w=a.n(E),S=a(28),C=function(t){Object(c.a)(h,t);var a=Object(d.a)(h);function h(t){var n;return Object(i.a)(this,h),(n=a.call(this,t)).ChangeBuild=function(t){t.preventDefault(),console.log(t.target.value),p.a.post(e.Url+"map/floor/list",{build_id:t.target.value}).then((function(e){var t=e.data.data;t?(console.log(t),n.setState({floor:t,floorId:t[0].id})):alert(e.data.msg)})),n.setState({buildId:t.target.value})},n.ChangeFloor=function(e){e.preventDefault(),console.log(e.target.value),n.setState({floorId:e.target.value})},n.state={isLoad:!0,treeList:{},regionName:"",oneInfo:!0,Pid:0,Id:"",addChange:!1,twoInfo:!1,twoImport:!1,SaveId:"",isIndoor:!1,build:{},buildId:"",floor:{},floorId:"",SHP:"",DBF:"",gridName:"",labelId:"",TwoItem:!0,TwoItemTwo:!1,gridStyle:{color:"#436eee",colorTransparency:50,borderWidth:"1",borderColor:"#ff0000",borderTransparency:50},tableList:{},deleteName:"\u5220\u9664",deleteId:"",gridPicker:!1,borderPicker:!1},h.this=Object(s.a)(n),n.Close=n.Close.bind(Object(s.a)(n)),n.onContextMenu=n.onContextMenu.bind(Object(s.a)(n)),n.addInfo=n.addInfo.bind(Object(s.a)(n)),n.saveInfo=n.saveInfo.bind(Object(s.a)(n)),n.onMenuClicked=n.onMenuClicked.bind(Object(s.a)(n)),n.deleteInfo=n.deleteInfo.bind(Object(s.a)(n)),n.importInfo=n.importInfo.bind(Object(s.a)(n)),n.saveTwoTag=n.saveTwoTag.bind(Object(s.a)(n)),n.navItemClick=n.navItemClick.bind(Object(s.a)(n)),n.saveSure=n.saveSure.bind(Object(s.a)(n)),n.onReset=n.onReset.bind(Object(s.a)(n)),n.PageDeletedData4=n.PageDeletedData4.bind(Object(s.a)(n)),n}return Object(r.a)(h,[{key:"Close",value:function(){this.setState({isLoad:!1}),this.state.treeList.forEach((function(e){b.a.Emptyentities({id:e.id})}))}},{key:"componentDidMount",value:function(){this.onLoad(),document.oncontextmenu=function(){return!1}}},{key:"onLoad",value:function(){var t=this,a=[];p.a.get(e.Url+"grid/region/list").then((function(n){var l=n.data.data;l?(a=l,console.log(a),p.a.post(e.Url+"grid/info/list").then((function(n){var l=n.data.data;l?(console.log(l),l.forEach((function(e){var t={id:e.id,pid:e.region_id,region_name:e.grid_name,node_type:"details",position:e.position,indoor:e.indoor,build_id:e.build_id,floor_id:e.floor_id,children:[],grid_style:e.grid_style,geom:e.geom};a.push(t)})),t.setState({treeList:a}),e.GridTree=a,console.log(a)):alert(n.data.msg)}))):alert(n.data.msg)}))}},{key:"AnalyticFormat",value:function(e){return function e(t,a){for(var n,l=[],o=0;o<t.length;o++)t[o].pid===a&&(n=e(t,t[o].id),t[o].children=n,l.push(t[o]));return l}(e,"0")}},{key:"generateMenu",value:function(e){var t=this,a=[];if(e instanceof Array){var n,l=[],i=Object(o.a)(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;l.push(this.generateMenu(r))}}catch(s){i.e(s)}finally{i.f()}a.push(m.a.createElement("ul",{key:"single"},l))}else{if(null==e)return;a.push(m.a.createElement("li",{key:e.id,className:"layer",id:"layer"+e.id,onContextMenu:"details"===e.node_type?function(e){return t.onContextMenu1(e)}:function(a){return t.onContextMenu(a,e.id)}},m.a.createElement("span",{onClick:"details"===e.node_type?function(a){return t.onMenuClicked(a,e,1)}:function(a){return t.onMenuClicked(a,e,2)}},function(){switch(e.node_type){case"group":return m.a.createElement("i",{className:"group"});case"grid":return m.a.createElement("i",{className:"grid"});case"details":return m.a.createElement("i",{className:"details"});default:return null}}(),e.region_name),this.generateMenu(e.children),m.a.createElement("div",{className:"Alert_tk",id:"Alert"+e.id,style:{display:"none"}},function(){switch(e.node_type){case"group":return m.a.createElement("div",null,m.a.createElement("button",{onClick:function(a){return t.addInfo(a,2,e.id)}},"\u6dfb\u52a0"),m.a.createElement("button",{onClick:function(a){return t.addInfo(a,3,e)}},"\u4fee\u6539"),e.children.length<1?m.a.createElement("button",{onClick:function(a){return t.deleteInfo(a,e.id)}},"\u5220\u9664"):"",m.a.createElement("button",{onClick:function(a){return t.importInfo(a,e)}},"\u5bfc\u5165"));case"grid":return m.a.createElement("div",null,m.a.createElement("button",{onClick:function(a){return t.addInfo(a,3,e)}},"\u4fee\u6539"),m.a.createElement("button",{onClick:function(a){return t.onReset(a,e.id)}},"\u91cd\u7f6e"));default:return null}}())))}return a}},{key:"onMenuClicked",value:function(e,t,a){console.log(t),e.stopPropagation(),b.a.HeavyHaulMod();var n=y()(e.target).next();if(n.css("display","none"===n.css("display")?"block":"none"),y()("#layer"+t.id).parents().find("span").css({color:"#fff",fontWeight:"100"}),y()("#layer"+t.id).find("span").css({color:"#54b2df",fontWeight:"bold"}),y()("#layer"+t.id).siblings().find("span").css({color:"#fff",fontWeight:"100"}),y()("#layer"+t.id).children().find("span").css({color:"#fff",fontWeight:"100"}),y()(".layer_t").find("span").css({color:"#fff",fontWeight:"100"}),y()(".layer").find(".Alert_tk").css("display","none"),this.state.treeList.forEach((function(e){b.a.Emptyentities({id:e.id})})),t.indoor){var l={id:t.id};console.log(t.id),b.a.CoordinateModelID(l)}if(1===a){var o={style:t.grid_style,gridList:t.geom.coordinates,flyTo:!0,id:t.id};b.a.showGrid(o),h.this.setState({twoInfo:!0,oneInfo:!1,twoImport:!1,gridName:t.region_name,gridStyle:t.grid_style,labelId:t.id,TwoItem:!0,TwoItemTwo:!1}),y()(".TwoDataNav").find("span:last-child").removeClass("cur"),y()(".TwoDataNav").find("span:first-child").addClass("cur")}else if(2===a){if(console.log(t),"grid"!==t.node_type)return;if(t.children.length>0)for(var i=0;i<t.children.length;i++){var r={style:t.children[i].grid_style,gridList:t.children[i].geom.coordinates,flyTo:!0,id:t.children[i].id};b.a.showGrid(r)}}}},{key:"onContextMenu",value:function(e,t){e.stopPropagation(),console.log(t),y()("#layer"+t).parents().find("span").css({color:"#fff",fontWeight:"100"}),y()("#layer"+t).find("span").css({color:"#54b2df",fontWeight:"bold"}),y()("#layer"+t).siblings().find("span").css({color:"#fff",fontWeight:"100"}),y()("#layer"+t).children().find("span").css({color:"#fff",fontWeight:"100"}),y()(".layer_t").find("span").css({color:"#fff",fontWeight:"100"}),y()(".layer").find(".Alert_tk").css("display","none"),y()("#layer"+t).find("#Alert"+t).css("display","block")}},{key:"onContextMenu1",value:function(e){e.stopPropagation(),y()(".layer").find(".Alert_tk").css("display","none")}},{key:"addInfo",value:function(e,t,a){y()(".layer").find(".Alert_tk").css("display","none"),e.stopPropagation(),this.setState({Pid:a,oneInfo:!0,regionName:"",addChange:!1,twoInfo:!1,twoImport:!1}),1===t?console.log("\u9876\u7ea7\u6dfb\u52a0"):2===t?console.log("\u5b50\u7ea7\u6dfb\u52a0"):3===t&&this.setState({Pid:a.pid,regionName:a.region_name,addChange:!0,Id:a.id})}},{key:"saveInfo",value:function(t){var a=this;1===t?this.state.regionName?p.a.post(e.Url+"grid/region/add",{region_name:h.this.state.regionName,pid:h.this.state.Pid}).then((function(t){var n=t.data.data;n?(console.log(n),y()(".PageShow").show().find("h1").html("\u6dfb\u52a0\u6210\u529f!"),e.Time(),a.onLoad(),a.setState({regionName:"",Pid:0})):alert(t.data.msg)})):(y()(".PageShow").show().find("h1").html("\u8bf7\u5148\u8f93\u5165\u7f51\u683c\u540d\u79f0!"),e.Time()):2===t&&p.a.post(e.Url+"grid/region/update",{region_name:h.this.state.regionName,id:h.this.state.Id,pid:h.this.state.Pid}).then((function(t){var n=t.data.data;n?(console.log(n),y()(".PageShow").show().find("h1").html("\u4fee\u6539\u6210\u529f!"),e.Time(),a.setState({addChange:!1}),a.onLoad(),a.setState({regionName:"",Pid:0})):alert(t.data.msg)}))}},{key:"deleteInfo",value:function(e,t){e.stopPropagation(),h.this.setState({deleteName:"\u5220\u9664",deleteId:t}),y()(".data4Show").show().find("h1").html("\u60a8\u786e\u5b9a\u8981\u5220\u9664\u5417\uff1f")}},{key:"onReset",value:function(e,t){e.stopPropagation(),h.this.setState({deleteName:"\u91cd\u7f6e",deleteId:t}),y()(".data4Show").show().find("h1").html("\u60a8\u786e\u5b9a\u8981\u91cd\u7f6e\u5417")}},{key:"PageDeletedData4",value:function(){var t=this;y()(".data4Show").hide();var a=this.state,n=a.deleteName,l=a.deleteId;"\u5220\u9664"===n?p.a.post(e.Url+"grid/region/delete",{id:l}).then((function(a){var n=a.data.data;n?(console.log(n),y()(".PageShow").show().find("h1").html("\u5220\u9664\u6210\u529f!"),e.Time(),t.onLoad(),b.a.HeavyHaulMod()):alert(a.data.msg)})):p.a.post(e.Url+"grid/region/reset",{id:l}).then((function(a){var n=a.data.data;n?(console.log(n),y()(".PageShow").show().find("h1").html("\u91cd\u7f6e\u6210\u529f!"),e.Time(),t.onLoad(),b.a.HeavyHaulMod()):alert(a.data.msg)}))}},{key:"importInfo",value:function(e,t){y()(".layer").find(".Alert_tk").css("display","none"),e.stopPropagation(),console.log(t),this.setState({oneInfo:!1,twoInfo:!1,twoImport:!0,SaveId:t.id})}},{key:"importFile",value:function(t){var a=t.target.files,n=new FormData;console.log(a[1],a[0]),n.append("shp",a[1]),n.append("dbf",a[0]),this.setState({SHP:a[1],DBF:a[0]});var l={url:e.Url+"grid/info/analysisSHP",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:n,dataType:"JSON"};console.log(n),y.a.ajax(l).done((function(e){console.log(e);var t=e.data;if(t){var a={style:h.this.state.gridStyle,gridList:t};console.log(t,h.this.state.gridStyle,a),b.a.PreviewGrid(a)}else alert(e.msg)}))}},{key:"changeRegionName",value:function(e){this.setState({regionName:e.target.value})}},{key:"handleIsIndoor",value:function(t){var a=this;this.setState((function(e){return{isIndoor:!e.isIndoor}})),this.state.isIndoor?this.setState({build:{},buildValue:"",buildId:"",floor:{},floorValue:"",floorId:""}):p.a.get(e.Url+"map/build/list").then((function(t){var n=t.data.data;n?(console.log(n),a.setState({build:n,buildId:n[0].id}),p.a.post(e.Url+"map/floor/list",{build_id:n[0].id}).then((function(e){var t=e.data.data;t?(console.log(t),a.setState({floor:t,floorId:t[0].id})):alert(e.data.msg)}))):alert(t.data.msg)}))}},{key:"onChangeData",value:function(){setTimeout((function(){var e=h.this.state,t={ids:[e.labelId],style:e.gridStyle};b.a.modifyGrid(t)}),10)}},{key:"ChangeColor",value:function(e){var t=h.this.state.gridStyle;t.color=e.target.value,h.this.setState(t),this.onChangeData()}},{key:"changeColorTransparency",value:function(e){var t=h.this.state.gridStyle;t.colorTransparency=e.target.value,h.this.setState(t),this.onChangeData()}},{key:"ChangeBorderWidth",value:function(e){var t=h.this.state.gridStyle;t.borderWidth=e.target.value,h.this.setState(t),this.onChangeData()}},{key:"changeBorderColor",value:function(e){var t=h.this.state.gridStyle;t.borderColor=e.target.value,h.this.setState(t),this.onChangeData()}},{key:"changeBorderTransparency",value:function(e){var t=h.this.state.gridStyle;t.borderTransparency=e.target.value,h.this.setState(t),this.onChangeData()}},{key:"GridName",value:function(e){h.this.setState({gridName:e.target.value})}},{key:"saveTwoTag",value:function(){var t=this.state,a=t.SaveId,n=t.SHP,l=t.DBF,o=t.isIndoor,i=t.buildId,r=t.floorId,s=t.gridStyle;console.log(a,n,l,o,i,r,s,s.color);var c=new FormData;if(c.append("shp",n),c.append("dbf",l),c.append("region_id",a),c.append("indoor",o),c.append("build_id",i),c.append("floor_id",r),c.append("grid_style",JSON.stringify(s)),console.log(c),n){var d={url:e.Url+"grid/info/upload",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:c,dataType:"JSON"};y.a.ajax(d).done((function(t){console.log(t);var a=t.data;a?(console.log(a),y()(".PageShow").show().find("h1").html("\u4fdd\u5b58\u6210\u529f!"),e.Time(),p.a.post(e.Url+"grid/info/list").then((function(t){var a=t.data.data;a?(console.log(a),h.this.onLoad(),h.this.setState({regionName:"",Pid:0,oneInfo:!0,twoInfo:!1,twoImport:!1})):(y()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))):(y()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}else y()(".PageShow").show().find("h1").html("\u8bf7\u5148\u9009\u62e9\u6570\u636e!"),e.Time()}},{key:"navItemClick",value:function(t){if(1===t)h.this.setState({TwoItem:!0,TwoItemTwo:!1}),y()(".TwoDataNav").find("span:last-child").removeClass("cur"),y()(".TwoDataNav").find("span:first-child").addClass("cur");else if(2===t){h.this.setState({TwoItem:!1,TwoItemTwo:!0}),y()(".TwoDataNav").find("span:last-child").addClass("cur"),y()(".TwoDataNav").find("span:first-child").removeClass("cur");var a=[];p.a.post(e.Url+"device/category/categoryByGrid",{id:h.this.state.labelId}).then((function(t){var n=t.data.data;n?(console.log(n),a=n,p.a.post(e.Url+"device/info/deviceByGrid",{id:h.this.state.labelId}).then((function(t){var n=t.data.data;n?(a.forEach((function(e){e.subsets=[]})),n.forEach((function(e){a.forEach((function(t){e.category_name===t.category_name&&t.subsets.push(e)}))})),console.log(a),h.this.setState({tableList:a})):(y()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))):(y()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}}},{key:"saveSure",value:function(){var t=this.state,a=t.gridName,n=t.labelId,l=t.gridStyle;p.a.post(e.Url+"grid/info/update",{id:n,grid_name:a,grid_style:l}).then((function(t){var a=t.data.data;a?(console.log(a),h.this.onLoad(),y()(".PageShow").show().find("h1").html("\u4fee\u6539\u6210\u529f!"),e.Time()):(y()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"handlePalette",value:function(e){this.setState(Object(l.a)({},e,!this.state[e]))}},{key:"handlePaletteClose",value:function(e){this.setState(Object(l.a)({},e,!1))}},{key:"handleChoosePalette",value:function(e,t,a){this.setState(Object(l.a)({},t,Object(n.a)(Object(n.a)({},this.state[t]),{},Object(l.a)({},e,a.hex)))),this.onChangeData()}},{key:"render",value:function(){var t=this,a=this.state,l=a.isLoad,o=a.treeList,i=a.regionName,r=a.oneInfo,s=a.addChange,c=a.twoInfo,d=a.twoImport,h=a.isIndoor,f=a.buildId,g=a.build,p=a.floorId,v=a.floor,y=a.gridStyle,b=a.gridName,E=a.TwoItem,C=a.TwoItemTwo,k=a.tableList,N=a.gridPicker,I=a.borderPicker,T=w()({default:{outer:{position:"relative",marginLeft:"80px",marginTop:"3px"},color:{width:"50px",height:"25px",borderRadius:"2px",background:""},popover:{position:"absolute",zIndex:"2",top:"30px",right:"30px"},cover:{position:"fixed",bottom:"0px",left:"0px",right:"0px",top:"0px"}}});return m.a.createElement(u.Fragment,null,l?m.a.createElement("div",{className:"configShow",style:{width:"530px"}},m.a.createElement("div",{className:"configShowNav"},"\u7f51\u683c\u6a21\u5f0f",m.a.createElement("i",{onClick:function(){return t.Close()}})),m.a.createElement("div",{className:"configData",style:{height:"400px"}},m.a.createElement("div",{className:"LayerLeftNew"},m.a.createElement("div",{className:"LeftList"},m.a.createElement("div",{className:"LeftListTitle"},m.a.createElement("button",{onClick:function(e){return t.addInfo(e,1,0)}},"\u6dfb\u52a0\u4fe1\u606f")),m.a.createElement("div",{className:"TreeList"},m.a.createElement("ul",null,this.generateMenu(this.AnalyticFormat(o)))))),m.a.createElement("div",{className:"configDataRight LayerRight",style:{width:"279px"}},r?m.a.createElement("div",null,m.a.createElement("li",null,m.a.createElement("span",null,"\u7f51\u683c\u540d\u79f0\uff1a"),m.a.createElement("input",{type:"text",value:i,onChange:function(e){return t.changeRegionName(e)}})),m.a.createElement("div",{className:"configBut"},s?m.a.createElement("button",{onClick:function(){return t.saveInfo(2)}},"\u4fee\u6539\u4fdd\u5b58"):m.a.createElement("button",{onClick:function(){return t.saveInfo(1)}},"\u4fdd\u5b58"))):"",d?m.a.createElement("div",null,m.a.createElement("div",{className:"LeftListTitle",style:{marginLeft:"15px"}},m.a.createElement("input",{type:"file",name:"filename",multiple:"multiple",onChange:function(e){return t.importFile(e)}}),m.a.createElement("button",null,"\u9009\u53d6\u6570\u636e")),m.a.createElement("div",{className:"AddImport"},m.a.createElement("div",{className:"PositionFloor"},m.a.createElement("span",null,m.a.createElement("label",null,"\u5ba4\u5185\uff1a"),m.a.createElement("input",{type:"checkbox",checked:h,onChange:function(e){return t.handleIsIndoor(e)}})),m.a.createElement("span",null,m.a.createElement("select",{defaultValue:f,onChange:this.ChangeBuild},g.length>0&&g.map((function(e,t){return m.a.createElement("option",{key:t,value:e.id},e.build_name)})))),m.a.createElement("span",null,m.a.createElement("select",{defaultValue:p,onChange:this.ChangeFloor},v.length>0&&v.map((function(e,t){return m.a.createElement("option",{key:t,value:e.id},e.floor_name)}))))),m.a.createElement("li",null,m.a.createElement("span",null,"\u7f51\u683c\u6837\u5f0f")),m.a.createElement("li",null,m.a.createElement("span",null,"\u7f51\u683c\u989c\u8272\uff1a"),m.a.createElement("div",{style:T.outer},m.a.createElement("div",{style:Object(n.a)(Object(n.a)({},T.color),{},{background:y.color}),onClick:this.handlePalette.bind(this,"gridPicker")}),N&&m.a.createElement("div",{style:T.popover},m.a.createElement("div",{style:T.cover,onClick:this.handlePaletteClose.bind(this,"gridPicker")}),m.a.createElement(S.a,{color:y.color,onChange:this.handleChoosePalette.bind(this,"color","gridStyle")})))),m.a.createElement("li",null,m.a.createElement("span",null,"\u900f\u660e\u5ea6\uff1a"),m.a.createElement("input",{type:"range",max:"100",min:"0",defaultValue:y.colorTransparency,onChange:function(e){return t.changeColorTransparency(e)}}),m.a.createElement("i",null,y.colorTransparency,"%")),m.a.createElement("li",null,m.a.createElement("span",null,"\u8fb9\u6846\u5bbd\u5ea6\uff1a"),m.a.createElement("input",{type:"text",defaultValue:y.borderWidth,onChange:function(e){return t.ChangeBorderWidth(e)}})),m.a.createElement("li",null,m.a.createElement("span",null,"\u8fb9\u6846\u989c\u8272\uff1a"),m.a.createElement("div",{style:T.outer},m.a.createElement("div",{style:Object(n.a)(Object(n.a)({},T.color),{},{background:y.borderColor}),onClick:this.handlePalette.bind(this,"borderPicker")}),I&&m.a.createElement("div",{style:T.popover},m.a.createElement("div",{style:T.cover,onClick:this.handlePaletteClose.bind(this,"borderPicker")}),m.a.createElement(S.a,{color:y.borderColor,onChange:this.handleChoosePalette.bind(this,"borderColor","gridStyle")})))),m.a.createElement("li",null,m.a.createElement("span",null,"\u900f\u660e\u5ea6\uff1a"),m.a.createElement("input",{type:"range",max:"100",min:"0",defaultValue:y.borderTransparency,onChange:function(e){return t.changeBorderTransparency(e)}}),m.a.createElement("i",null,y.borderTransparency,"%"))),m.a.createElement("div",{className:"configBut"},m.a.createElement("button",{onClick:function(){return t.saveTwoTag()}},"\u4fdd\u5b58"))):"",c?m.a.createElement("div",null,m.a.createElement("div",{className:"TwoDataNav"},m.a.createElement("span",{className:"cur",onClick:function(){return t.navItemClick(1)}},"\u7f51\u683c\u4fe1\u606f"),m.a.createElement("span",{onClick:function(){return t.navItemClick(2)}},"\u7f51\u683c\u8bbe\u5907")),m.a.createElement("div",{className:"one"},E?m.a.createElement("div",null,m.a.createElement("div",{className:"AddImport one"},m.a.createElement("li",null,m.a.createElement("span",null,"\u7f51\u683c\u540d\u79f0\uff1a"),m.a.createElement("input",{type:"text",value:b,onChange:function(e){return t.GridName(e)}})),m.a.createElement("li",null,m.a.createElement("span",null,"\u7f51\u683c\u989c\u8272\uff1a"),m.a.createElement("div",{style:T.outer},m.a.createElement("div",{style:Object(n.a)(Object(n.a)({},T.color),{},{background:y.color}),onClick:this.handlePalette.bind(this,"gridPicker")}),N&&m.a.createElement("div",{style:T.popover},m.a.createElement("div",{style:T.cover,onClick:this.handlePaletteClose.bind(this,"gridPicker")}),m.a.createElement(S.a,{color:y.color,onChange:this.handleChoosePalette.bind(this,"color","gridStyle")})))),m.a.createElement("li",null,m.a.createElement("span",null,"\u900f\u660e\u5ea6\uff1a"),m.a.createElement("input",{type:"range",max:"100",min:"0",value:y.colorTransparency,onChange:function(e){return t.changeColorTransparency(e)}}),m.a.createElement("i",null,y.colorTransparency,"%")),m.a.createElement("li",null,m.a.createElement("span",null,"\u8fb9\u6846\u5bbd\u5ea6\uff1a"),m.a.createElement("input",{type:"text",value:y.borderWidth,onChange:function(e){return t.ChangeBorderWidth(e)}})),m.a.createElement("li",null,m.a.createElement("span",null,"\u8fb9\u6846\u989c\u8272\uff1a"),m.a.createElement("div",{style:T.outer},m.a.createElement("div",{style:Object(n.a)(Object(n.a)({},T.color),{},{background:y.borderColor}),onClick:this.handlePalette.bind(this,"borderPicker")}),I&&m.a.createElement("div",{style:T.popover},m.a.createElement("div",{style:T.cover,onClick:this.handlePaletteClose.bind(this,"borderPicker")}),m.a.createElement(S.a,{color:y.borderColor,onChange:this.handleChoosePalette.bind(this,"borderColor","gridStyle")})))),m.a.createElement("li",null,m.a.createElement("span",null,"\u900f\u660e\u5ea6\uff1a"),m.a.createElement("input",{type:"range",max:"100",min:"0",value:y.borderTransparency,onChange:function(e){return t.changeBorderTransparency(e)}}),m.a.createElement("i",null,y.borderTransparency,"%"))),m.a.createElement("div",{className:"configBut"},m.a.createElement("button",{onClick:function(){return t.saveSure()}},"\u786e\u5b9a"))):"",C?m.a.createElement("div",{className:"AddImport two"},m.a.createElement("div",{className:"GridNav"},k.length>0&&k.map((function(e,t){return m.a.createElement("li",{key:t},e.category_name)}))),m.a.createElement("div",{className:"GridNavTable"},m.a.createElement("table",null,m.a.createElement("thead",null,m.a.createElement("tr",null,m.a.createElement("th",null,"\u7c7b\u578b"),m.a.createElement("th",null,"\u540d\u79f0"))),m.a.createElement("tbody",null,k.length>0&&k.map((function(e,t){return m.a.createElement(u.Fragment,{key:t},e.subsets.length>0&&e.subsets.map((function(e,t){return m.a.createElement("tr",{key:t},m.a.createElement("td",null,e.device_type),m.a.createElement("td",null,e.device_name))})))})))))):"")):""))):"",m.a.createElement("div",{className:"PageShow1 data4Show"},m.a.createElement("div",{className:"PageShowCont"},m.a.createElement("h1",null,"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u561b\uff01"),m.a.createElement("h2",null,m.a.createElement("button",{onClick:function(){return t.PageDeletedData4()}},"\u786e\u5b9a"),m.a.createElement("button",{onClick:function(){return e.PageHide()}},"\u53d6\u6d88")))))}}]),h}(u.PureComponent);t.a=Object(h.b)((function(e){return{adminItem:e.admin.get("adminItem"),adminIndex:e.admin.get("adminIndex")}}),(function(e){return{navClick:function(t,a){e(f.a.nav_click(t,a))}}}))(C)}).call(this,a(18))},369:function(e,t,a){"use strict";(function(e){var n=a(9),l=a(10),o=a(2),i=a(12),r=a(11),s=a(0),c=a.n(s),d=a(16),u=a(21),m=a(5),h=a.n(m),f=a(1),g=a.n(f),p=a(3),v=function(t){Object(i.a)(d,t);var a=Object(r.a)(d);function d(e){var t;return Object(n.a)(this,d),(t=a.call(this,e)).changeSurfaceName=function(e){t.setState({SurfaceName:e.target.value})},t.changeSurfaceNumber=function(e){t.setState({SurfaceNumber:e.target.value})},t.state={isLoad:!0,treeList:[],SurfaceName:"",positions:[],SurfaceNumber:"10",removeId:""},d.this=Object(o.a)(t),t.underModel=t.underModel(),t.underList=t.underList.bind(Object(o.a)(t)),t.Polygon=t.Polygon.bind(Object(o.a)(t)),t.onContextMenu=t.onContextMenu.bind(Object(o.a)(t)),t.Save=t.Save.bind(Object(o.a)(t)),t.deleted=t.deleted.bind(Object(o.a)(t)),t.NavClick=t.NavClick.bind(Object(o.a)(t)),t.Close=t.Close.bind(Object(o.a)(t)),t}return Object(l.a)(d,[{key:"underModel",value:function(){h.a.get(e.Url+"map/under/list").then((function(t){var a=t.data.data;if(a){console.log(a),g()("#liu").css({display:"block"}),p.a.UndergroundInspection({buildList:a}),g()("#liu").find(".configShowNav").find("span").html("\u5730\u4e0b\u5ba4");var n={result:a,number:1};p.a.returnData(n)}else g()(".PageShow").show().find("h1").html(t.msg),e.Time()}))}},{key:"underList",value:function(){var t=this;h.a.get(e.Url+"map/modify/list").then((function(a){var n=a.data.data;if(n){if(console.log(n),t.setState({treeList:n}),n.length>0)for(var l=0;l<n.length;l++);}else g()(".PageShow").show().find("h1").html(a.msg),e.Time()}))}},{key:"Polygon",value:function(){p.a.removePit(),p.a.DiggingTerrain()}},{key:"componentDidMount",value:function(){this.underList(),document.oncontextmenu=function(){return!1},window.receiveMessageFromIndex=function(e){if(void 0!==e)switch(e.data.switchName){case"DiggingTerrain":console.log(e.data),d.this.setState({positions:e.data.positions.positions});break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1)}},{key:"onContextMenu",value:function(e,t){e.stopPropagation(),g()("#liTest"+t).find(".Alert_tk").css({display:"block",color:"#50a4f4"}),g()("#liTest"+t).siblings().find(".Alert_tk").css({display:"none",color:"#fff"})}},{key:"Save",value:function(){var t=this.state,a=t.SurfaceName,n=t.positions,l=t.SurfaceNumber;if(console.log(n),a)if(n.length<=0)g()(".PageShow").show().find("h1").html("\u8bf7\u5148\u8fdb\u884c\u7ed8\u5236\uff01"),e.Time();else{var o={modify_name:a,options:{height:l,position:n}};console.log(o),h.a.post(e.Url+"map/modify/add",o).then((function(t){var a=t.data.data;a?(g()(".PageShow").show().find("h1").html("\u4fdd\u5b58\u6210\u529f\uff01"),e.Time(),console.log(a),d.this.underList()):(g()(".PageShow").show().find("h1").html(t.msg),e.Time())}))}else g()(".PageShow").show().find("h1").html("\u8bf7\u8f93\u5165\u5730\u5f62\u540d\u79f0\uff01"),e.Time()}},{key:"deleted",value:function(e){g()(".data5Show").show(),d.this.setState({removeId:e})}},{key:"PageDeletedData5",value:function(){g()(".data5Show").hide(),h.a.post(e.Url+"map/modify/delete",{id:d.this.state.removeId}).then((function(t){var a=t.data.data;a?(console.log(a),g()(".PageShow").show().find("h1").html("\u5220\u9664\u6210\u529f\uff01"),e.Time(),d.this.underList(),p.a.removePit(),g()(".configDataLeft").find("ul").find(".Alert_tk").css({display:"none",color:"#fff"})):(g()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"NavClick",value:function(e){p.a.ExhibitionPit(e.options.position),g()("#liTest"+e.id).find(".Alert_tk").css({display:"block",color:"#50a4f4"}),g()("#liTest"+e.id).siblings().find(".Alert_tk").css({display:"none",color:"#fff"})}},{key:"Close",value:function(){this.setState({isLoad:!1}),p.a.BuildingShow({show:!0}),g()("#LiuClose").click()}},{key:"render",value:function(){var t=this,a=this.state,n=a.isLoad,l=a.treeList,o=a.SurfaceName,i=a.SurfaceNumber;return c.a.createElement(s.Fragment,null,n?c.a.createElement("div",{className:"configShow Map",style:{width:"500px",height:"400px"},onLoad:function(){return t.underModel()}},c.a.createElement("div",{className:"configShowNav"},"\u5730\u4e0b\u6a21\u5f0f",c.a.createElement("i",{onClick:function(){return t.Close()}})),c.a.createElement("div",{className:"configData"},c.a.createElement("div",{className:"configDataLeft"},c.a.createElement("ul",{style:{marginTop:"20px"}},l.length>0&&l.map((function(e,a){return c.a.createElement("li",{key:a,id:"liTest"+e.id,onClick:function(){return t.NavClick(e)},onContextMenu:function(a){return t.onContextMenu(a,e.id)}},e.modify_name,c.a.createElement("div",{className:"Alert_tk",style:{display:"none"}},c.a.createElement("button",{className:"undefindList",onClick:function(){return t.deleted(e.id)}},"\u5220\u9664")))})),l.length<0?c.a.createElement("span",null,"\u6682\u65e0\u6570\u636e"):null)),c.a.createElement("div",{className:"configDataRight",style:{width:"319px"}},c.a.createElement("div",{className:"Underground"},c.a.createElement("li",null,c.a.createElement("span",null,"\u5730\u5f62\u540d\u79f0:"),c.a.createElement("input",{type:"text",onChange:function(e){return t.changeSurfaceName(e)},value:o})),c.a.createElement("li",null,c.a.createElement("span",null,"\u5f00\u6316\u6df1\u5ea6:"),c.a.createElement("input",{type:"number",onChange:function(e){return t.changeSurfaceNumber(e)},value:i}),"(\u7c73)"),c.a.createElement("li",null,c.a.createElement("button",{onClick:function(){return t.Polygon()}},"\u7ed8\u5236\u591a\u8fb9\u5f62"),c.a.createElement("button",{onClick:function(){return t.Save()}},"\u4fdd\u5b58")))))):"",c.a.createElement("div",{className:"PageShow1 data5Show"},c.a.createElement("div",{className:"PageShowCont"},c.a.createElement("h1",null,"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u561b\uff01"),c.a.createElement("h2",null,c.a.createElement("button",{onClick:function(){return t.PageDeletedData5()}},"\u786e\u5b9a"),c.a.createElement("button",{onClick:function(){return e.PageHide()}},"\u53d6\u6d88")))))}}]),d}(s.PureComponent);t.a=Object(d.b)((function(e){return{adminItem:e.admin.get("adminItem"),adminIndex:e.admin.get("adminIndex")}}),(function(e){return{navClick:function(t,a){e(u.a.nav_click(t,a))}}}))(v)}).call(this,a(18))},370:function(e,t,a){"use strict";var n=a(9),l=a(10),o=a(2),i=a(12),r=a(11),s=a(0),c=a.n(s),d=a(16),u=a(21),m=a(371),h=a(372),f=a(373),g=a(374),p=a(3),v=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var l;return Object(n.a)(this,a),(l=t.call(this,e)).state={nav:!0,navItem:0},l.navItemClick=l.navItemClick.bind(Object(o.a)(l)),a.this=Object(o.a)(l),l}return Object(l.a)(a,[{key:"navItemClick",value:function(e){this.setState({nav:!1,navItem:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.nav,n=t.navItem,l=this.props,o=l.adminItem,i=l.navClick,r=l.adminIndex;return c.a.createElement(s.Fragment,null,c.a.createElement("li",{key:"4",className:4===o?"cur":"",onClick:function(){return i(4,1)}},"\u8bbe\u5907\u914d\u7f6e"),c.a.createElement("div",null,4===o&&a?c.a.createElement("div",{className:"navItem"},c.a.createElement("li",{className:1===n?"cur":"",onClick:function(){return e.navItemClick(1)}},"\u7c7b\u522b\u7ba1\u7406"),c.a.createElement("li",{className:2===n?"cur":"",onClick:function(){return e.navItemClick(2)}},"\u8bbe\u5907\u4e0a\u56fe"),c.a.createElement("li",{className:3===n?"cur":"",onClick:function(){return e.navItemClick(3)}},"\u5b9a\u4f4d\u4e0a\u56fe"),c.a.createElement("li",{className:4===n?"cur":"",onClick:function(){return e.navItemClick(4)}},"\u76d1\u533a\u4e0a\u56fe")):"",1===r&&1===n?c.a.createElement(m.a,null):"",1===r&&2===n?c.a.createElement(h.a,null):"",1===r&&3===n?c.a.createElement(f.a,null):"",1===r&&4===n?c.a.createElement(g.a,null):""))}}]),a}(s.PureComponent);t.a=Object(d.b)((function(e){return{adminItem:e.admin.get("adminItem"),adminIndex:e.admin.get("adminIndex")}}),(function(e){return{navClick:function(t,a){p.a.Close(),e(u.a.nav_click(t,a)),v.this.setState({navItem:0}),4===t&&v.this.setState({nav:!0})}}}))(v)},371:function(e,t,a){"use strict";(function(e){var n=a(14),l=a(47),o=a.n(l),i=a(69),r=a(9),s=a(10),c=a(2),d=a(12),u=a(11),m=a(0),h=a.n(m),f=a(16),g=a(5),p=a.n(g),v=a(22),y=a.n(v),b=a(1),E=a.n(b),w=function(t){Object(d.a)(l,t);var a=Object(u.a)(l);function l(e){var t;return Object(r.a)(this,l),(t=a.call(this,e)).deviceTypeName=function(e){t.setState({typeName:e.target.value})},t.handlePhoto=function(){var e=Object(i.a)(o.a.mark((function e(a,n){var l,i,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(i=new FileReader).readAsDataURL(a.target.files[0]),r=Object(c.a)(t),i.onload=function(e){l=e.target.result,1===n?(console.log(1),r.setState({uploadedFileGetUrl:l})):2===n?(console.log(2),r.setState({typeIcon:l})):3===n&&(console.log(3),r.setState({mapIcon:l}))};case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),t.deviceName=function(e){t.setState({mapDeviceName:e.target.value})},t.deviceIntentName=function(e){t.setState({mapDeviceIntent:e.target.value})},t.handleIsEnable=function(e){t.setState((function(e){return{isEnable:!e.isEnable}}))},t.handleInfo=function(e){t.setState({addRemark:e.target.value})},t.handleStyle=function(e){t.setState({mapStyle:JSON.parse(e.target.value)})},t.handleAddEnable=function(e){t.setState((function(e){return{addEnable:!e.addEnable}}))},t.state={isLoading:!1,List:{},enable:!1,Save:!1,One:!0,OneAdd:!1,uploadedFileGetUrl:y.a,mapDeviceName:"",mapDeviceIntent:"",isEnable:!1,Two:!1,TwoAdd:!1,TwoChange:!1,TwoName:"",typeName:"",typeIcon:y.a,mapIcon:y.a,addEnable:!1,mapType:{ls:[{value:"model",text:"\u6a21\u578b"},{value:"point",text:"\u70b9"},{value:"polyline",text:"\u6298\u7ebf"},{value:"polygon",text:"\u591a\u8fb9\u5f62\u9762"},{value:"wall",text:"\u7acb\u4f53\u5899"}],value:"model",text:"\u6a21\u578b"},mapStyle:"",addRemark:"",addTitle:"",deleteNum:"",deleteId:""},l.this=Object(c.a)(t),t.fileInputEl=h.a.createRef(),t.fileInputEl1=h.a.createRef(),t.ListClick=t.ListClick.bind(Object(c.a)(t)),t.Edit=t.Edit.bind(Object(c.a)(t)),t.Save=t.Save.bind(Object(c.a)(t)),t.handleCheck=t.handleCheck.bind(Object(c.a)(t)),t.Add=t.Add.bind(Object(c.a)(t)),t.deviceSave=t.deviceSave.bind(Object(c.a)(t)),t.deviceSave1=t.deviceSave1.bind(Object(c.a)(t)),t.deviceSave2=t.deviceSave2.bind(Object(c.a)(t)),t.handlePhoto=t.handlePhoto.bind(Object(c.a)(t)),t.deviceName=t.deviceName.bind(Object(c.a)(t)),t.handleIsEnable=t.handleIsEnable.bind(Object(c.a)(t)),t.ReturnOne=t.ReturnOne.bind(Object(c.a)(t)),t.deviceTypeName=t.deviceTypeName.bind(Object(c.a)(t)),t.selectChange=t.selectChange.bind(Object(c.a)(t)),t.handleInfo=t.handleInfo.bind(Object(c.a)(t)),t.handleStyle=t.handleStyle.bind(Object(c.a)(t)),t.handleAddEnable=t.handleAddEnable.bind(Object(c.a)(t)),t.TwoListClick=t.TwoListClick.bind(Object(c.a)(t)),t.clickDeleted=t.clickDeleted.bind(Object(c.a)(t)),t.PageDeletedDevice=t.PageDeletedDevice.bind(Object(c.a)(t)),"model"===t.state.mapType.value?t.state.mapStyle={url:"$serverURL$/gltf/qiangji.gltf",height:3,scale:2}:"point"===t.state.mapType.value?t.state.mapStyle="2":"polyline"===t.state.mapType.value?t.state.mapStyle="3":"polygon"===t.state.mapType.value?t.state.mapStyle="4":"wall"===t.state.mapType.value&&(t.state.mapStyle="5"),t}return Object(s.a)(l,[{key:"componentDidMount",value:function(){this.onDevice(),document.oncontextmenu=function(){return!1}}},{key:"onDevice",value:function(){var t=this;p.a.post(e.Url+"device/category/list").then((function(a){var n=a.data.data;n?(console.log(n),t.setState({List:n,isLoading:!0})):(E()(".PageShow").show().find("h1").html(a.data.msg),e.Time())}))}},{key:"Edit",value:function(e){this.setState({Save:!0,enable:!0,OneAdd:!1}),2===e&&this.setState({TwoAdd:!1,TwoChange:!1})}},{key:"handleCheck",value:function(e,t){console.log(e,t);var a=!t;console.log(a),this.setState({List:this.state.List.map((function(t,l){return t.id===e?Object(n.a)(Object(n.a)({},t),{},{enable:a}):t}))})}},{key:"Save",value:function(t){for(var a=this,n=this.state.List,l=[],o=0;o<n.length;o++){var i={id:n[o].id,enable:n[o].enable};l.push(i)}2===t?p.a.post(e.Url+"device/type/updateEnable",l).then((function(t){var n=t.data.data;n?(console.log(n),a.setState({Save:!1,enable:!1})):(E()(".PageShow").show().find("h1").html(t.data.msg),e.Time())})):p.a.post(e.Url+"device/category/updateEnable",l).then((function(t){var n=t.data.data;n?(console.log(n),a.setState({Save:!1,enable:!1})):(E()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"Add",value:function(e){2===e?(console.log(2),this.setState({TwoAdd:!0,TwoChange:!1,typeName:"",typeIcon:y.a,mapIcon:y.a,addEnable:!1,mapType:{ls:[{value:"model",text:"\u6a21\u578b"},{value:"point",text:"\u70b9"},{value:"polyline",text:"\u6298\u7ebf"},{value:"polygon",text:"\u591a\u8fb9\u5f62\u9762"},{value:"wall",text:"\u7acb\u4f53\u5899"}],value:"model",text:"\u6a21\u578b"},mapStyle:"",addRemark:""}),"model"===this.state.mapType.value?this.setState({mapStyle:{url:"$serverURL$/gltf/qiangji.gltf",height:3,scale:2}}):"point"===this.state.mapType.value?this.setState({mapStyle:2}):"polyline"===this.state.mapType.value?this.setState({mapStyle:3}):"polygon"===this.state.mapType.value?this.setState({mapStyle:4}):"wall"===this.state.mapType.value&&this.setState({mapStyle:5})):this.setState({OneAdd:!0,uploadedFileGetUrl:y.a,mapDeviceName:"",isEnable:!1})}},{key:"deviceSave",value:function(t,a,n,l){var o=this;t===y.a?(E()(".PageShow").show().find("h1").html("\u8bf7\u9009\u62e9\u56fe\u7247!"),e.Time()):a?n?p.a.post(e.Url+"device/category/add",{category_icon:t,category_name:a,category_intent:n,enable:l,remark:a}).then((function(t){t.data.data?(o.onDevice(),o.setState({OneAdd:!1})):(E()(".PageShow").show().find("h1").html(t.data.msg),e.Time())})):(E()(".PageShow").show().find("h1").html("\u8bf7\u8f93\u5165\u8bbe\u5907\u6807\u8bc6!"),e.Time()):(E()(".PageShow").show().find("h1").html("\u8bf7\u8f93\u5165\u8bbe\u5907\u540d\u79f0!"),e.Time())}},{key:"ListClick",value:function(t,a){var n=this;console.log(t),sessionStorage.setItem("categoryId",t),this.setState({One:!1,Two:!0,OneAdd:!1,TwoName:a}),p.a.post(e.Url+"device/type/list",{category_id:t}).then((function(t){var a=t.data.data;a?(console.log(a),n.setState({List:a})):(E()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"ReturnOne",value:function(){this.onDevice(),this.setState({One:!0,OneAdd:!1,OneName:"",Two:!1,TwoAdd:!1,TwoChange:!1})}},{key:"selectChange",value:function(e){e.preventDefault(),console.log(e.target);var t=e.target.options[e.target.selectedIndex],a=t.value,n=t.text,o={ls:this.state.mapType.ls,value:a,text:n};this.setState({mapType:o}),"model"===o.value?l.this.setState({mapStyle:{url:"$serverURL$/gltf/qiangji.gltf",height:3,scale:2}}):"point"===o.value?l.this.setState({mapStyle:"2"}):"polyline"===o.value?l.this.setState({mapStyle:"3"}):"polygon"===o.value?l.this.setState({mapStyle:"4"}):"wall"===o.value&&l.this.setState({mapStyle:"5"})}},{key:"NavList",value:function(){var t=this,a=sessionStorage.getItem("categoryId");p.a.post(e.Url+"device/type/list",{category_id:a}).then((function(a){var n=a.data.data;n?(console.log(n),t.setState({List:n})):(E()(".PageShow").show().find("h1").html(a.data.msg),e.Time())}))}},{key:"deviceSave1",value:function(t,a,n,l,o,i,r){var s=this,c=JSON.stringify(o);if(console.log(c),t)if(a===y.a)E()(".PageShow").show().find("h1").html("\u8bf7\u9009\u62e9\u7c7b\u578b\u56fe\u6807!"),e.Time();else if(n===y.a)E()(".PageShow").show().find("h1").html("\u8bf7\u9009\u62e9\u5c55\u793a\u56fe\u6807!"),e.Time();else{console.log(t,a,n,l,o,i,r);var d=sessionStorage.getItem("categoryId");p.a.post(e.Url+"device/type/add",{type_name:t,type_icon:a,category_id:d,map_icon:n,map_type:l,map_style:o,remark:t,enable:r}).then((function(t){t.data.data?(s.NavList(),s.setState({TwoAdd:!1})):(E()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}else E()(".PageShow").show().find("h1").html("\u8bf7\u8f93\u5165\u7c7b\u578b\u540d\u79f0!"),e.Time()}},{key:"deviceSave2",value:function(t,a,n,l,o,i,r){var s=this;if(t)if(a===y.a)E()(".PageShow").show().find("h1").html("\u8bf7\u9009\u62e9\u7c7b\u578b\u56fe\u6807!"),e.Time();else if(n===y.a)E()(".PageShow").show().find("h1").html("\u8bf7\u9009\u62e9\u5c55\u793a\u56fe\u6807!"),e.Time();else{console.log(t,a,n,l,o,i,r);var c=sessionStorage.getItem("changeId");console.log(o),p.a.post(e.Url+"device/type/update",{type_name:t,type_icon:a,id:c,map_icon:n,map_type:l,map_style:o,remark:t,enable:r}).then((function(t){t.data.data?(s.NavList(),s.setState({TwoAdd:!1,TwoChange:!1})):(E()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}else E()(".PageShow").show().find("h1").html("\u8bf7\u8f93\u5165\u7c7b\u578b\u540d\u79f0!"),e.Time()}},{key:"TwoListClick",value:function(t,a){var n=this;console.log(t),this.setState({TwoChange:!0,TwoAdd:!1,typeName:a}),p.a.post(e.Url+"device/type",{id:t}).then((function(a){var l=a.data.data;l?(console.log(l),sessionStorage.setItem("changeId",t),n.setState({typeName:l.type_name,typeIcon:l.type_icon,mapIcon:l.map_icon,addEnable:l.enable,mapType:{ls:[{value:"model",text:"\u6a21\u578b"},{value:"point",text:"\u70b9"},{value:"polyline",text:"\u6298\u7ebf"},{value:"polygon",text:"\u591a\u8fb9\u5f62\u9762"},{value:"wall",text:"\u7acb\u4f53\u5899"}],value:l.map_type,text:"\u6a21\u578b"},mapStyle:l.map_style,addRemark:l.remark,addTitle:l.type_name})):(E()(".PageShow").show().find("h1").html(a.data.msg),e.Time())}))}},{key:"onContextMenu",value:function(e,t){1===t?(E()("#test"+e).find(".Alert").css("display","block"),E()("#test"+e).siblings().find(".Alert").css("display","none")):2===t&&(E()("#testTwo"+e).find(".Alert").css("display","block"),E()("#testTwo"+e).siblings().find(".Alert").css("display","none"))}},{key:"clickDeleted",value:function(e,t,a){e.stopPropagation(),E()(".device1Show").show(),l.this.setState({deleteNum:a,deleteId:t})}},{key:"PageDeletedDevice",value:function(){var t=this;E()(".device1Show").hide();var a=this.state,n=a.deleteNum,l=a.deleteId;1===n?p.a.post(e.Url+"device/category/delete",{id:l}).then((function(a){var n=a.data.data;n?(console.log(n),E()(".PageShow").show().find("h1").html("\u5220\u9664\u6210\u529f!"),e.Time(),t.onDevice()):(E()(".PageShow").show().find("h1").html(a.data.msg),e.Time())})):2===n&&p.a.post(e.Url+"device/type/delete",{id:l}).then((function(a){var n=a.data.data;n?(console.log(n),t.NavList()):(E()(".PageShow").show().find("h1").html(a.data.msg),e.Time())}))}},{key:"render",value:function(){var t=this,a=this.state,n=a.isLoading,l=a.List,o=a.enable,i=a.Save,r=a.One,s=a.OneAdd,c=a.uploadedFileGetUrl,d=a.mapDeviceName,u=a.isEnable,f=a.Two,g=a.TwoName,p=a.TwoAdd,v=a.typeName,b=a.typeIcon,E=a.mapIcon,w=a.addEnable,S=a.mapType,C=a.mapStyle,k=a.addRemark,N=a.addTitle,I=a.TwoChange,T=a.mapDeviceIntent,P=this.props.navClick;return h.a.createElement(m.Fragment,null,n?h.a.createElement("div",null,r?h.a.createElement("div",{className:"configShow",style:{width:"500px"}},h.a.createElement("div",{className:"configShowNav"},"\u7c7b\u522b\u7ba1\u7406 ",h.a.createElement("i",{onClick:function(){return P(100)}})),h.a.createElement("div",{className:"configShowConent"},h.a.createElement("h1",{className:"cur"},"\u8bbe\u5907\u7c7b\u522b"),h.a.createElement("div",{className:"device"},l.length>0&&l.map((function(e,a){return h.a.createElement("li",{key:a,className:e.enable?"":"Grayscale",onClick:o?"":function(){return t.ListClick(e.id,e.category_name)},id:"test"+e.id,onContextMenu:function(){return t.onContextMenu(e.id,1)}},h.a.createElement("img",{src:e.category_icon,alt:""}),h.a.createElement("span",null,e.category_name),o?e.enable?h.a.createElement("input",{type:"checkbox",value:e.category_name||!1,readOnly:!0,checked:"checked",onChange:function(){return t.handleCheck(e.id,e.enable)}}):h.a.createElement("input",{type:"checkbox",value:e.category_name||!1,readOnly:!0,onChange:function(){return t.handleCheck(e.id,e.enable)}}):"",h.a.createElement("div",{className:"Alert",style:{display:"none"}},h.a.createElement("button",{onClick:function(a){return t.clickDeleted(a,e.id,1)}},"\u5220\u9664")))})),o?"":h.a.createElement("li",{onClick:function(){return t.Add(1)}},h.a.createElement("img",{src:y.a,alt:""}),"\u6dfb\u52a0")),h.a.createElement("div",{className:"configBut"},i?h.a.createElement("button",{onClick:function(){return t.Save(1)}},"\u4fdd\u5b58"):h.a.createElement("button",{onClick:function(){return t.Edit(1)}},"\u7f16\u8f91")))):"",s?h.a.createElement("div",{className:"configShow Basic",style:{marginLeft:"520px"}},h.a.createElement("div",{className:"configShowNav"},"\u8bbe\u5907\u6dfb\u52a0 ",h.a.createElement("i",{onClick:function(){return P(101)}})),h.a.createElement("div",{className:"configShowConent"},h.a.createElement("div",{className:"configShowConent_cont DevicePic"},h.a.createElement("li",null,h.a.createElement("span",null,"\u8bbe\u5907\u56fe\u6807\uff1a"),h.a.createElement("input",{type:"file",ref:this.fileInputEl,accept:".jpg,.jpeg,.png",hidden:!0,onChange:function(e){return t.handlePhoto(e,1)}}),h.a.createElement("em",{onClick:function(){t.fileInputEl.current.click()}},h.a.createElement("img",{src:c,alt:""}))),h.a.createElement("li",null,h.a.createElement("span",null,"\u8bbe\u5907\u540d\u79f0\uff1a"),h.a.createElement("input",{type:"text",value:d,onChange:function(e){return t.deviceName(e)}})),h.a.createElement("li",null,h.a.createElement("span",null,"\u8bbe\u5907\u6807\u8bc6\uff1a"),h.a.createElement("input",{type:"text",value:T,onChange:function(e){return t.deviceIntentName(e)}})),h.a.createElement("li",null,h.a.createElement("span",null,"\u72b6\u6001\uff1a"),h.a.createElement("input",{type:"checkbox",checked:u,onChange:function(){return t.handleIsEnable()}}))),h.a.createElement("div",{className:"configBut",style:{marginTop:"35px"}},h.a.createElement("button",{onClick:function(){return t.deviceSave(c,d,T,u)}},"\u6dfb\u52a0"),h.a.createElement("button",{onClick:function(){return P(101)}},"\u5173\u95ed")))):"",f?h.a.createElement("div",{className:"configShow",style:{width:"500px"}},h.a.createElement("div",{className:"configShowNav"},"\u7c7b\u522b\u7ba1\u7406 ",h.a.createElement("i",{onClick:function(){return P(100)}})),h.a.createElement("div",{className:"configShowConent"},h.a.createElement("h1",{className:"cur"},h.a.createElement("em",{onClick:function(){return t.ReturnOne()}},"\u8bbe\u5907\u7c7b\u522b")," >> ",g),h.a.createElement("div",{className:"device"},l.length>0&&l.map((function(e,a){return h.a.createElement("li",{key:a,className:e.enable?"":"Grayscale",onClick:o?"":function(){return t.TwoListClick(e.id,e.type_name)},id:"testTwo"+e.id,onContextMenu:function(){return t.onContextMenu(e.id,2)}},h.a.createElement("img",{src:e.type_icon,alt:""}),h.a.createElement("span",null,e.type_name),o?e.enable?h.a.createElement("input",{type:"checkbox",value:e.type_name||!1,readOnly:!0,checked:"checked",onChange:function(){return t.handleCheck(e.id,e.enable)}}):h.a.createElement("input",{type:"checkbox",value:e.type_name||!1,readOnly:!0,onChange:function(){return t.handleCheck(e.id,e.enable)}}):"",h.a.createElement("div",{className:"Alert",style:{display:"none"}},h.a.createElement("button",{onClick:function(a){return t.clickDeleted(a,e.id,2)}},"\u5220\u9664")))})),o?"":h.a.createElement("li",{onClick:function(){return t.Add(2)}},h.a.createElement("img",{src:y.a,alt:""}),"\u6dfb\u52a0")),h.a.createElement("div",{className:"configBut"},i?h.a.createElement("button",{onClick:function(){return t.Save(2)}},"\u4fdd\u5b58"):h.a.createElement("button",{onClick:function(){return t.Edit(2)}},"\u7f16\u8f91")))):"",p?h.a.createElement("div",{className:"configShow Basic",style:{marginLeft:"520px"}},h.a.createElement("div",{className:"configShowNav"},g,"\u6dfb\u52a0 ",h.a.createElement("i",{onClick:function(){return P(101)}})),h.a.createElement("div",{className:"configShowConent"},h.a.createElement("div",{className:"configShowConent_cont DevicePic"},h.a.createElement("li",null,h.a.createElement("span",null,"\u7c7b\u578b\u540d\u79f0\uff1a"),h.a.createElement("input",{type:"text",value:v,onChange:function(e){return t.deviceTypeName(e)}})),h.a.createElement("li",null,h.a.createElement("span",null,"\u7c7b\u578b\u56fe\u6807\uff1a"),h.a.createElement("input",{type:"file",ref:this.fileInputEl,accept:".jpg,.jpeg,.png",hidden:!0,onChange:function(e){return t.handlePhoto(e,2)}}),h.a.createElement("em",{onClick:function(){t.fileInputEl.current.click()}},h.a.createElement("img",{style:{marginLeft:"0"},src:b,alt:""}))),h.a.createElement("li",null,h.a.createElement("span",null,"\u5c55\u793a\u56fe\u6807\uff1a"),h.a.createElement("input",{type:"file",ref:this.fileInputEl1,accept:".jpg,.jpeg,.png",hidden:!0,onChange:function(e){return t.handlePhoto(e,3)}}),h.a.createElement("em",{onClick:function(){t.fileInputEl1.current.click()}},h.a.createElement("img",{style:{marginLeft:"0"},src:E,alt:""}))),h.a.createElement("li",null,h.a.createElement("span",null,"\u5c55\u793a\u65b9\u5f0f\uff1a"),h.a.createElement("select",{onChange:this.selectChange,className:"AddSelect",value:S.value},S.ls.map((function(e,t){return h.a.createElement("option",{key:"op"+t,index:t,value:e.value},e.text)})))),h.a.createElement("li",null,h.a.createElement("span",null,"\u4e0a\u56fe\u53c2\u6570\uff1a"),h.a.createElement("textarea",{className:"AddTextarea",value:JSON.stringify(C),onChange:this.handleStyle})),h.a.createElement("li",null,h.a.createElement("span",null,"\u5907\u6ce8\uff1a"),h.a.createElement("textarea",{className:"AddTextarea",style:{height:"30px"},defaultValue:k,onChange:this.handleInfo})),h.a.createElement("li",null,h.a.createElement("span",null,"\u72b6\u6001\uff1a"),h.a.createElement("input",{type:"checkbox",checked:w,onChange:function(e){return t.handleAddEnable(e)}}))),h.a.createElement("div",{className:"configBut",style:{marginTop:"35px"}},h.a.createElement("button",{onClick:function(){return t.deviceSave1(v,b,E,S.value,C,k,w)}},"\u6dfb\u52a0"),h.a.createElement("button",{onClick:function(){return P(101)}},"\u5173\u95ed")))):"",I?h.a.createElement("div",{className:"configShow Basic",style:{marginLeft:"520px"}},h.a.createElement("div",{className:"configShowNav"},N,"\u4fee\u6539 ",h.a.createElement("i",{onClick:function(){return P(101)}})),h.a.createElement("div",{className:"configShowConent"},h.a.createElement("div",{className:"configShowConent_cont DevicePic"},h.a.createElement("li",null,h.a.createElement("span",null,"\u7c7b\u578b\u540d\u79f0\uff1a"),h.a.createElement("input",{type:"text",value:v,onChange:function(e){return t.deviceTypeName(e)}})),h.a.createElement("li",null,h.a.createElement("span",null,"\u7c7b\u578b\u56fe\u6807\uff1a"),h.a.createElement("input",{type:"file",ref:this.fileInputEl,accept:".jpg,.jpeg,.png",hidden:!0,onChange:function(e){return t.handlePhoto(e,2)}}),h.a.createElement("em",{onClick:function(){t.fileInputEl.current.click()}},h.a.createElement("img",{style:{marginLeft:"0"},src:b,alt:""}))),h.a.createElement("li",null,h.a.createElement("span",null,"\u5c55\u793a\u56fe\u6807\uff1a"),h.a.createElement("input",{type:"file",ref:this.fileInputEl1,accept:".jpg,.jpeg,.png",hidden:!0,onChange:function(e){return t.handlePhoto(e,3)}}),h.a.createElement("em",{onClick:function(){t.fileInputEl1.current.click()}},h.a.createElement("img",{style:{marginLeft:"0"},src:E,alt:""}))),h.a.createElement("li",null,h.a.createElement("span",null,"\u5c55\u793a\u65b9\u5f0f\uff1a"),h.a.createElement("select",{onChange:this.selectChange,className:"AddSelect",value:S.value},S.ls.map((function(e,t){return h.a.createElement("option",{key:"op"+t,index:t,value:e.value},e.text)})))),h.a.createElement("li",null,h.a.createElement("span",null,"\u4e0a\u56fe\u53c2\u6570\uff1a"),h.a.createElement("textarea",{className:"AddTextarea",value:JSON.stringify(C),onChange:this.handleStyle})),h.a.createElement("li",null,h.a.createElement("span",null,"\u5907\u6ce8\uff1a"),h.a.createElement("textarea",{className:"AddTextarea",style:{height:"30px"},defaultValue:k,onChange:this.handleInfo})),h.a.createElement("li",null,h.a.createElement("span",null,"\u72b6\u6001\uff1a"),h.a.createElement("input",{type:"checkbox",checked:w,onChange:function(e){return t.handleAddEnable(e)}}))),h.a.createElement("div",{className:"configBut",style:{marginTop:"35px"}},h.a.createElement("button",{onClick:function(){return t.deviceSave2(v,b,E,S.value,C,k,w)}},"\u4fee\u6539"),h.a.createElement("button",{onClick:function(){return P(101)}},"\u5173\u95ed")))):""):"",h.a.createElement("div",{className:"PageShow1 device1Show"},h.a.createElement("div",{className:"PageShowCont"},h.a.createElement("h1",null,"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u561b\uff01"),h.a.createElement("h2",null,h.a.createElement("button",{onClick:function(){return t.PageDeletedDevice()}},"\u786e\u5b9a"),h.a.createElement("button",{onClick:function(){return e.PageHide()}},"\u53d6\u6d88")))))}}]),l}(m.PureComponent);t.a=Object(f.b)(null,(function(){return{navClick:function(e){console.log(e),w.this.setState({One:!1,OneAdd:!1,Two:!1,TwoAdd:!1,TwoChange:!1}),101===e&&(w.this.state.OneAdd?w.this.setState({One:!0,OneAdd:!1,Two:!1,TwoAdd:!1,TwoChange:!1}):w.this.setState({One:!1,Two:!0,OneAdd:!1,TwoAdd:!1,TwoChange:!1}))}}}))(w)}).call(this,a(18))},372:function(e,t,a){"use strict";(function(e){var n=a(70),l=a(9),o=a(10),i=a(2),r=a(12),s=a(11),c=a(0),d=a.n(c),u=a(16),m=a(1),h=a.n(m),f=a(5),g=a.n(f),p=a(3),v=function(t){Object(r.a)(u,t);var a=Object(s.a)(u);function u(t){var n;return Object(l.a)(this,u),(n=a.call(this,t)).handleChange=function(t,a,n,l){console.log(a,n,l),null===a&&(h()(".PageShow").show().find("h1").html("\u8bf7\u9009\u62e9\u8bbe\u5907\u7c7b\u578b!"),e.Time()),h()(".ADDpIC").find("dl.dl"+a).css({opacity:"1"}),h()(".ADDpIC").find("dl.dl"+a).siblings("dl").css({opacity:"0.6"}),u.this.setState({TypeId:a,mapStyle:n,mapType:l})},n.ChangeBuild=function(t){t.preventDefault(),console.log(t.target.value),g.a.post(e.Url+"map/floor/list",{build_id:t.target.value}).then((function(t){var a=t.data.data;a?(console.log(a),u.this.setState({floor:a,floorId:a[0].id})):(h()(".PageShow").show().find("h1").html(t.data.msg),e.Time())})),u.this.setState({buildId:t.target.value})},n.ChangeFloor=function(e){e.preventDefault(),console.log(e.target.value),u.this.setState({floorId:e.target.value})},n.ChangeON=function(e){e.preventDefault(),console.log(e.target.value),u.this.setState({searchOn:e.target.value})},u.this=Object(i.a)(n),n.state={isLoading:!1,List:{},One:!0,Two:!1,TwoName:!1,TwoTree:{},ZZListBtu:!0,SBList:!0,SBTable:!1,changeName:"",OneFile:"",tableList:{},ShowPic:!1,ShowPosition:!1,PicList:{},TypeId:"",mapStyle:{},mapType:"",typeName:"",X:"",Y:"",Z:"",H:"",modelId:"",indoor:!1,build:{},buildId:"",floor:{},floorId:"",searchName:"",searchOn:"",geom:{},deleteName:"\u4e0a\u56fe",deleteId:"",deviceCode:"",isShow:!1},n.ListClick=n.ListClick.bind(Object(i.a)(n)),n.onContextMenu=n.onContextMenu.bind(Object(i.a)(n)),n.ReturnOne=n.ReturnOne.bind(Object(i.a)(n)),n.onMenuClicked=n.onMenuClicked.bind(Object(i.a)(n)),n.listName=n.listName.bind(Object(i.a)(n)),n.changeList=n.changeList.bind(Object(i.a)(n)),n.changeSureList=n.changeSureList.bind(Object(i.a)(n)),n.AddTwoList=n.AddTwoList.bind(Object(i.a)(n)),n.DeleteList=n.DeleteList.bind(Object(i.a)(n)),n.importFile=n.importFile.bind(Object(i.a)(n)),n.AddPic=n.AddPic.bind(Object(i.a)(n)),n.Close=n.Close.bind(Object(i.a)(n)),n.handleChange=n.handleChange.bind(Object(i.a)(n)),n.SureLiu=n.SureLiu.bind(Object(i.a)(n)),n.ChangeX=n.ChangeX.bind(Object(i.a)(n)),n.ChangeY=n.ChangeY.bind(Object(i.a)(n)),n.ChangeZ=n.ChangeZ.bind(Object(i.a)(n)),n.ChangeH=n.ChangeH.bind(Object(i.a)(n)),n.handleIsIndoor=n.handleIsIndoor.bind(Object(i.a)(n)),n.ChangeBuild=n.ChangeBuild.bind(Object(i.a)(n)),n.ChangeFloor=n.ChangeFloor.bind(Object(i.a)(n)),n.ChangeON=n.ChangeON.bind(Object(i.a)(n)),n.SaveLiu=n.SaveLiu.bind(Object(i.a)(n)),n.DeletePic=n.DeletePic.bind(Object(i.a)(n)),n.Delete=n.Delete.bind(Object(i.a)(n)),n.ChangeEdit=n.ChangeEdit.bind(Object(i.a)(n)),n.SBName=n.SBName.bind(Object(i.a)(n)),n.Search=n.Search.bind(Object(i.a)(n)),n.PageDeleted1=n.PageDeleted1.bind(Object(i.a)(n)),n.deviceLocation=n.deviceLocation.bind(Object(i.a)(n)),n}return Object(o.a)(u,[{key:"componentDidMount",value:function(){this.onDevice(),document.oncontextmenu=function(){return!1},window.receiveMessageFromIndex=function(e){if(void 0!==e)switch(console.log(e.data),e.data.switchName){case"getCameraView":console.log(e.data.cv),sessionStorage.setItem("center",this.JSON.stringify(e.data.cv,null,4));break;case"dragModleV2":sessionStorage.setItem("Center",this.JSON.stringify(e.data.style)),u.this.setState({ShowPosition:!0,X:this.JSON.stringify(e.data.style.position.x),Y:this.JSON.stringify(e.data.style.position.y),Z:this.JSON.stringify(e.data.style.position.z),H:this.JSON.stringify(e.data.style.position.heading),geom:e.data.style.geom});break;case"dragModleV2Start":u.this.setState({ShowPosition:!1,X:"",Y:"",Z:"",H:""});break;case"dragModleV2Model":u.this.setState({modelId:e.data.modelid});break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1)}},{key:"onDevice",value:function(){g.a.post(e.Url+"device/category/list",{enable:!0}).then((function(t){var a=t.data.data;a?(console.log(a),u.this.setState({isLoading:!0,List:a})):(h()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"onContextMenu",value:function(e,t){e.stopPropagation(),h()("#addAlert"+t).parents().find(".Alert").css("display","none"),h()("#addAlert"+t).parents().find("h2").find("input").css("display","none"),h()("#addAlert"+t).parents().find(".Alert").find(".cur1").css("display","none"),h()("#addAlert"+t).siblings().find(".Alert").css("display","none"),h()("#addAlert"+t).children().find(".Alert").find(".cur1").css("display","none"),h()("#addAlert"+t).find("#Alert"+t).css("display","block"),h()("#addAlert"+t).parents().find("h2").css({fontWeight:"400",color:"#fff"}),h()("#addAlert"+t).find("h2").css({fontWeight:"bold",color:"#268ae4"}),h()("#addAlert"+t).children().find("h2").css({fontWeight:"400",color:"#fff"}),h()("#addAlert"+t).siblings().find("h2").css({fontWeight:"400",color:"#fff"})}},{key:"ReturnOne",value:function(){this.onDevice(),u.this.setState({One:!0,Two:!1,TwoName:""})}},{key:"ListClick",value:function(t,a){var n=this;u.this.setState({One:!1,Two:!0,TwoName:a,TwoTree:{},tableList:{},SBTable:!1}),sessionStorage.setItem("TwoId",t),sessionStorage.removeItem("ReginId"),g.a.post(e.Url+"device/region/list",{category_id:t}).then((function(t){var a=t.data.data;a?(console.log(a),0===a.length?u.this.setState({ZZListBtu:!0,SBList:!1}):(u.this.setState({ZZListBtu:!1,SBList:!0,TwoTree:a}),n.RightTableList())):(h()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"onMenuClicked",value:function(t,a){t.stopPropagation();var n=h()(t.target).next();n.css("display","none"===n.css("display")?"block":"none"),h()("#addAlert"+a).parents().find("h2").css({fontWeight:"400",color:"#fff"}),h()("#addAlert"+a).parents().find("input").css({display:"none"}),h()("#addAlert"+a).find("h2").css({fontWeight:"bold",color:"#268ae4"}),h()("#addAlert"+a).children().find("h2").css({fontWeight:"400",color:"#fff"}),h()("#addAlert"+a).siblings().find("h2").css({fontWeight:"400",color:"#fff"}),h()("#addAlert"+a).parents().find(".Alert").css("display","none"),h()("#addAlert"+a).parents().find("h2").find("input").css("display","none"),h()("#addAlert"+a).parents().find(".Alert").find(".cur1").css("display","none"),h()("#addAlert"+a).siblings().find(".Alert").css("display","none"),h()("#addAlert"+a).children().find(".Alert").find(".cur1").css("display","none"),h()("#addAlert"+a).find("#Alert"+a).css("display","none"),sessionStorage.setItem("ReginId",a);var l={region_id:a,category_id:sessionStorage.getItem("TwoId")};""!==l.region_id&&l.region_id||(l={category_id:sessionStorage.getItem("TwoId")}),console.log(l),g.a.post(e.Url+"device/info/list",l).then((function(t){var a=t.data.data;a?(console.log(a),u.this.setState({tableList:a})):(h()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"listName",value:function(e){e.stopPropagation(),u.this.setState({changeName:e.target.value})}},{key:"changeList",value:function(e,t){e.stopPropagation(),h()("#addAlert"+t).parents().find("input").css("display","none"),h()("#addAlert"+t).find("input").css("display","block"),h()("#addAlert"+t).children().find("li").find("input").css("display","none"),h()("#addAlert"+t).find(".Alert").find(".cur1").css("display","block")}},{key:"changeSureList",value:function(t,a,n,l){var o=this;t.stopPropagation(),console.log(a,n,l),g.a.post(e.Url+"device/region/update",{id:a,region_name:n,pid:l}).then((function(t){var n=t.data.data;h()("#addAlert"+a).find("h2").find("input").css("display","none"),h()("#addAlert"+a).find(".Alert").find(".cur1").css("display","none"),h()("#addAlert"+a).find(".Alert").css("display","none"),n?(console.log(n),u.this.setState({TwoTree:n}),o.generateMenu(o.state.TwoTree),o.publicList()):(h()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"generateMenu",value:function(e){var t=this,a=[],l=this.state.changeName;if(e instanceof Array){var o,i=[],r=Object(n.a)(e);try{for(r.s();!(o=r.n()).done;){var s=o.value;i.push(this.generateMenu(s))}}catch(c){r.e(c)}finally{r.f()}a.push(d.a.createElement("ul",{key:"single"},i))}else{if(null==e)return;a.push(d.a.createElement("li",{key:e.id,className:"addAlert",id:"addAlert"+e.id,onContextMenu:function(a){return t.onContextMenu(a,e.id)}},d.a.createElement("h2",{onClick:function(a){return t.onMenuClicked(a,e.id)},title:e.region_name},e.region_name),d.a.createElement("input",{type:"text",style:{display:"none"},defaultValue:e.region_name,onFocus:function(e){return e.stopPropagation()},onChange:function(e){return t.listName(e)}}),this.generateMenu(e.children),d.a.createElement("div",{className:"Alert",id:"Alert"+e.id,style:{display:"none"}},d.a.createElement("button",{onClick:function(a){return t.changeList(a,e.id)}},"\u4fee\u6539"),d.a.createElement("button",{className:"cur1",style:{display:"none"},onClick:function(a){return t.changeSureList(a,e.id,l,e.pid)}},"\u786e\u5b9a"),d.a.createElement("button",{onClick:function(a){return t.AddTwoList(a,e.id,"\u65b0\u5efa\u6587\u4ef6",e.pid)}},"\u6dfb\u52a0"),e.children?"":d.a.createElement("button",{onClick:function(a){return t.DeleteList(a,e.id)}},"\u5220\u9664"))))}return a}},{key:"publicList",value:function(){var t=this;g.a.post(e.Url+"device/region/list",{category_id:sessionStorage.getItem("TwoId")}).then((function(a){var n=a.data.data;n?(console.log(n),u.this.setState({TwoTree:n}),0===n.length?u.this.setState({ZZListBtu:!0,SBList:!1}):(u.this.setState({ZZListBtu:!1,SBList:!0,TwoTree:n}),t.RightTableList())):(h()(".PageShow").show().find("h1").html(a.data.msg),e.Time())}))}},{key:"AddTwoList",value:function(t,a,n,l){var o=this;t.stopPropagation(),console.log(n,l),h()("#addAlert"+a).find("h2").find("input").css("display","none"),h()("#addAlert"+a).find(".Alert").find(".cur1").css("display","none"),h()("#addAlert"+a).find(".Alert").css("display","none"),g.a.post(e.Url+"device/region/add",{category_id:sessionStorage.getItem("TwoId"),region_name:n,pid:a}).then((function(t){var a=t.data.data;a?(console.log(a),o.publicList()):(h()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"DeleteList",value:function(t,a){var n=this;t.stopPropagation(),h()("#addAlert"+a).find("h2").find("input").css("display","none"),h()("#addAlert"+a).find(".Alert").find(".cur1").css("display","none"),h()("#addAlert"+a).find(".Alert").css("display","none"),window.confirm("\u60a8\u786e\u5b9a\u8981\u5220\u9664\u8be5\u8bbe\u5907\u561b\uff1f")&&g.a.post(e.Url+"device/region/delete",{id:a}).then((function(t){var a=t.data.data;a?(console.log(a),n.publicList()):(h()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"RightTableList",value:function(){var t=sessionStorage.getItem("ReginId"),a={};console.log(t),a=t&&""!==t?{category_id:sessionStorage.getItem("TwoId"),region_id:t}:{category_id:sessionStorage.getItem("TwoId")},console.log(a),g.a.post(e.Url+"device/info/list",a).then((function(t){var a=t.data.data;a?(console.log(a,a.length),u.this.setState({tableList:a}),0===a.length?u.this.setState({SBTable:!1}):u.this.setState({SBTable:!0})):(h()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"importFile",value:function(t,a){var n;if(n=t.target.files[0],console.log(n),null===n)h()(".PageShow").show().find("h1").html("\u6ca1\u6709\u6570\u636e!"),e.Time();else{var l;u.this.setState({OneFile:n});var o=new FormData;1===a?(o.append("category_id",sessionStorage.getItem("TwoId")),o.append("device_region",n),l={url:e.Url+"device/region/upload",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:o,dataType:"JSON"},h.a.ajax(l).done((function(t){console.log(t);var a=t.data;a?(console.log(a),u.this.publicList()):(h()(".PageShow").show().find("h1").html(t.msg),e.Time())}))):2===a&&(o.append("category_id",sessionStorage.getItem("TwoId")),o.append("device_info",n),l={url:e.Url+"device/info/upload",method:"POST",timeout:0,processData:!1,mimeType:"multipart/form-data",contentType:!1,data:o,dataType:"JSON"},h.a.ajax(l).done((function(t){console.log(t);var a=t.data;a?(console.log(a),u.this.RightTableList()):(h()(".PageShow").show().find("h1").html(t.msg),e.Time())})))}}},{key:"AddPic",value:function(t,a){u.this.DeleteCesium(),console.log(t),sessionStorage.setItem("sbId",t),u.this.setState({ShowPic:!0,ShowPosition:!1,typeName:a,TypeId:"",indoor:!1,build:{},buildId:"",floor:{},floorId:""}),g.a.post(e.Url+"device/type/list",{category_id:sessionStorage.getItem("TwoId"),enable:!0}).then((function(t){var a=t.data.data;a?(console.log(a),u.this.setState({PicList:a})):(h()(".PageShow").show().find("h1").html(t.data.msg),e.Time())})),this.DeleteCesium()}},{key:"DeleteCesium",value:function(){var e={modelobj:u.this.state.modelId};p.a.remove3DTilesV2(e),p.a.ClearHandler(),p.a.DeletePerspectiveFollow()}},{key:"Close",value:function(){u.this.setState({ShowPic:!1,ShowPosition:!1}),this.DeleteCesium()}},{key:"SureLiu",value:function(t,a,n,l){if(console.log(a,n,l),""===a)h()(".PageShow").show().find("h1").html("\u8bf7\u5148\u9009\u62e9\u8981\u6dfb\u52a0\u7684\u8bbe\u5907!"),e.Time();else{var o=document.getElementById("core_content"),i={Event:"",ModName:"dragModleV2",parameter:{mode:l,data:{url:n.url,height:n.height,scale:n.scale}}};console.log(i),o.contentWindow.postMessage(i,"*"),u.this.setState({ShowPic:!1})}i={Event:"getCameraView()",ModName:"",parameter:{}},(o=document.getElementById("core_content")).contentWindow.postMessage(i,"*")}},{key:"ChangeX",value:function(e){u.this.setState({X:e.target.value});var t={x:e.target.value,y:u.this.state.Y,z:u.this.state.Z,heading:u.this.state.H,id:u.this.state.modelId};p.a.ModifyModelCoordinates(t)}},{key:"ChangeY",value:function(e){u.this.setState({Y:e.target.value});var t={x:u.this.state.X,y:e.target.value,z:u.this.state.Z,heading:u.this.state.H,id:u.this.state.modelId};p.a.ModifyModelCoordinates(t)}},{key:"ChangeZ",value:function(e){u.this.setState({Z:e.target.value});var t={x:u.this.state.X,y:u.this.state.Y,z:e.target.value,heading:u.this.state.H,id:u.this.state.modelId};p.a.ModifyModelCoordinates(t)}},{key:"ChangeH",value:function(e){u.this.setState({H:e.target.value});var t={x:u.this.state.X,y:u.this.state.Y,z:u.this.state.Z,heading:e.target.value,id:u.this.state.modelId};p.a.ModifyModelCoordinates(t)}},{key:"handleIsIndoor",value:function(t){u.this.setState((function(e){return{indoor:!e.indoor}})),this.state.indoor?u.this.setState({build:{},buildValue:"",buildId:"",floor:{},floorValue:"",floorId:""}):g.a.get(e.Url+"map/build/list").then((function(t){var a=t.data.data;a?(console.log(a),u.this.setState({build:a,buildId:a[0].id}),g.a.post(e.Url+"map/floor/list",{build_id:a[0].id}).then((function(t){var a=t.data.data;a?(console.log(a),u.this.setState({floor:a,floorId:a[0].id})):(h()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))):(h()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"SaveLiu",value:function(t,a,n,l){console.log(t,a,n,l),p.a.onCoordinate(),setTimeout((function(){var o,i=JSON.parse(sessionStorage.getItem("Center"));console.log(JSON.parse(sessionStorage.getItem("Center"))),o={id:sessionStorage.getItem("sbId"),type_id:t,center:JSON.parse(sessionStorage.getItem("center")),options:{geom:i.geom,position:{x:Number(u.this.state.X),y:Number(u.this.state.Y),z:Number(u.this.state.Z),heading:Number(u.this.state.H),pitch:0,roll:0},scale:i.scale,url:i.url,visible:i.visible},indoor:a,build_id:n,floor_id:l,geom:u.this.state.geom},console.log(o),g.a.post(e.Url+"device/info/onMap",o).then((function(t){var a=t.data.data;a?(console.log(a),u.this.setState({ShowPosition:!1}),u.this.RightTableList(),p.a.ClearHandler(),p.a.DeletePerspectiveFollow(),p.a.HeavyHaulMod(o)):(h()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}),0)}},{key:"DeletePic",value:function(e,t){t.stopPropagation(),h()(".device2Show").show().find("h1").html("\u60a8\u786e\u5b9a\u8981\u53d6\u6d88\u8be5\u8bbe\u5907\u4e0a\u56fe\u561b"),console.log(e),u.this.setState({deleteName:"\u4e0b\u56fe",deleteId:e.id,deviceCode:e.device_code})}},{key:"Delete",value:function(e,t){t.stopPropagation(),h()(".device2Show").show(),u.this.setState({deleteName:"\u5220\u9664",deleteId:e})}},{key:"PageDeleted1",value:function(){h()(".device2Show").hide();var t=this.state,a=t.deleteName,n=t.deleteId,l=t.deviceCode;"\u4e0b\u56fe"===a?g.a.post(e.Url+"device/info/offMap",{id:n}).then((function(t){var a=t.data.data;if(a){console.log(a),u.this.RightTableList();var n={modelobj:l};p.a.remove3DTilesV2(n)}else h()(".PageShow").show().find("h1").html(t.data.msg),e.Time()})):g.a.post(e.Url+"device/info/delete",{id:n}).then((function(t){var a=t.data.data;a?(console.log(a),u.this.RightTableList()):(h()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"ChangeEdit",value:function(e,t,a,n,l,o,i){console.log(t,a,n,l,o,i)}},{key:"SBName",value:function(e){u.this.setState({searchName:e.target.value})}},{key:"Search",value:function(t,a){"false"===a?a=!1:"true"===a?a=!0:(h()(".PageShow").show().find("h1").html("\u8bf7\u5148\u9009\u62e9\u72b6\u6001"),e.Time());var n=sessionStorage.getItem("ReginId");null===n&&(n="");var l={category_id:sessionStorage.getItem("TwoId"),on_map:a,device_name:t,region_id:n};""===t&&""!==a?l={on_map:a,region_id:sessionStorage.getItem("ReginId")}:""===a&&""!==t?l={device_name:t,region_id:sessionStorage.getItem("ReginId")}:""===t&&""===a?l={region_id:sessionStorage.getItem("ReginId")}:""!==l.region_id&&l.region_id||(l={category_id:sessionStorage.getItem("TwoId"),on_map:a,device_name:t}),console.log(l),g.a.post(e.Url+"device/info/list",l).then((function(t){var a=t.data.data;a?(console.log(a,a.length),u.this.setState({tableList:a})):(h()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"deviceLocation",value:function(t,a){if(t.stopPropagation(),console.log(a),parseInt(a.build_id)<0){console.log("111");var n=e.floooList;if(n.length>0&&-1===n[0].model_url.indexOf("DXS")){for(var l=new RegExp("/","g"),o=[],i=0;i<n.length;i++)null!=n[i].model_url&&o.push({modelId:n[i].model_url.replace(l,"_"),order_num:n[i].order_num});p.a.ShowSpecifiedModel(o)}!1===u.this.state.isShow&&(console.log("222"),p.a.BuildingShow({show:!1}),u.this.setState({isShow:!0})),g.a.get(e.Url+"map/under/list").then((function(e){var t=e.data.data;if(t){h()("#liu").css({display:"block"}),h()("#liu").find(".configShowNav").find("span").html("\u5730\u4e0b\u5ba4");var n={result:t,number:1};p.a.returnData(n)}var l=[],o=new RegExp("/","g");t.forEach((function(e){null!=e.model_url&&l.push({modelId:e.model_url.replace(o,"_"),order_num:e.order_num,more:e})}));var i=parseInt(a.floor_id.split("B")[1].substr(0,1));p.a.onMenuClickedV3(l[i-1].modelId,l),p.a.dxsFlyTo(a)}))}else{var r={id:a.id};p.a.CoordinateModelID(r),p.a.returnData(a),u.this.state.isShow&&(p.a.BuildingShow({show:!0}),u.this.setState({isShow:!1}))}}},{key:"render",value:function(){var t=this,a=this.state,n=a.List,l=a.isLoading,o=a.One,i=a.Two,r=a.TwoName,s=a.ZZListBtu,u=a.SBList,m=a.TwoTree,h=a.tableList,f=a.SBTable,g=a.ShowPic,p=a.PicList,v=a.TypeId,y=a.mapStyle,b=a.mapType,E=a.ShowPosition,w=a.typeName,S=a.X,C=a.Y,k=a.Z,N=a.H,I=a.indoor,T=a.build,P=a.buildId,O=a.floor,L=a.floorId,_=a.searchName,x=a.searchOn,M=this.props.navClick;return d.a.createElement(c.Fragment,null,l?d.a.createElement("div",null,o?d.a.createElement("div",{className:"configShow",style:{width:"500px"}},d.a.createElement("div",{className:"configShowNav"},"\u8bbe\u5907\u4e0a\u56fe ",d.a.createElement("i",{onClick:function(){return M(100)}})),d.a.createElement("div",{className:"configShowConent"},d.a.createElement("h1",{className:"cur"},"\u8bbe\u5907\u7c7b\u522b"),d.a.createElement("div",{className:"device"},n.length>0&&n.map((function(e,a){return d.a.createElement("li",{key:a,onClick:function(){return t.ListClick(e.id,e.category_name)},onContextMenu:t.onContextMenu.bind(t)},d.a.createElement("img",{src:e.category_icon,alt:""}),d.a.createElement("span",null,e.category_name))}))))):"",i?d.a.createElement("div",{className:"configShow",style:{width:"800px"}},d.a.createElement("div",{className:"configShowNav"},"\u8bbe\u5907\u4e0a\u56fe ",d.a.createElement("i",{onClick:function(){return M(100)}})),d.a.createElement("div",{className:"configShowConent"},d.a.createElement("h1",{className:"cur",style:{width:"764px"}},d.a.createElement("em",{onClick:function(){return t.ReturnOne()}},"\u8bbe\u5907\u7c7b\u522b")," >> ",r),d.a.createElement("div",{className:"device",style:{width:"764px",overflow:"hidden",height:"350px",marginBottom:"-20px"}},d.a.createElement("div",{className:"Tree"},s?d.a.createElement("div",null,d.a.createElement("div",null,"\u6682\u65e0\u6570\u636e"),d.a.createElement("div",{className:"import"},d.a.createElement("button",{className:"cur"},"\u5bfc\u5165\u7ec4\u7ec7\u673a\u6784"),d.a.createElement("input",{type:"file",className:"change",ref:"haveFile",id:"fileInput",name:"fileInput",onChange:function(e){return t.importFile(e,1)},accept:".csv, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}))):d.a.createElement("div",null,d.a.createElement("div",{className:"import"},d.a.createElement("button",{className:u?"cur":"cur Grayscale"},"\u5bfc\u5165\u8bbe\u5907\u5217\u8868"),d.a.createElement("input",{type:"file",className:"change",ref:"haveFile",id:"fileInput",name:"fileInput",onChange:function(e){return t.importFile(e,2)},accept:".csv, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),d.a.createElement("div",{className:"TreeList",style:{height:"300px"}},this.generateMenu(m)))),d.a.createElement("div",{className:"TreeTop"},f?d.a.createElement("div",{className:"TableList"},d.a.createElement("div",{className:"TableTitle"},d.a.createElement("span",null,d.a.createElement("label",{htmlFor:""},"\u8bbe\u5907\u540d\u79f0"),d.a.createElement("input",{type:"text",defaultValue:_,onChange:function(e){return t.SBName(e)}})),d.a.createElement("span",null,d.a.createElement("label",{htmlFor:""},"\u72b6\u6001"),d.a.createElement("select",{defaultValue:x,onChange:this.ChangeON},d.a.createElement("option",{value:"oo"},"\u8bf7\u9009\u62e9"),d.a.createElement("option",{value:"false"},"\u672a\u4e0a\u56fe"),d.a.createElement("option",{value:"true"},"\u5df2\u4e0a\u56fe"))),d.a.createElement("span",null,d.a.createElement("button",{onClick:function(){return t.Search(_,x)}},"\u641c\u7d22"))),d.a.createElement("div",{className:"TreeTable"},d.a.createElement("table",{cellPadding:"0",cellSpacing:"0"},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null,"\u540d\u79f0"),d.a.createElement("th",null,"\u7c7b\u578b"),d.a.createElement("th",null,"\u72b6\u6001"),d.a.createElement("th",null,"\u64cd\u4f5c"))),d.a.createElement("tbody",null,h.length>0&&h.map((function(e,a){return d.a.createElement("tr",{key:a},d.a.createElement("td",{title:e.device_name,onClick:e.on_map?function(a){return t.deviceLocation(a,e)}:null},e.device_name),d.a.createElement("td",null,e.device_type),d.a.createElement("td",null,e.on_map?d.a.createElement("span",{className:"green"},"\u5df2\u4e0a\u56fe"):d.a.createElement("span",{className:"red"},"\u672a\u4e0a\u56fe")),d.a.createElement("td",null,e.on_map?d.a.createElement("button",{className:"ChangeTable",onClick:function(a){return t.DeletePic(e,a)}},d.a.createElement("i",null)):d.a.createElement("button",{className:"AddTable",onClick:function(){return t.AddPic(e.id,e.device_name)}},d.a.createElement("i",null)),d.a.createElement("button",{className:"deletePic",onClick:function(a){return t.Delete(e.id,a)}},d.a.createElement("i",null))))}))))),g?d.a.createElement("div",{className:"configShow",style:{width:"380px",top:"-60px",left:"780px",textAlign:"left"}},d.a.createElement("div",{className:"configShowNav"},"\u8bbe\u5907\u7c7b\u578b ",d.a.createElement("i",{onClick:function(){return t.Close()}})),d.a.createElement("div",{className:"configShowConent"},d.a.createElement("h1",{className:"cur",style:{width:"333px",textAlign:"left"}},"\u9009\u62e9\u4f60\u8981\u6dfb\u52a0\u7684\u8bbe\u5907"),d.a.createElement("div",{className:"ADDpIC"},p.length>0&&p.map((function(e,a){return d.a.createElement("dl",{key:a,className:"dl"+e.id},d.a.createElement("img",{src:e.type_icon,alt:""}),d.a.createElement("span",null,e.type_name),d.a.createElement("input",{type:"radio",name:"gender",value:e.id,checked:v===e.id,onChange:function(a){return t.handleChange(a,e.id,e.map_style,e.map_type,e.type_name)}}))})),d.a.createElement("div",{className:"configBut",style:{marginTop:"35px"}},d.a.createElement("button",{onClick:function(e){return t.SureLiu(e,v,y,b)}},"\u786e\u5b9a"),d.a.createElement("button",{onClick:function(){return t.Close()}},"\u53d6\u6d88"))))):"",E?d.a.createElement("div",{className:"configShow",style:{width:"380px",top:"-60px",left:"780px",textAlign:"left"}},d.a.createElement("div",{className:"configShowNav"},"\u6dfb\u52a0\u8bbe\u5907 ",d.a.createElement("i",{onClick:function(){return t.Close()}})),d.a.createElement("div",{className:"configShowConent",style:{height:"220px"}},d.a.createElement("div",{className:"Position"},d.a.createElement("div",{className:"PositionName"},d.a.createElement("span",null,"\u8bbe\u5907\u540d\u79f0"),d.a.createElement("input",{type:"text",defaultValue:w,readOnly:!0})),d.a.createElement("div",{className:"PositionX"},d.a.createElement("span",null,d.a.createElement("label",null,"\u7ecf\u5ea6:"),d.a.createElement("input",{type:"number",step:"0.000001",defaultValue:S,onChange:function(e){return t.ChangeX(e)}})),d.a.createElement("span",null,d.a.createElement("label",null,"\u7ef4\u5ea6:"),d.a.createElement("input",{type:"number",step:"0.000001",defaultValue:C,onChange:function(e){return t.ChangeY(e)}})),d.a.createElement("span",null,d.a.createElement("label",null,"\u9ad8\u5ea6:"),d.a.createElement("input",{type:"number",step:"0.1",defaultValue:k,onChange:function(e){return t.ChangeZ(e)}})),d.a.createElement("span",null,d.a.createElement("label",null,"\u504f\u8f6c\u89d2:"),d.a.createElement("input",{type:"number",step:"0.1",defaultValue:N,onChange:function(e){return t.ChangeH(e)}}))),d.a.createElement("div",{className:"PositionFloor"},d.a.createElement("span",null,d.a.createElement("label",null,"\u5ba4\u5185\uff1a"),d.a.createElement("input",{type:"checkbox",checked:I,onChange:function(e){return t.handleIsIndoor(e)}})),d.a.createElement("span",null,d.a.createElement("select",{defaultValue:P,onChange:this.ChangeBuild},T.length>0&&T.map((function(e,t){return d.a.createElement("option",{key:t,value:e.id},e.build_name)})))),d.a.createElement("span",null,d.a.createElement("select",{defaultValue:L,onChange:this.ChangeFloor},O.length>0&&O.map((function(e,t){return d.a.createElement("option",{key:t,value:e.id},e.floor_name)}))))),d.a.createElement("div",{className:"configBut",style:{marginTop:"15px"}},d.a.createElement("button",{className:"cur",onClick:function(){return t.SaveLiu(v,I,P,L)}},"\u4fdd\u5b58"),d.a.createElement("button",{className:"cur",onClick:function(){return t.Close()}},"\u53d6\u6d88"))))):""):d.a.createElement("div",null,d.a.createElement("div",null,"\u6682\u65e0\u6570\u636e"),d.a.createElement("div",{className:"import"},d.a.createElement("button",{className:u?"cur":"cur Grayscale"},"\u5bfc\u5165\u8bbe\u5907\u5217\u8868"),d.a.createElement("input",{type:"file",className:"change",ref:"haveFile",id:"fileInput",name:"fileInput",onChange:function(e){return t.importFile(e,2)},accept:".csv, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}))))))):""):"",d.a.createElement("div",{className:"PageShow1 device2Show"},d.a.createElement("div",{className:"PageShowCont"},d.a.createElement("h1",null,"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u561b\uff01"),d.a.createElement("h2",null,d.a.createElement("button",{onClick:function(){return t.PageDeleted1()}},"\u786e\u5b9a"),d.a.createElement("button",{onClick:function(){return e.PageHide()}},"\u53d6\u6d88")))))}}]),u}(c.PureComponent);t.a=Object(u.b)(null,(function(){return{navClick:function(e){console.log(e),v.this.setState({One:!1,Two:!1})}}}))(v)}).call(this,a(18))},373:function(e,t,a){"use strict";(function(e){var n=a(9),l=a(10),o=a(2),i=a(12),r=a(11),s=a(0),c=a.n(s),d=a(16),u=a(1),m=a.n(u),h=a(5),f=a.n(h),g=a(3),p=function(t){Object(i.a)(d,t);var a=Object(r.a)(d);function d(t){var l;return Object(n.a)(this,d),(l=a.call(this,t)).ChangeBuild=function(t){t.preventDefault(),console.log(t.target.value),f.a.post(e.Url+"map/floor/list",{build_id:t.target.value}).then((function(t){var a=t.data.data;a?(console.log(a),d.this.setState({floor:a,floorId:a[0].id})):(m()(".PageShow").show().find("h1").html(t.data.msg),e.Time())})),d.this.setState({buildId:t.target.value})},l.ChangeFloor=function(e){e.preventDefault(),console.log(e.target.value),d.this.setState({floorId:e.target.value})},d.this=Object(o.a)(l),l.state={isLoading:!0,layerList:JSON.parse(sessionStorage.getItem("Floor")),indoor:!1,build:{},buildId:"",floor:{},floorId:"",name:"",deletedId:"",details:[]},l.handleIsIndoor=l.handleIsIndoor.bind(Object(o.a)(l)),l.oneClick=l.oneClick.bind(Object(o.a)(l)),l.DingSave=l.DingSave.bind(Object(o.a)(l)),l.Flay=l.Flay.bind(Object(o.a)(l)),l.deleteOne=l.deleteOne.bind(Object(o.a)(l)),l.PageDeleted3=l.PageDeleted3.bind(Object(o.a)(l)),l.SaveLiu=l.SaveLiu.bind(Object(o.a)(l)),l}return Object(l.a)(d,[{key:"componentDidMount",value:function(){document.oncontextmenu=function(){return!1},window.receiveMessageFromIndex=function(e){if(void 0!==e)switch(e.data.switchName){case"PersonnelPositioning":console.log(e.data),d.this.setState({details:e.data});break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1),this.onLayer()}},{key:"onContextMenu",value:function(e,t){e.stopPropagation(),m()("#layer"+t).find("span").css({color:"#54b2df"}),m()("#layer"+t).siblings().find("span").css({color:"#fff"}),m()(".layer_t").find("span").css({color:"#fff"}),m()(".layer").find(".Alert_tk").css("display","none"),m()("#layer"+t).find("#Alert"+t).css("display","block")}},{key:"Flay",value:function(e,t){e.stopPropagation(),m()("#layer"+t.id).find("span").css({color:"#54b2df"}),m()("#layer"+t.id).siblings().find("span").css({color:"#fff"}),m()(".layer_t").find("span").css({color:"#fff"}),console.log(t),g.a.InitialPositioning(t);var a,n=new RegExp("/","g"),l=[],o=[];JSON.parse(sessionStorage.getItem("Floor")).forEach((function(e){e.Floorlists.forEach((function(e){o.push(e)}))})),console.log(o),o.forEach((function(e){null!=e.model_url&&l.push({modelId:e.model_url.replace(n,"_"),order_num:e.order_num,more:e})}));for(var i=0;i<o.length;i++)if(o[i].id===t.floor_id){if(a=o[i].model_url.replace(n,"_"),null==o[i].model_url)return;if(null==o[i].center_position)null!=a&&(-1!==a.indexOf("DXS")?(g.a.onMenuClickedV3(a,l),g.a.removefloorOther()):g.a.onMenuClickedV2(a,l));else{var r=o[i].center_position,s={y:r.y,x:r.x,z:r.z,h:r.heading,p:r.pitch,r:r.roll};g.a.onMenuClickedV2(a,l),g.a.CoordinateLocation(s),console.log("Floors",o[i].center_position)}break}}},{key:"deleteOne",value:function(e,t){e.stopPropagation(),m()(".device3Show").show(),d.this.setState({deletedId:t})}},{key:"SaveLiu",value:function(){var e=this.state,t=e.long,a=e.wide,n={long:parseInt(t),wide:parseInt(a)};g.a.PersonnelOrientation(n)}},{key:"PageDeleted3",value:function(){m()(".device3Show").hide();var t=this.state.deletedId;console.log(t),f.a.post(e.Url+"base/station/destroy",{id:t}).then((function(t){console.log(t),t.data.data&&"success"===t.data.msg?(m()(".PageShow").show().find("h1").html("\u5220\u9664\u6210\u529f!"),e.Time(),d.this.onLayer(),m()(".layer").find(".Alert_tk").css("display","none")):(m()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"oneClick",value:function(){d.this.setState({indoor:!1,build:{},buildId:"",floor:{},floorId:"",name:""})}},{key:"handleIsIndoor",value:function(t){d.this.setState((function(e){return{indoor:!e.indoor}})),this.state.indoor?d.this.setState({build:{},buildValue:"",buildId:"",floor:{},floorValue:"",floorId:""}):f.a.get(e.Url+"map/build/list").then((function(t){var a=t.data.data;a?(console.log(a),d.this.setState({build:a,buildId:a[0].id}),f.a.post(e.Url+"map/floor/list",{build_id:a[0].id}).then((function(t){var a=t.data.data;a?(console.log(a),d.this.setState({floor:a,floorId:a[0].id})):(m()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))):(m()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"onLayer",value:function(){f.a.get(e.Url+"base/station/list",{}).then((function(e){var t=e.data.data;t&&"success"===e.data.msg?(console.log(e),d.this.setState({layerList:t})):alert(e.msg)}))}},{key:"ChangeName",value:function(e){d.this.setState({name:e.target.value})}},{key:"DingSave",value:function(){var t=this.state,a=t.buildId,n=t.floorId,l=t.name,o=t.details;if(l){console.log(o);var i={name:l,positions:o.positions,zeroPoint:o.zeroPoint,LengthWidth:o.LengthWidth,cv:o.cv,deviation:o.deviation,build_id:a,floor_id:n};console.log(i),f.a.post(e.Url+"base/station/add",i).then((function(t){var a=t.data.data;if(a){console.log(a),m()(".PageShow").show().find("h1").html("\u6dfb\u52a0\u6210\u529f\uff01"),e.Time(),d.this.onLayer();g.a.deletePositioning("_2DPositioningBox"),d.this.setState({name:"",indoor:!1,build:{},buildId:"",floor:{},floorId:""})}else m()(".PageShow").show().find("h1").html(t.data.msg),e.Time()}))}else m()(".PageShow").show().find("h1").html("\u8bf7\u8f93\u5165\u5b8c\u6574\u4fe1\u606f\uff01"),e.Time()}},{key:"render",value:function(){var t=this,a=this.state,n=a.isLoading,l=a.layerList,o=a.name,i=a.indoor,r=a.build,d=a.buildId,u=a.floor,m=a.floorId,h=this.props.navClick;return c.a.createElement(s.Fragment,null,n?c.a.createElement("div",{className:"configShow",style:{width:"500px"}},c.a.createElement("div",{className:"configShowNav"},"\u5b9a\u4f4d\u4e0a\u56fe ",c.a.createElement("i",{onClick:function(){return h(100)}})),c.a.createElement("div",{className:"LayerLeft",style:{width:"29%"}},c.a.createElement("h1",null,c.a.createElement("button",{onClick:function(){return t.oneClick(1)}},"\u6dfb\u52a0")),c.a.createElement("ul",null,l.length>0&&l.map((function(e,a){return c.a.createElement("li",{key:a,className:"layer",id:"layer"+e.id,onClick:function(a){return t.Flay(a,e)},onContextMenu:function(a){return t.onContextMenu(a,e.id)}},c.a.createElement("span",{title:e.name},e.name),c.a.createElement("div",{className:"Alert_tk",id:"Alert"+e.id,style:{display:"none"}},c.a.createElement("button",{onClick:function(a){return t.deleteOne(a,e.id)}},"\u5220\u9664")))})))),c.a.createElement("div",{className:"configDataRight",style:{width:"68%",color:"#fff",marginLeft:"5px"}},c.a.createElement("div",{className:"PositionName"},c.a.createElement("span",null,"\u57fa\u7ad9\u540d\u79f0"),c.a.createElement("input",{type:"text",value:o,onChange:function(e){return t.ChangeName(e)}})),c.a.createElement("div",{className:"PositionFloor",style:{marginTop:"10px"}},c.a.createElement("span",null,c.a.createElement("label",null,"\u5ba4\u5185\uff1a"),c.a.createElement("input",{type:"checkbox",checked:i,onChange:function(e){return t.handleIsIndoor(e)}})),c.a.createElement("span",null,c.a.createElement("select",{defaultValue:d,onChange:this.ChangeBuild},r.length>0&&r.map((function(e,t){return c.a.createElement("option",{key:t,value:e.id},e.build_name)})))),c.a.createElement("span",null,c.a.createElement("select",{defaultValue:m,onChange:this.ChangeFloor},u.length>0&&u.map((function(e,t){return c.a.createElement("option",{key:t,value:e.id},e.floor_name)}))))),c.a.createElement("div",{className:"configBut",style:{marginLeft:"10px"}},c.a.createElement("button",{style:{float:"left"},onClick:function(){return t.SaveLiu()}},"\u7ed8\u5236"),c.a.createElement("button",{style:{float:"left"},onClick:function(){return t.DingSave()}},"\u4fdd\u5b58")))):"",c.a.createElement("div",{className:"PageShow1 device3Show"},c.a.createElement("div",{className:"PageShowCont"},c.a.createElement("h1",null,"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u561b\uff01"),c.a.createElement("h2",null,c.a.createElement("button",{onClick:function(){return t.PageDeleted3()}},"\u786e\u5b9a"),c.a.createElement("button",{onClick:function(){return e.PageHide()}},"\u53d6\u6d88")))))}}]),d}(s.PureComponent);t.a=Object(d.b)(null,(function(){return{navClick:function(e){console.log(e),p.this.setState({isLoading:!1})}}}))(p)}).call(this,a(18))},374:function(e,t,a){"use strict";(function(e){var n=a(9),l=a(10),o=a(2),i=a(12),r=a(11),s=a(0),c=a.n(s),d=a(16),u=a(1),m=a.n(u),h=a(5),f=a.n(h),g=a(3),p=function(t){Object(i.a)(d,t);var a=Object(r.a)(d);function d(t){var l;return Object(n.a)(this,d),(l=a.call(this,t)).ChangeBuild=function(t){t.preventDefault(),console.log(t.target.value),f.a.post(e.Url+"map/floor/list",{build_id:t.target.value}).then((function(t){var a=t.data.data;a?(console.log(a),d.this.setState({floor:a,floorId:a[0].id})):(m()(".PageShow").show().find("h1").html(t.data.msg),e.Time())})),d.this.setState({buildId:t.target.value})},l.ChangeFloor=function(e){e.preventDefault(),console.log(e.target.value),d.this.setState({floorId:e.target.value})},d.this=Object(o.a)(l),l.state={isLoading:!0,layerList:{},indoor:!1,build:{},buildId:"",floor:{},floorId:"",name:"",deletedId:"",Polygon_style:{shapeColor:"#ff0000",shapeTransparency:"90",borderWitchPolygon:"1",borderColor:"#ffffff",borderTransparency:"90"},Polygon_style_two:{shapeColor:"#6cc6ff",shapeTransparency:"90",borderWitchPolygon:"1",borderColor:"#ffffff",borderTransparency:"90"},options:{},pid:"",oneADD:!0,twoADD:!1,addTwoId:"",SCnum:""},l.handleIsIndoor=l.handleIsIndoor.bind(Object(o.a)(l)),l.oneClick=l.oneClick.bind(Object(o.a)(l)),l.DingSave=l.DingSave.bind(Object(o.a)(l)),l.DingSaveTwo=l.DingSaveTwo.bind(Object(o.a)(l)),l.Flay=l.Flay.bind(Object(o.a)(l)),l.deleteOne=l.deleteOne.bind(Object(o.a)(l)),l.PageDeleted3=l.PageDeleted3.bind(Object(o.a)(l)),l.SaveLiu=l.SaveLiu.bind(Object(o.a)(l)),l.addTwo=l.addTwo.bind(Object(o.a)(l)),l}return Object(l.a)(d,[{key:"componentDidMount",value:function(){document.oncontextmenu=function(){return!1},window.receiveMessageFromIndex=function(e){if(void 0!==e)switch(e.data.switchName){case"drawPolygon":console.log(e.data),d.this.setState({options:e.data.parameter,pid:e.data.id});break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1),this.onLayer()}},{key:"onContextMenu",value:function(e,t){e.stopPropagation(),m()("#layer"+t).find("span").css({color:"#54b2df"}),m()("#layer"+t).siblings().find("span").css({color:"#fff"}),m()(".layer_t").find("span").css({color:"#fff"}),m()(".layer").find(".Alert_tk").css("display","none"),m()("#layer"+t).find("#Alert"+t).css("display","block")}},{key:"onContextMenu1",value:function(e,t){e.stopPropagation(),console.log("111"),m()(".layer").find(".Alert_tk").css("display","none"),m()("#Alert"+t).css("display","block")}},{key:"Flay",value:function(e,t){e.stopPropagation(),console.log(t),m()(".LayerLeft ul li").find("ul").css({display:"none"}),m()("#layer"+t.id).find("span").css({color:"#54b2df"}),m()("#layer"+t.id).siblings().find("span").css({color:"#fff"}),m()("#layer"+t.id).find("ul").css({display:"block"}),m()(".layer_t").find("span").css({color:"#fff"}),g.a.PrisonView(t);var a,n=new RegExp("/","g"),l=[],o=[];JSON.parse(sessionStorage.getItem("Floor")).forEach((function(e){e.Floorlists.forEach((function(e){o.push(e)}))})),o.forEach((function(e){null!=e.model_url&&l.push({modelId:e.model_url.replace(n,"_"),order_num:e.order_num,more:e})}));for(var i=0;i<o.length;i++)if(o[i].id===t.floor_id){if(a=o[i].model_url.replace(n,"_"),null==o[i].model_url)return;if(null==o[i].center_position)null!=a&&(-1!==a.indexOf("DXS")?(g.a.onMenuClickedV3(a,l),g.a.removefloorOther()):g.a.onMenuClickedV2(a,l));else{var r=o[i].center_position,s={y:r.y,x:r.x,z:r.z,h:r.heading,p:r.pitch,r:r.roll};g.a.onMenuClickedV2(a,l),g.a.CoordinateLocation(s),console.log("Floors",o[i].center_position)}break}}},{key:"deleteOne",value:function(e,t,a){e.stopPropagation(),m()(".device3Show").show(),d.this.setState({deletedId:t,SCnum:a})}},{key:"SaveLiu",value:function(e,t){var a,n=this.state,l=n.name,o=n.Polygon_style,i=n.Polygon_style_two;a=1===t?{id:l,Polygon_style:o}:{id:l,Polygon_style:i},g.a.drawPolygon(a)}},{key:"PageDeleted3",value:function(){m()(".device3Show").hide();var t=this.state,a=t.deletedId,n=t.SCnum;console.log(a),1===n?f.a.post(e.Url+"watchChildren/destroy",{id:a}).then((function(t){console.log(t),t.data.data&&"success"===t.data.msg?(m()(".PageShow").show().find("h1").html("\u5220\u9664\u6210\u529f!"),e.Time(),d.this.onLayer(),m()(".layer").find(".Alert_tk").css("display","none")):(m()(".PageShow").show().find("h1").html(t.data.msg),e.Time())})):2===n&&f.a.post(e.Url+"watch/destroy",{id:a}).then((function(t){console.log(t),t.data.data&&"success"===t.data.msg?(m()(".PageShow").show().find("h1").html("\u5220\u9664\u6210\u529f!"),e.Time(),d.this.onLayer(),m()(".layer").find(".Alert_tk").css("display","none")):(m()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"oneClick",value:function(){m()(".layer").find(".Alert_tk").css("display","none"),d.this.setState({indoor:!1,build:{},buildId:"",floor:{},floorId:"",name:"",twoADD:!1,oneADD:!0})}},{key:"addTwo",value:function(e,t){console.log(t),d.this.setState({twoADD:!0,oneADD:!1,addTwoId:t}),m()(".layer").find(".Alert_tk").css("display","none")}},{key:"handleIsIndoor",value:function(t){d.this.setState((function(e){return{indoor:!e.indoor}})),this.state.indoor?d.this.setState({build:{},buildValue:"",buildId:"",floor:{},floorValue:"",floorId:""}):f.a.get(e.Url+"map/build/list").then((function(t){var a=t.data.data;a?(console.log(a),d.this.setState({build:a,buildId:a[0].id}),f.a.post(e.Url+"map/floor/list",{build_id:a[0].id}).then((function(t){var a=t.data.data;a?(console.log(a),d.this.setState({floor:a,floorId:a[0].id})):(m()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))):(m()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"onLayer",value:function(){var t=[];f.a.post(e.Url+"watchChildren/list").then((function(a){console.log(a);var n=a.data.data;if(n&&"success"===a.data.msg)if(n.length>0)for(var l=function(a){console.log(n[a].id),f.a.post(e.Url+"watch/list",{watchchildren_id:n[a].id}).then((function(l){var o=l.data.data;console.log(o),o&&"success"===l.data.msg?(t.push({LayerItems:n[a],LayerLists:o}),a===n.length-1&&setTimeout((function(){d.this.setState({layerList:t})}),100)):(m()(".PageShow").show().find("h1").html(l.data.msg),e.Time())}))},o=0;o<n.length;o++)l(o);else d.this.setState({layerList:{}});else m()(".PageShow").show().find("h1").html(a.data.msg),e.Time()}))}},{key:"ChangeName",value:function(e){d.this.setState({name:e.target.value})}},{key:"DingSave",value:function(){var t=this.state,a=t.buildId,n=t.floorId,l=t.name,o=t.options,i=t.indoor;if(l){console.log(o);var r={area_name:l,area:o,build_id:a,floor_id:n,indoor:i};console.log(r),f.a.post(e.Url+"watchChildren/add",r).then((function(t){var a=t.data.data;a?(console.log(a),m()(".PageShow").show().find("h1").html("\u6dfb\u52a0\u6210\u529f\uff01"),e.Time(),d.this.onLayer(),d.this.setState({name:"",indoor:!1,build:{},buildId:"",floor:{},floorId:"",options:{}})):(m()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}else m()(".PageShow").show().find("h1").html("\u8bf7\u8f93\u5165\u5b8c\u6574\u4fe1\u606f\uff01"),e.Time()}},{key:"DingSaveTwo",value:function(){var t=this.state,a=t.buildId,n=t.floorId,l=t.name,o=t.options,i=t.indoor,r=t.addTwoId;if(l){console.log(o);var s={name:l,area:o,build_id:a,floor_id:n,indoor:i,watchchildren_id:r};console.log(s),f.a.post(e.Url+"watch/add",s).then((function(t){var a=t.data.data;a?(console.log(a),m()(".PageShow").show().find("h1").html("\u6dfb\u52a0\u6210\u529f\uff01"),e.Time(),d.this.onLayer(),d.this.setState({name:"",indoor:!1,build:{},buildId:"",floor:{},floorId:"",options:{}})):(m()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}else m()(".PageShow").show().find("h1").html("\u8bf7\u8f93\u5165\u5b8c\u6574\u4fe1\u606f\uff01"),e.Time()}},{key:"render",value:function(){var t=this,a=this.state,n=a.isLoading,l=a.layerList,o=a.name,i=a.indoor,r=a.build,d=a.buildId,u=a.floor,m=a.floorId,h=a.twoADD,f=a.oneADD,g=this.props.navClick;return c.a.createElement(s.Fragment,null,n?c.a.createElement("div",{className:"configShow",style:{width:"500px"}},c.a.createElement("div",{className:"configShowNav"},"\u76d1\u533a\u4e0a\u56fe ",c.a.createElement("i",{onClick:function(){return g(100)}})),c.a.createElement("div",{className:"LayerLeft",style:{width:"29%"}},c.a.createElement("h1",null,c.a.createElement("button",{onClick:function(){return t.oneClick(1)}},"\u6dfb\u52a0")),c.a.createElement("ul",null,l.length>0&&l.map((function(e,a){return console.log(l),c.a.createElement("li",{key:a,className:"layer",id:"layer"+e.LayerItems.id,onClick:function(a){return t.Flay(a,e.LayerItems)},onContextMenu:function(a){return t.onContextMenu(a,e.LayerItems.id)}},c.a.createElement("span",{title:e.name},e.LayerItems.area_name),c.a.createElement("div",{className:"Alert_tk",id:"Alert"+e.LayerItems.id,style:{display:"none"}},0===e.LayerLists.length?c.a.createElement("button",{onClick:function(a){return t.deleteOne(a,e.LayerItems.id,1)}},"\u5220\u9664"):"",c.a.createElement("button",{onClick:function(a){return t.addTwo(a,e.LayerItems.id)}},"\u6dfb\u52a0")),c.a.createElement("ul",{style:{display:"none"}},e.LayerLists.length>0&&e.LayerLists.map((function(e,a){return c.a.createElement("li",{key:a,className:"layer_t",id:"layer_t"+e.id,onContextMenu:function(a){return t.onContextMenu1(a,e.id)}},c.a.createElement("span",null,e.name),c.a.createElement("div",{className:"Alert_tk",id:"Alert"+e.id,style:{display:"none"}},c.a.createElement("button",{onClick:function(a){return t.deleteOne(a,e.id,2)}},"\u5220\u9664")))}))))})))),f?c.a.createElement("div",{className:"configDataRight",style:{width:"68%",color:"#fff",marginLeft:"5px"}},c.a.createElement("div",{className:"PositionName"},c.a.createElement("span",null,"\u76d1\u533a\u540d\u79f0"),c.a.createElement("input",{type:"text",value:o,onChange:function(e){return t.ChangeName(e)}})),c.a.createElement("div",{className:"PositionFloor",style:{marginTop:"10px"}},c.a.createElement("span",null,c.a.createElement("label",null,"\u5ba4\u5185\uff1a"),c.a.createElement("input",{type:"checkbox",checked:i,onChange:function(e){return t.handleIsIndoor(e)}})),c.a.createElement("span",null,c.a.createElement("select",{defaultValue:d,onChange:this.ChangeBuild},r.length>0&&r.map((function(e,t){return c.a.createElement("option",{key:t,value:e.id},e.build_name)})))),c.a.createElement("span",null,c.a.createElement("select",{defaultValue:m,onChange:this.ChangeFloor},u.length>0&&u.map((function(e,t){return c.a.createElement("option",{key:t,value:e.id},e.floor_name)}))))),c.a.createElement("div",{className:"configBut",style:{marginLeft:"10px"}},c.a.createElement("button",{style:{float:"left"},onClick:function(e){return t.SaveLiu(e,1)}},"\u7ed8\u5236"),c.a.createElement("button",{style:{float:"left"},onClick:function(){return t.DingSave()}},"\u4fdd\u5b58"))):"",h?c.a.createElement("div",{className:"configDataRight",style:{width:"68%",color:"#fff",marginLeft:"5px"}},c.a.createElement("div",{className:"PositionName"},c.a.createElement("span",null,"\u76d1\u5ba4\u540d\u79f0"),c.a.createElement("input",{type:"text",value:o,onChange:function(e){return t.ChangeName(e)}})),c.a.createElement("div",{className:"PositionFloor",style:{marginTop:"10px"}},c.a.createElement("span",null,c.a.createElement("label",null,"\u5ba4\u5185\uff1a"),c.a.createElement("input",{type:"checkbox",checked:i,onChange:function(e){return t.handleIsIndoor(e)}})),c.a.createElement("span",null,c.a.createElement("select",{defaultValue:d,onChange:this.ChangeBuild},r.length>0&&r.map((function(e,t){return c.a.createElement("option",{key:t,value:e.id},e.build_name)})))),c.a.createElement("span",null,c.a.createElement("select",{defaultValue:m,onChange:this.ChangeFloor},u.length>0&&u.map((function(e,t){return c.a.createElement("option",{key:t,value:e.id},e.floor_name)}))))),c.a.createElement("div",{className:"configBut",style:{marginLeft:"10px"}},c.a.createElement("button",{style:{float:"left"},onClick:function(e){return t.SaveLiu(e,2)}},"\u7ed8\u5236"),c.a.createElement("button",{style:{float:"left"},onClick:function(){return t.DingSaveTwo()}},"\u4fdd\u5b58"))):""):"",c.a.createElement("div",{className:"PageShow1 device3Show"},c.a.createElement("div",{className:"PageShowCont"},c.a.createElement("h1",null,"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u561b\uff01"),c.a.createElement("h2",null,c.a.createElement("button",{onClick:function(){return t.PageDeleted3()}},"\u786e\u5b9a"),c.a.createElement("button",{onClick:function(){return e.PageHide()}},"\u53d6\u6d88")))))}}]),d}(s.PureComponent);t.a=Object(d.b)(null,(function(){return{navClick:function(e){console.log(e),p.this.setState({isLoading:!1})}}}))(p)}).call(this,a(18))},375:function(e,t,a){"use strict";var n=a(9),l=a(10),o=a(2),i=a(12),r=a(11),s=a(0),c=a.n(s),d=a(16),u=a(21),m=a(3),h=a(376),f=a(377),g=a(378),p=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var l;return Object(n.a)(this,a),(l=t.call(this,e)).state={isShow:!0,navItem:0},a.this=Object(o.a)(l),l}return Object(l.a)(a,[{key:"navItemClick",value:function(e){this.setState({isShow:!1,navItem:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.adminItem,n=t.adminIndex,l=t.navClick,o=this.state,i=o.isShow,r=o.navItem;return c.a.createElement(s.Fragment,null,c.a.createElement("li",{key:"5",className:5===a?"cur":"",onClick:function(){return l(5,3)}},"\u5de1\u903b\u8def\u7ebf"),c.a.createElement("div",null,5===a&&i?c.a.createElement("div",{className:"navItem",style:{left:"562px"}},c.a.createElement("li",{className:1===r?"cur":"",onClick:function(){return e.navItemClick(1)}},"\u5de1\u903b\u8def\u7ebf"),c.a.createElement("li",{className:2===r?"cur":"",onClick:function(){return e.navItemClick(2)}},"\u5de1\u903b\u9884\u6848"),c.a.createElement("li",{className:3===r?"cur":"",onClick:function(){return e.navItemClick(3)}},"\u6f2b\u6e38\u8def\u7ebf")):"",3===n&&1===r?c.a.createElement(h.a,null):"",3===n&&2===r?c.a.createElement(f.a,null):"",3===n&&3===r?c.a.createElement(g.a,null):""))}}]),a}(s.PureComponent);t.a=Object(d.b)((function(e){return{adminItem:e.admin.get("adminItem"),adminIndex:e.admin.get("adminIndex")}}),(function(e){return{navClick:function(t,a){m.a.Close(),e(u.a.nav_click(t,a)),p.this.setState({navItem:0}),5===t&&p.this.setState({isShow:!0})}}}))(p)},376:function(e,t,a){"use strict";(function(e){var n=a(14),l=a(9),o=a(10),i=a(2),r=a(12),s=a(11),c=a(0),d=a.n(c),u=a(3),m=a(5),h=a.n(m),f=a(1),g=a.n(f),p=function(t){Object(r.a)(m,t);var a=Object(s.a)(m);function m(t){var n;return Object(l.a)(this,m),(n=a.call(this,t)).ChangeRouteName=function(e){m.this.setState({RouteName:e.target.value})},n.changeNumber=function(e){m.this.setState({buffer:e.target.value})},n.ChangeBuild=function(t){t.preventDefault(),console.log(t.target.value),h.a.post(e.Url+"map/floor/list",{build_id:t.target.value}).then((function(t){var a=t.data.data;a?(console.log(a),m.this.setState({floor:a,floorId:a[0].id})):(g()(".PageShow").show().find("h1").html(t.data.msg),e.Time())})),m.this.setState({buildId:t.target.value})},n.ChangeFloor=function(e){e.preventDefault(),console.log(e.target.value),m.this.setState({floorId:e.target.value})},n.state={isShow:!0,RouteName:"",buffer:5,mapData:[],treeList:[],AlarmShow:!1,indoor:!1,buildId:"",build:[],floorId:"",floor:[],deleteId:"",change:!1,changeId:"",autopatrol:!1},m.this=Object(i.a)(n),n.Loading=n.Loading.bind(Object(i.a)(n)),n.Save=n.Save.bind(Object(i.a)(n)),n.onContextMenu=n.onContextMenu.bind(Object(i.a)(n)),n.deleted=n.deleted.bind(Object(i.a)(n)),n.PageDeletedRoute=n.PageDeletedRoute.bind(Object(i.a)(n)),n.NavClick=n.NavClick.bind(Object(i.a)(n)),n.NewOne=n.NewOne.bind(Object(i.a)(n)),n.changeSave=n.changeSave.bind(Object(i.a)(n)),n}return Object(o.a)(m,[{key:"NewOne",value:function(){u.a.removeEntitiesV1({id:"roamingDrawingLine"}),g()(".poly").show(),g()(".configDataLeft").find(".Alert_tk").css("display","none"),g()(".configDataLeft").children().find("li").find("span").css({color:"#fff",fontWeight:"100"}),g()(".Map").css({width:"500px"}),g()(".configDataRight").css({width:"319px"}),m.this.setState({change:!1,RouteName:"",buffer:5,AlarmShow:!1,indoor:!1,buildId:"",build:[],floorId:"",floor:[]})}},{key:"Map",value:function(t){var a=this.state,n={indoor:a.indoor,build_id:a.buildId,floor_id:a.floorId},l=Object.assign(t,n);console.log(t,l),h.a.post(e.Url+"business/selectCamera",l).then((function(t){var a=t.data.data;a?(console.log(a),m.this.setState({AlarmShow:!0,mapData:a})):(g()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"componentDidMount",value:function(){document.oncontextmenu=function(){return!1},window.receiveMessageFromIndex=function(e){if(void 0!==e)switch(e.data.switchName){case"roamingDrawingLine":console.log(e.data),m.this.Map(e.data);break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1),this.Loading()}},{key:"onContextMenu",value:function(e,t){e.stopPropagation(),console.log(t),g()("#liTest"+t).parents().find("span").css({color:"#fff",fontWeight:"100"}),g()("#liTest"+t).find("span").css({color:"#54b2df",fontWeight:"bold"}),g()("#liTest"+t).siblings().find("span").css({color:"#fff",fontWeight:"100"}),g()("#liTest"+t).children().find("span").css({color:"#fff",fontWeight:"100"}),g()(".layer_t").find("span").css({color:"#fff",fontWeight:"100"}),g()(".Alert_tk").css("display","none"),g()("#liTest"+t).find(".Alert_tk").css("display","block"),g()(".poly").show(),g()(".Map").css({width:"500px"}),g()(".configDataRight").css({width:"319px"}),m.this.setState({change:!1,RouteName:"",buffer:5,AlarmShow:!1,indoor:!1,buildId:"",build:[],floorId:"",floor:[]})}},{key:"Loading",value:function(){h.a.get(e.Url+"patrol/line/list").then((function(t){var a=t.data.data;a?(console.log(a),m.this.setState({treeList:a})):(g()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"Close",value:function(e){101===e?m.this.setState({isShow:!0,AlarmShow:!1}):m.this.setState({isShow:!1,AlarmShow:!1})}},{key:"Polygon",value:function(){u.a.removeEntitiesV1({id:"roamingDrawingLine"});var t=this.state.buffer;m.this.setState({mapData:[],AlarmShow:!1}),t?u.a.roamingDrawingLine({distance:parseInt(t)}):(g()(".PageShow").show().find("h1").html("\u8bf7\u8f93\u5165\u7f13\u51b2\u533a\u57df\uff01"),e.Time())}},{key:"changeIsenable",value:function(e,t,a,l){e.stopPropagation(),console.log(t,a,l),setTimeout((function(){var e=!l;console.log(e);var o=m.this.state.mapData;o=o.map((function(l,o){return t===o?Object(n.a)(Object(n.a)({},l),{},{patrol_camera:l.patrol_camera.map((function(t,l){return t.camera_code===a?Object(n.a)(Object(n.a)({},t),{},{enable:e}):t}))}):l})),m.this.setState({mapData:o}),console.log(o,m.this.state.mapData)}),0)}},{key:"changeIskey",value:function(e,t,a,l){e.stopPropagation(),console.log(t,a,l),setTimeout((function(){var e=!l;console.log(e);var o=m.this.state.mapData;o=o.map((function(l,o){return t===o?Object(n.a)(Object(n.a)({},l),{},{patrol_camera:l.patrol_camera.map((function(t,l){return t.camera_code===a?Object(n.a)(Object(n.a)({},t),{},{key:e}):t}))}):l})),m.this.setState({mapData:o}),console.log(o,m.this.state.mapData)}),0)}},{key:"Save",value:function(){var t=this.state,a=t.RouteName,n=t.buffer,l=t.indoor,o=t.buildId,i=t.floorId,r=t.mapData;a?n?(console.log(a,n,l,o,i,r),r.length>0?h.a.post(e.Url+"patrol/line/add",{line_name:a,indoor:l,build_id:o,floor_id:i,remark:"",patrol_line_subsection:r,buffer:n}).then((function(t){var a=t.data.data;a?(console.log(a),g()(".PageShow").show().find("h1").html("\u4fdd\u5b58\u6210\u529f\uff01"),e.Time(),m.this.Loading(),m.this.setState({AlarmShow:!1,RouteName:"",buffer:5})):(g()(".PageShow").show().find("h1").html(t.data.msg),e.Time())})):(g()(".PageShow").show().find("h1").html("\u6ca1\u6709\u6444\u50cf\u5934\uff0c\u8bf7\u91cd\u65b0\u7ed8\u5236"),e.Time())):(g()(".PageShow").show().find("h1").html("\u8bf7\u8f93\u5165\u7f13\u51b2\u533a\u57df\uff01"),e.Time()):(g()(".PageShow").show().find("h1").html("\u8bf7\u8f93\u5165\u8def\u7ebf\u540d\u79f0\uff01"),e.Time())}},{key:"deleted",value:function(e,t){e.stopPropagation(),g()(".routeShow").show(),m.this.setState({deleteId:t})}},{key:"PageDeletedRoute",value:function(){g()(".routeShow").hide();var t=this.state.deleteId;h.a.post(e.Url+"patrol/line/destroy",{id:t}).then((function(t){var a=t.data.data;a?(console.log(a),g()(".Alert_tk").css("display","none"),m.this.Loading()):(g()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"NavClick",value:function(t){u.a.removeEntitiesV1({id:"roamingDrawingLine"}),g()(".Map").css({width:"850px"}),g()(".configDataRight").css({width:"650px"}),g()(".poly").hide(),g()(".configDataLeft").find(".Alert_tk").css("display","none"),g()("#liTest"+t.id).parents().find("span").css({color:"#fff",fontWeight:"100"}),g()("#liTest"+t.id).find("span").css({color:"#54b2df",fontWeight:"bold"}),g()("#liTest"+t.id).siblings().find("span").css({color:"#fff",fontWeight:"100"}),g()("#liTest"+t.id).children().find("span").css({color:"#fff",fontWeight:"100"}),g()(".layer_t").find("span").css({color:"#fff",fontWeight:"100"}),h.a.post(e.Url+"patrol/line/alllist",{id:t.id}).then((function(t){var a=t.data.data;a?(console.log(a),m.this.setState({change:!0,mapData:a.patrol_line_subsection,RouteName:a.line_name,buffer:a.buffer,AlarmShow:!1,indoor:a.indoor,buildId:a.build_id,floorId:a.floor_id,changeId:a.id})):(g()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"handleIsIndoor",value:function(t){m.this.setState((function(e){return{indoor:!e.indoor}})),m.this.state.Indoor?m.this.setState({build:[],buildId:"",floor:[],floorId:""}):h.a.get(e.Url+"map/build/list").then((function(t){var a=t.data.data;a?(console.log(a),m.this.setState({build:a,buildId:a[0].id}),h.a.post(e.Url+"map/floor/list",{build_id:a[0].id}).then((function(t){var a=t.data.data;a?(console.log(a),m.this.setState({floor:a,floorId:a[0].id})):(g()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))):(g()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"changeSave",value:function(){var t=this.state,a=t.RouteName,n=t.buffer,l=t.mapData,o=t.changeId;h.a.post(e.Url+"patrol/line/update",{id:o,line_name:a,remark:"",patrol_line_subsection:l,buffer:n}).then((function(t){var a=t.data.data;a?(console.log(a),g()(".PageShow").show().find("h1").html("\u4fee\u6539\u6210\u529f"),e.Time()):(g()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"changeIsAutopatrol",value:function(e){m.this.setState((function(e){return{autopatrol:!e.autopatrol}}))}},{key:"render",value:function(){var t=this,a=this.state,n=a.isShow,l=a.treeList,o=a.RouteName,i=a.AlarmShow,r=a.buffer,s=a.indoor,u=a.buildId,m=a.build,h=a.floorId,f=a.floor,g=a.mapData,p=a.change;return d.a.createElement(c.Fragment,null,n?d.a.createElement("div",{className:"configShow Map",style:{width:"500px",height:"480px"}},d.a.createElement("div",{className:"configShowNav"},"\u5de1\u903b\u8def\u7ebf",d.a.createElement("i",{onClick:function(){return t.Close()}})),d.a.createElement("div",{className:"configData",style:{height:"420px"}},d.a.createElement("div",{className:"configDataLeft"},d.a.createElement("button",{onClick:function(){return t.NewOne()}},"\u8bbe\u7f6e\u65b0\u8def\u7ebf"),d.a.createElement("ul",{style:{marginTop:"20px",height:"370px"}},l.length>0&&l.map((function(e,a){return d.a.createElement("li",{key:a,id:"liTest"+e.id,onClick:function(){return t.NavClick(e)},onContextMenu:function(a){return t.onContextMenu(a,e.id)}},d.a.createElement("span",null,e.line_name),d.a.createElement("div",{className:"Alert_tk",style:{display:"none"}},d.a.createElement("button",{className:"undefindList",onClick:function(a){return t.deleted(a,e.id)}},"\u5220\u9664")))})),l.length<0?d.a.createElement("span",null,"\u6682\u65e0\u6570\u636e"):null)),d.a.createElement("div",{className:"configDataRight",style:{width:"319px"}},d.a.createElement("div",{className:"Underground"},d.a.createElement("li",null,d.a.createElement("span",null,"\u8def\u7ebf\u540d\u79f0:"),d.a.createElement("input",{type:"text",value:o,onChange:function(e){return t.ChangeRouteName(e)}})),d.a.createElement("li",null,d.a.createElement("span",null,"\u7f13\u51b2\u533a\u57df\u5bbd\u5ea6:"),d.a.createElement("input",{type:"number",step:"0",value:r,onChange:function(e){return t.changeNumber(e)}}),d.a.createElement("em",null,"(\u7c73)")),d.a.createElement("li",{className:"PositionFloor poly"},d.a.createElement("span",null,d.a.createElement("label",null,"\u5ba4\u5185\uff1a"),d.a.createElement("input",{type:"checkbox",checked:s,onChange:function(e){return t.handleIsIndoor(e)}})),d.a.createElement("span",null,d.a.createElement("select",{defaultValue:u,onChange:this.ChangeBuild},m.length>0&&m.map((function(e,t){return d.a.createElement("option",{key:t,value:e.id},e.build_name)})))),d.a.createElement("span",null,d.a.createElement("select",{defaultValue:h,onChange:this.ChangeFloor},f.length>0&&f.map((function(e,t){return d.a.createElement("option",{key:t,value:e.id},e.floor_name)}))))),d.a.createElement("li",{className:"poly"},d.a.createElement("button",{onClick:function(){return t.Polygon()}},"\u7ed8\u5236\u8def\u7ebf")),p?d.a.createElement("div",{className:"RouteNav"},d.a.createElement("h1",null,d.a.createElement("span",null,"\u6bb5\u843d"),d.a.createElement("span",{style:{width:"321px"}},"\u540d\u79f0"),d.a.createElement("span",null,"\u662f\u5426\u542f\u7528"),d.a.createElement("span",{style:{width:"99px"}},"\u662f\u5426\u91cd\u70b9")),d.a.createElement("div",{className:"RouteTable"},g.length>0&&g.map((function(e,a){return d.a.createElement("div",{key:a},d.a.createElement("h2",null,"\u7b2c",a+1,"\u6bb5"),d.a.createElement("ul",null,e.patrol_camera.map((function(e,n){return d.a.createElement("li",{key:n,id:"liTest"+e.camera_code},d.a.createElement("span",null,e.camera_name),d.a.createElement("span",null,d.a.createElement("input",{type:"checkbox",defaultValue:e.enable,checked:e.enable,onChange:function(n){return t.changeIsenable(n,a,e.camera_code,e.enable)}})),d.a.createElement("span",null,d.a.createElement("input",{className:"active",type:"checkbox",defaultValue:e.key,checked:e.key,onChange:function(n){return t.changeIskey(n,a,e.camera_code,e.key)}})))})),e.patrol_camera.length<=0?d.a.createElement("li",null,d.a.createElement("span",{style:{width:"100%"}},"\u6682\u65e0\u6570\u636e")):null))})),g.length<0?d.a.createElement("span",null,"\u6682\u65e0\u6570\u636e"):null),d.a.createElement("div",{className:"configBut",style:{marginTop:"2px"}},d.a.createElement("button",{onClick:function(){return t.changeSave()}},"\u4fee\u6539\u786e\u5b9a"))):null)))):"",i?d.a.createElement("div",{className:"configShow",style:{width:"700px",height:"480px",left:"70px"}},d.a.createElement("div",{className:"configShowNav"},"\u8def\u7ebf\u6444\u50cf\u5934",d.a.createElement("i",{onClick:function(){return t.Close(101)}})),d.a.createElement("div",{className:"configData"},d.a.createElement("div",{className:"RouteNav"},d.a.createElement("h1",null,d.a.createElement("span",null,"\u6bb5\u843d"),d.a.createElement("span",null,"\u540d\u79f0"),d.a.createElement("span",null,"\u662f\u5426\u542f\u7528"),d.a.createElement("span",null,"\u662f\u5426\u91cd\u70b9")),d.a.createElement("div",{className:"RouteTable",style:{height:"270px"}},g.length>0&&g.map((function(e,a){return d.a.createElement("div",{key:a},d.a.createElement("h2",null,"\u7b2c",a+1,"\u6bb5"),d.a.createElement("ul",null,e.patrol_camera.map((function(e,n){return d.a.createElement("li",{key:n,id:"liTest"+e.camera_code},d.a.createElement("span",null,e.camera_name),d.a.createElement("span",null,d.a.createElement("input",{type:"checkbox",defaultValue:e.enable,checked:e.enable,onChange:function(n){return t.changeIsenable(n,a,e.camera_code,e.enable)}})),d.a.createElement("span",null,d.a.createElement("input",{className:"active",type:"checkbox",defaultValue:e.key,checked:e.key,onChange:function(n){return t.changeIskey(n,a,e.camera_code,e.key)}})))})),e.patrol_camera.length<=0?d.a.createElement("li",null,d.a.createElement("span",{style:{width:"100%"}},"\u6682\u65e0\u6570\u636e")):null))})),g.length<=0?d.a.createElement("div",{className:"noneDate"},"\u6682\u65e0\u6570\u636e"):null),d.a.createElement("div",{className:"configBut",style:{marginTop:"15px"}},d.a.createElement("button",{onClick:function(){return t.Save()}},"\u4fdd\u5b58"))))):"",d.a.createElement("div",{className:"PageShow1 routeShow"},d.a.createElement("div",{className:"PageShowCont"},d.a.createElement("h1",null,"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u561b\uff01"),d.a.createElement("h2",null,d.a.createElement("button",{onClick:function(){return t.PageDeletedRoute()}},"\u786e\u5b9a"),d.a.createElement("button",{onClick:function(){return e.PageHide()}},"\u53d6\u6d88")))))}}]),m}(c.PureComponent);t.a=p}).call(this,a(18))},377:function(e,t,a){"use strict";(function(e){var n=a(9),l=a(10),o=a(2),i=a(12),r=a(11),s=a(0),c=a.n(s),d=a(5),u=a.n(d),m=a(1),h=a.n(m),f=a(3),g=function(t){Object(i.a)(d,t);var a=Object(r.a)(d);function d(e){var t;return Object(n.a)(this,d),(t=a.call(this,e)).changeName=function(e){d.this.setState({name:e.target.value})},t.state={isShow:!0,oneList:{},treeList:{},list:[],name:"",deleteId:""},d.this=Object(o.a)(t),t.Close=t.Close.bind(Object(o.a)(t)),t.Grouping=t.Grouping.bind(Object(o.a)(t)),t.Save=t.Save.bind(Object(o.a)(t)),t.Save1=t.Save1.bind(Object(o.a)(t)),t.saveClose=t.saveClose.bind(Object(o.a)(t)),t.SaveRoute=t.SaveRoute.bind(Object(o.a)(t)),t.TwoRoute=t.TwoRoute.bind(Object(o.a)(t)),t}return Object(l.a)(d,[{key:"componentDidMount",value:function(){document.oncontextmenu=function(){return!1},this.Loading(),this.leftLoading()}},{key:"Loading",value:function(){u.a.get(e.Url+"patrol/line/list").then((function(t){var a=t.data.data;a?(console.log(a),d.this.setState({treeList:a})):(h()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"leftLoading",value:function(){u.a.get(e.Url+"patrol/plan/list").then((function(t){var a=t.data.data;a?(console.log(a),d.this.setState({oneList:a})):(h()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"Close",value:function(){d.this.setState({isShow:!1})}},{key:"changeCheck",value:function(t,a,n){t.stopPropagation(),console.log(n);var l=this.state.list;l.indexOf(a)>-1?(l.splice(l.indexOf(a),1),h()(".Routeli"+a).find("label").css({color:"#fff"}),f.a.removeEntitiesV1({id:a})):(l.push(a),h()(".Routeli"+a).find("label").css({color:"#50a4f4"}),u.a.post(e.Url+"patrol/line/alllist",{id:n.id}).then((function(t){var a=t.data.data;a?(console.log(a),f.a.roamingRouteDisplay(a)):(h()(".PageShow").show().find("h1").html(t.data.msg),e.Time())})));var o=l;console.log(o),d.this.setState({list:o}),console.log(d.this.state.list)}},{key:"Grouping",value:function(){h()(".Route2").find("ul").find("li").find("input").css({display:"inline-block"}),h()(".shinei").hide(),h()(".baocui").show(),h()(".Route2").find("ul").find("li").find("label").css({color:"#fff"}),h()(".Route2").find("ul").find("li").find("input").prop("checked",!1),d.this.setState({list:[]})}},{key:"Save1",value:function(){h()(".Route2").find("ul").find("li").find("input").css({display:"none"}),h()(".shinei").show(),h()(".baocui").hide(),h()(".Route2").find("ul").find("li").find("label").css({color:"#fff"});var e=this.state.list;if(e.length>0)for(var t=0;t<e.length;t++)f.a.removeEntitiesV1({id:e[t]})}},{key:"Save",value:function(){this.state.list.length<=0?(h()(".PageShow").show().find("h1").html("\u8bf7\u5148\u9009\u62e9\u5206\u7ec4\u8def\u7ebf\uff01"),e.Time(),h()(".RouteShowAlart").hide()):(h()(".Route2").find("ul").find("li").find("input").css({display:"none"}),h()(".shinei").show(),h()(".baocui").hide(),h()(".RouteShowAlart").show())}},{key:"SaveRoute",value:function(){var t=this,a=this.state,n=a.name,l=a.list;n?(console.log(n,l),h()(".RouteShowAlart").hide(),h()(".Route2").find("ul").find("li").find("label").css({color:"#fff"}),u.a.post(e.Url+"patrol/plan/add",{plan_name:n,line_id:l}).then((function(a){var n=a.data.data;if(n){console.log(n),h()(".RouteShowAlart").hide(),d.this.leftLoading();var l=t.state.list;if(l.length>0)for(var o=0;o<l.length;o++)f.a.removeEntitiesV1({id:l[o]})}else h()(".PageShow").show().find("h1").html(a.data.msg),e.Time()}))):(h()(".PageShow").show().find("h1").html("\u8bf7\u5148\u8f93\u5165\u540d\u79f0\uff01"),e.Time())}},{key:"saveClose",value:function(){h()(".RouteShowAlart").hide(),h()(".Route2").find("ul").find("li").find("label").css({color:"#fff"}),h()(".Route2").find("ul").find("li").find("input").prop("checked",!1),f.a.removeEntitiesV1({id:"roamingDrawingLine"})}},{key:"onContextMenu",value:function(e,t){e.stopPropagation(),console.log(t),h()("#RouteliTwo"+t).parents().find("span").css({color:"#fff",fontWeight:"100"}),h()("#RouteliTwo"+t).find("span").css({color:"#54b2df",fontWeight:"bold"}),h()("#RouteliTwo"+t).siblings().find("span").css({color:"#fff",fontWeight:"100"}),h()("#RouteliTwo"+t).children().find("span").css({color:"#fff",fontWeight:"100"}),h()(".layer_t").find("span").css({color:"#fff",fontWeight:"100"}),h()(".Alert_tk").css("display","none"),h()("#RouteliTwo"+t).find(".Alert_tk").css("display","block")}},{key:"deleted",value:function(e,t){e.stopPropagation(),h()(".routeShowTwo").show(),d.this.setState({deleteId:t})}},{key:"PageDeletedRoute",value:function(){h()(".routeShowTwo").hide();var t=this.state.deleteId;u.a.post(e.Url+"patrol/plan/destroy",{id:t}).then((function(t){var a=t.data.data;a?(console.log(a),h()(".Alert_tk").css("display","none"),d.this.leftLoading()):(h()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"TwoRoute",value:function(t){console.log(t),h()(".Route2two ul li").css({color:"#fff",fontWeight:"300"}),u.a.post(e.Url+"/patrol/plan/list",{plan_id:t.id}).then((function(a){var n=a.data.data;if(n){if(console.log(n),!(n.length>0))return null;h()("#RouteliTwo"+t.id).css({color:"#268ae4",fontWeight:"bold"}),h()(".Route2 ul li").css({color:"#fff",fontWeight:"300"});for(var l=0;l<n.length;l++)h()(".Routeli"+n[l].id).css({color:"#268ae4",fontWeight:"bold"})}else h()(".PageShow").show().find("h1").html(a.data.msg),e.Time()}))}},{key:"render",value:function(){var t=this,a=this.state,n=a.isShow,l=a.treeList,o=a.name,i=a.oneList;return c.a.createElement(s.Fragment,null,n?c.a.createElement("div",{className:"configShow Map",style:{height:"450px"}},c.a.createElement("div",{className:"configShowNav"},"\u5de1\u903b\u9884\u6848",c.a.createElement("i",{onClick:function(){return t.Close()}})),c.a.createElement("div",{className:"configData",style:{height:"390px"}},c.a.createElement("div",{className:"configDataLeft Route2two",style:{height:"390px"}},c.a.createElement("button",null,"\u9884\u6848\u5217\u8868"),c.a.createElement("ul",{style:{marginTop:"20px",height:"390px"}},i.length>0&&i.map((function(e,a){return c.a.createElement("li",{key:e.id,id:"RouteliTwo"+e.id,title:e.plan_name,onContextMenu:function(a){return t.onContextMenu(a,e.id)},onClick:function(){return t.TwoRoute(e)}},c.a.createElement("span",null,e.plan_name),c.a.createElement("div",{className:"Alert_tk",style:{display:"none",marginTop:"10px"}},c.a.createElement("button",{className:"undefindList",onClick:function(a){return t.deleted(a,e.id)}},"\u5220\u9664")))})),i.length<=0?c.a.createElement("span",null,"\u6682\u65e0\u6570\u636e"):null)),c.a.createElement("div",{className:"configDataRight Route2",style:{width:"260px",marginLeft:"10px"}},c.a.createElement("ul",null,l.length>0&&l.map((function(e,a){return c.a.createElement("li",{key:e.id,className:"Routeli"+e.id},c.a.createElement("input",{style:{display:"none"},type:"checkbox",value:e.id,id:e.id,onChange:function(a){return t.changeCheck(a,e.id,e)}}),c.a.createElement("label",{htmlFor:e.id},e.line_name))}))),c.a.createElement("div",{className:"configBut",style:{marginTop:"15px"}},c.a.createElement("button",{className:"cur shinei",onClick:function(){return t.Grouping()}},"\u5ba4\u5185\u5916\u5206\u7ec4"),c.a.createElement("button",{className:"none baocui",style:{display:"none"},onClick:function(){return t.Save()}},"\u786e\u5b9a"),c.a.createElement("button",{className:"none baocui",style:{display:"none"},onClick:function(){return t.Save1()}},"\u53d6\u6d88"))))):"",c.a.createElement("div",{className:"RouteShowAlart"},c.a.createElement("div",{className:"RouteShowAlartHide"},c.a.createElement("h1",null,"\u9884\u6848\u8def\u7ebf\u540d\u79f0",c.a.createElement("i",{onClick:function(){return t.saveClose()}})),c.a.createElement("input",{type:"text",value:o,onChange:function(e){return t.changeName(e)}}),c.a.createElement("button",{onClick:function(){return t.SaveRoute()}},"\u4fdd\u5b58"))),c.a.createElement("div",{className:"PageShow1 routeShowTwo"},c.a.createElement("div",{className:"PageShowCont"},c.a.createElement("h1",null,"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u561b\uff01"),c.a.createElement("h2",null,c.a.createElement("button",{onClick:function(){return t.PageDeletedRoute()}},"\u786e\u5b9a"),c.a.createElement("button",{onClick:function(){return e.PageHide()}},"\u53d6\u6d88")))))}}]),d}(s.PureComponent);t.a=g}).call(this,a(18))},378:function(e,t,a){"use strict";(function(e){var n=a(9),l=a(10),o=a(2),i=a(12),r=a(11),s=a(0),c=a.n(s),d=a(3),u=a(5),m=a.n(u),h=a(1),f=a.n(h),g=function(t){Object(i.a)(u,t);var a=Object(r.a)(u);function u(e){var t;return Object(n.a)(this,u),(t=a.call(this,e)).ChangeRouteName=function(e){u.this.setState({RouteName:e.target.value})},t.state={isShow:!0,RouteName:"",buffer:5,mapData:[],treeList:[],AlarmShow:!1,indoor:!1,buildId:"",build:[],floorId:"",floor:[],deleteId:"",change:!1,changeId:"",autopatrol:!1,positions:[]},u.this=Object(o.a)(t),t.Loading=t.Loading.bind(Object(o.a)(t)),t.Save=t.Save.bind(Object(o.a)(t)),t.onContextMenu=t.onContextMenu.bind(Object(o.a)(t)),t.deleted=t.deleted.bind(Object(o.a)(t)),t.PageDeletedRoute=t.PageDeletedRoute.bind(Object(o.a)(t)),t.NavClick=t.NavClick.bind(Object(o.a)(t)),t.NewOne=t.NewOne.bind(Object(o.a)(t)),t}return Object(l.a)(u,[{key:"NewOne",value:function(){d.a.GeneratePolyline("gb"),d.a.removeEntitiesV1({id:"roamingDrawingLine"}),f()(".poly").show(),f()(".configDataLeft").find(".Alert_tk").css("display","none"),f()(".configDataLeft").children().find("li").find("span").css({color:"#fff",fontWeight:"100"}),u.this.setState({RouteName:"",positions:[]})}},{key:"componentDidMount",value:function(){document.oncontextmenu=function(){return!1},window.receiveMessageFromIndex=function(e){if(void 0!==e)switch(e.data.switchName){case"roamingDrawingLine":console.log(e.data.positions_t,"\u6f2b\u6e38\u6570\u636e"),u.this.setState({positions:e.data.positions_t});break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1),this.Loading()}},{key:"onContextMenu",value:function(e,t){e.stopPropagation(),f()("#liTest"+t).find("span").css({color:"#54b2df",fontWeight:"bold"}),f()("#liTest"+t).siblings().find("span").css({color:"#fff",fontWeight:"100"}),f()(".Alert_tk").css("display","none"),f()("#liTest"+t).find(".Alert_tk").css("display","block"),f()(".poly").show(),u.this.setState({RouteName:"",positions:[]})}},{key:"Loading",value:function(){m.a.get("http://192.168.0.111:8090/33010801001/roam/fly/list").then((function(t){var a=t.data.data;a?u.this.setState({treeList:a}):(f()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"Close",value:function(){u.this.setState({isShow:!1}),d.a.GeneratePolyline("gb")}},{key:"Polygon",value:function(){var t=this.state.buffer;d.a.removeEntitiesV1({id:"roamingDrawingLine"}),u.this.setState({mapData:[],AlarmShow:!1}),t?d.a.roamingDrawingLine({distance:parseInt(t)}):(f()(".PageShow").show().find("h1").html("\u8bf7\u8f93\u5165\u7f13\u51b2\u533a\u57df\uff01"),e.Time())}},{key:"Save",value:function(){var t=this.state,a=t.RouteName,n=t.positions;a?0===n.length?(f()(".PageShow").show().find("h1").html("\u8bf7\u7ed8\u5236\u8def\u7ebf\uff01"),e.Time()):(console.log(n,"positions"),m.a.post("http://192.168.0.111:8090/33010801001/roam/fly/add",{roam_name:a,position:n}).then((function(t){console.log(t,"resresresresresresresresresresres");var a=t.data.data;a?(console.log(a),f()(".PageShow").show().find("h1").html("\u4fdd\u5b58\u6210\u529f\uff01"),e.Time(),u.this.Loading(),u.this.setState({RouteName:"",positions:[]})):(f()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))):(f()(".PageShow").show().find("h1").html("\u8bf7\u8f93\u5165\u8def\u7ebf\u540d\u79f0\uff01"),e.Time())}},{key:"deleted",value:function(e,t){e.stopPropagation(),f()(".routeShow").show(),u.this.setState({deleteId:t})}},{key:"PageDeletedRoute",value:function(){f()(".routeShow").hide();var t=this.state.deleteId;m.a.post("http://192.168.0.111:8090/33010801001/roam/fly/destroy",{id:t}).then((function(t){var a=t.data.data;a?(console.log(a),f()(".Alert_tk").css("display","none"),u.this.Loading()):(f()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"NavClick",value:function(e){f()(".configDataLeft").find(".Alert_tk").css("display","none"),f()("#liTest"+e.id).find("span").css({color:"#54b2df",fontWeight:"bold"}),f()("#liTest"+e.id).siblings().find("span").css({color:"#fff",fontWeight:"100"}),f()(".poly").hide(),u.this.setState({RouteName:e.roam_name}),d.a.GeneratePolyline(e.position)}},{key:"render",value:function(){var t=this,a=this.state,n=a.isShow,l=a.treeList,o=a.RouteName;return c.a.createElement(s.Fragment,null,n?c.a.createElement("div",{className:"configShow Map",style:{width:"500px",height:"480px"}},c.a.createElement("div",{className:"configShowNav"},"\u6f2b\u6e38\u8def\u7ebf",c.a.createElement("i",{onClick:function(){return t.Close()}})),c.a.createElement("div",{className:"configData",style:{height:"420px"}},c.a.createElement("div",{className:"configDataLeft"},c.a.createElement("button",{onClick:function(){return t.NewOne()}},"\u8bbe\u7f6e\u65b0\u8def\u7ebf"),c.a.createElement("ul",{style:{marginTop:"20px",height:"370px"}},l.length>0&&l.map((function(e,a){return c.a.createElement("li",{key:a,id:"liTest"+e.id,onClick:function(){return t.NavClick(e)},onContextMenu:function(a){return t.onContextMenu(a,e.id)}},c.a.createElement("span",null,e.roam_name),c.a.createElement("div",{className:"Alert_tk",style:{display:"none"}},c.a.createElement("button",{className:"undefindList",onClick:function(a){return t.deleted(a,e.id)}},"\u5220\u9664")))})),l.length<0?c.a.createElement("span",null,"\u6682\u65e0\u6570\u636e"):null)),c.a.createElement("div",{className:"configDataRight",style:{width:"319px"}},c.a.createElement("div",{className:"Underground"},c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("span",null,"\u8def\u7ebf\u540d\u79f0:"),c.a.createElement("input",{type:"text",value:o,onChange:function(e){return t.ChangeRouteName(e)}})),c.a.createElement("li",{className:"poly"},c.a.createElement("button",{onClick:function(){return t.Polygon()},className:"caozuo1"},"\u7ed8\u5236\u8def\u7ebf"),c.a.createElement("button",{className:"caozuo2",style:{marginLeft:"30px"},onClick:function(){return t.Save()}},"\u786e\u5b9a\u4fdd\u5b58"))))))):"",c.a.createElement("div",{className:"PageShow1 routeShow"},c.a.createElement("div",{className:"PageShowCont"},c.a.createElement("h1",null,"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u561b\uff01"),c.a.createElement("h2",null,c.a.createElement("button",{onClick:function(){return t.PageDeletedRoute()}},"\u786e\u5b9a"),c.a.createElement("button",{onClick:function(){return e.PageHide()}},"\u53d6\u6d88")))))}}]),u}(s.PureComponent);t.a=g}).call(this,a(18))},379:function(e,t,a){"use strict";var n=a(9),l=a(10),o=a(2),i=a(12),r=a(11),s=a(0),c=a.n(s),d=a(16),u=a(21),m=a(3),h=a(380),f=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var l;return Object(n.a)(this,a),(l=t.call(this,e)).state={Display:!1,Item:0},a.this=Object(o.a)(l),l.navItemClick=l.navItemClick.bind(Object(o.a)(l)),l}return Object(l.a)(a,[{key:"navItemClick",value:function(e){console.log(e),a.this.setState({Display:!1,Item:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.Display,n=t.Item,l=this.props,o=l.adminItem,i=l.navClick,r=l.adminIndex;return c.a.createElement(s.Fragment,null,c.a.createElement("li",{key:"6",className:6===o?"cur":"",onClick:function(){return i(6,4)}},"\u7279\u6548\u914d\u7f6e"),c.a.createElement("div",null,6===o&&a?c.a.createElement("div",{className:"navItem",style:{left:"700px"}},c.a.createElement("li",{className:1===n?"cur":"",onClick:function(){return e.navItemClick(1)}},"\u53ef\u89c6\u533a\u57df")):"",4===r&&1===n?c.a.createElement(h.a,null):""))}}]),a}(s.PureComponent);t.a=Object(d.b)((function(e){return{adminItem:e.admin.get("adminItem"),adminIndex:e.admin.get("adminIndex")}}),(function(e){return{navClick:function(t,a){e(u.a.nav_click(t,a)),m.a.Close(),f.this.setState({Display:!0})}}}))(f)},38:function(e,t,a){"use strict";var n={};a.r(n),a.d(n,"click_Icon",(function(){return r})),a.d(n,"click_Icon_Item",(function(){return s})),a.d(n,"click_Icon_Item_Nav",(function(){return c}));var l=a(149),o=Object(l.a)({index:0,moreIndex:0,moreIndexItem:0}),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"footer/CLICK_ICON":return e.merge({index:t.item,moreIndex:0,moreIndexItem:0});case"footer/CLICK_ICON_ITEM":return e.merge({moreIndex:t.item,moreIndexItem:0});case"footer/CLICK_ICON_ITEM_NAV":return e.set("moreIndexItem",t.item);default:return e}},r=function(e){return{type:"footer/CLICK_ICON",item:e}},s=function(e){return{type:"footer/CLICK_ICON_ITEM",item:e}},c=function(e){return{type:"footer/CLICK_ICON_ITEM_NAV",item:e}};a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return n}))},380:function(e,t,a){"use strict";(function(e){var n=a(14),l=a(33),o=a(70),i=a(9),r=a(10),s=a(2),c=a(12),d=a(11),u=a(0),m=a.n(u),h=a(5),f=a.n(h),g=a(1),p=a.n(g),v=a(3),y=a(6),b=a.n(y),E=a(28),w=function(t){Object(c.a)(h,t);var a=Object(d.a)(h);function h(e){var t;return Object(i.a)(this,h),(t=a.call(this,e)).state={isShow:!0,TreeList:[],TwoShow:!1,labelId:"",gridName:"",options:{},pid:"",deviceCode:"",twoChangeSure:!1,Polygon_style:{shapeColor:"#ff0000",shapeTransparency:"50",borderWitchPolygon:"1",borderColor:"#ffffff",borderTransparency:"50"},areaPicker:!1,areaBorderPicker:!1},h.this=Object(s.a)(t),t.Close=t.Close.bind(Object(s.a)(t)),t.onMenuClicked=t.onMenuClicked.bind(Object(s.a)(t)),t.saveDraw=t.saveDraw.bind(Object(s.a)(t)),t.saveSure=t.saveSure.bind(Object(s.a)(t)),t.saveSureChange=t.saveSureChange.bind(Object(s.a)(t)),t}return Object(r.a)(h,[{key:"Close",value:function(){h.this.setState({isShow:!1})}},{key:"componentDidMount",value:function(){this.Load(),window.receiveMessageFromIndex=function(e){if(void 0!==e)switch(e.data.switchName){case"drawPolygon":console.log(e.data),h.this.setState({options:e.data.parameter,pid:e.data.id});break;default:return null}},window.addEventListener("message",window.receiveMessageFromIndex,!1)}},{key:"Load",value:function(){f.a.post(e.Url+"business/resourcesMap",{category_id:"19242F0F746DDE464239EF7ECE11E63F"}).then((function(t){var a=t.data.data;console.log(a),a&&"success"===t.data.msg?h.this.setState({TreeList:a}):(p()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"generateMenu",value:function(e){var t=this,a=[];if(e instanceof Array){var n,l=[],i=Object(o.a)(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;l.push(this.generateMenu(r))}}catch(s){i.e(s)}finally{i.f()}a.push(m.a.createElement("ul",{key:"single",style:{height:"auto"}},l))}else{if(null==e)return;a.push(m.a.createElement("li",{key:e,className:"newMap",id:"Effect"+e.id,style:{width:"100%"}},m.a.createElement("span",{onClick:function(a){return t.onMenuClicked(a,e)}},function(){switch(e.node_type){case"grid_region":return m.a.createElement("i",{className:"group"});case"grid_info":return m.a.createElement("i",{className:"grid"});case"device_info":return m.a.createElement("i",{className:"details"});default:return null}}(),function(){switch(e.node_type){case"grid_region":return e.region_name;case"grid_info":return e.grid_name;case"device_info":return e.device_name;default:return null}}(),"device_info"===e.node_type?"":m.a.createElement("em",null,e.count)),this.generateMenu(e.children)))}return a}},{key:"onMenuClicked",value:function(t,a){t.stopPropagation();var n={id:h.this.state.pid};v.a.Emptyentities(n);var l=p()(t.target).siblings("ul");if(l.css("display","none"===l.css("display")?"block":"none"),p()("#Effect"+a.id).parents().find("li").find("span").css({color:"#fff",fontWeight:"100"}),p()("#Effect"+a.id).parents().find("span").find("i").removeClass("only"),p()("#Effect"+a.id).find("span").css({color:"#54b2df",fontWeight:"bold"}),p()("#Effect"+a.id).find("span").find("i").addClass("only"),p()("#Effect"+a.id).siblings().find("span").css({color:"#fff",fontWeight:"100"}),p()("#Effect"+a.id).siblings().find("span").find("i").removeClass("only"),p()("#Effect"+a.id).children().find("span").css({color:"#fff",fontWeight:"100"}),p()("#Effect"+a.id).children().find("span").find("i").removeClass("only"),"device_info"===a.node_type){var o={id:a.id};v.a.CoordinateModelID(o),v.a.returnData(a),console.log(a),h.this.setState({TwoShow:!0,gridName:a.device_name,labelId:a.id,deviceCode:a.device_code}),f.a.post(e.Url+"map/area/list",{device_id:a.id}).then((function(e){var t=e.data.data;console.log(t),t.length>0&&"success"===e.data.msg?(setTimeout((function(){h.this.setState({Polygon_style:t[0].style,position:t[0].position,twoChangeSure:!1})}),10),console.log(t[0]),v.a.VisibleArea(t[0])):setTimeout((function(){h.this.setState({Polygon_style:{shapeColor:"#ff0000",shapeTransparency:"50",borderWitchPolygon:"1",borderColor:"#ffffff",borderTransparency:"50"},twoChangeSure:!0})}),10)}))}}},{key:"ChangeColor",value:function(e){var t=h.this.state.Polygon_style;t.shapeColor=e.target.value,h.this.setState(t)}},{key:"changeColorTransparency",value:function(e){var t=h.this.state.Polygon_style;t.shapeTransparency=e.target.value,h.this.setState(t)}},{key:"ChangeBorderWidth",value:function(e){var t=h.this.state.Polygon_style;t.borderWitchPolygon=e.target.value,h.this.setState(t)}},{key:"changeBorderColor",value:function(e){var t=h.this.state.Polygon_style;t.borderColor=e.target.value,h.this.setState(t)}},{key:"changeBorderTransparency",value:function(e){var t=h.this.state.Polygon_style;t.borderTransparency=e.target.value,h.this.setState(t)}},{key:"saveDraw",value:function(){v.a.ClearHandler();var e={id:h.this.state.pid};v.a.Emptyentities(e);var t={id:"",Polygon_style:this.state.Polygon_style};console.log(t),v.a.drawPolygon(t)}},{key:"saveSure",value:function(){v.a.ClearHandler();var t=this.state,a=t.options,n=t.labelId,l=t.deviceCode,o=t.gridName;if("{}"===JSON.stringify(a))p()(".PageShow").show().find("h1").html("\u8bf7\u5148\u7ed8\u5236\u56fe\u5c42!"),e.Time();else{var i={style:a.style,position:a.position,device_id:n,device_code:l,device_name:o};console.log(i),f.a.post(e.Url+"map/area/add",i).then((function(t){var a=t.data;console.log(a),a&&"success"===t.data.msg?(p()(".PageShow").show().find("h1").html("\u4fdd\u5b58\u6210\u529f!"),e.Time()):(p()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}}},{key:"saveSureChange",value:function(){v.a.ClearHandler();var t=this.state,a=t.options,n=t.labelId,l=t.deviceCode,o=t.gridName,i={style:a.style,position:a.position,device_id:n,device_code:l,device_name:o};console.log(i),f.a.post(e.Url+"map/area/update",i).then((function(t){var a=t.data;console.log(a),a&&"success"===t.data.msg?(p()(".PageShow").show().find("h1").html("\u4fee\u6539\u6210\u529f!"),e.Time()):(p()(".PageShow").show().find("h1").html("\u8bf7\u91cd\u65b0\u7ed8\u5236\uff01"),e.Time())}))}},{key:"handlePalette",value:function(e){this.setState(Object(l.a)({},e,!this.state[e]))}},{key:"handlePaletteClose",value:function(e){this.setState(Object(l.a)({},e,!1))}},{key:"handleChoosePalette",value:function(e,t,a){this.setState(Object(l.a)({},t,Object(n.a)(Object(n.a)({},this.state[t]),{},Object(l.a)({},e,a.hex))))}},{key:"render",value:function(){var e=this,t=this.state,a=t.isShow,l=t.TreeList,o=t.TwoShow,i=t.gridName,r=t.Polygon_style,s=t.twoChangeSure,c=t.areaPicker,d=t.areaBorderPicker,h=b()({default:{outer:{position:"relative",marginLeft:"80px",marginTop:"3px"},color:{width:"50px",height:"25px",borderRadius:"2px",background:""},popover:{position:"absolute",zIndex:"2",top:"30px",right:"120px"},cover:{position:"fixed",bottom:"0px",left:"0px",right:"0px",top:"0px"}}});return m.a.createElement(u.Fragment,null,a?m.a.createElement("div",{className:"configShow",style:{height:"750px",width:"335px"}},m.a.createElement("div",{className:"configShowNav"},"\u53ef\u89c6\u5316\u533a\u57df\u8bbe\u7f6e",m.a.createElement("i",{onClick:function(){return e.Close()}})),m.a.createElement("div",{className:"configData",style:{height:"690px"}},m.a.createElement("div",{className:"configDataLeft Route2two",style:{height:"680px",width:"280px",border:"0"}},m.a.createElement("div",{className:"ResourceMapTree",style:{margin:"15px 0 0 -15px"}},m.a.createElement("h2",null,m.a.createElement("span",null,"\u6444\u50cf\u5934\u5217\u8868")),m.a.createElement("div",{className:"ResourceMapTreeUl",style:{height:"auto"}},this.generateMenu(l)))))):"",o?m.a.createElement("div",{className:"configShow Basic",style:{marginLeft:"360px"}},m.a.createElement("div",{className:"configShowNav"},"\u53ef\u89c6\u533a\u57df\u7ed8\u5236 ",m.a.createElement("i",null)),m.a.createElement("div",null,m.a.createElement("div",{className:"EffImport one"},m.a.createElement("li",null,m.a.createElement("span",null,"\u6444\u50cf\u5934\u540d\u79f0\uff1a"),m.a.createElement("em",null,i)),m.a.createElement("li",null,m.a.createElement("span",null,"\u533a\u57df\u989c\u8272\uff1a"),m.a.createElement("div",{style:h.outer},m.a.createElement("div",{style:Object(n.a)(Object(n.a)({},h.color),{},{background:r.shapeColor}),onClick:this.handlePalette.bind(this,"areaPicker")}),c&&m.a.createElement("div",{style:h.popover},m.a.createElement("div",{style:h.cover,onClick:this.handlePaletteClose.bind(this,"areaPicker")}),m.a.createElement(E.a,{color:r.shapeColor,onChange:this.handleChoosePalette.bind(this,"shapeColor","Polygon_style")})))),m.a.createElement("li",null,m.a.createElement("span",null,"\u533a\u57df\u900f\u660e\u5ea6\uff1a"),m.a.createElement("input",{type:"range",max:"100",min:"0",value:r.shapeTransparency,onChange:function(t){return e.changeColorTransparency(t)}}),m.a.createElement("i",null,r.shapeTransparency,"%")),m.a.createElement("li",null,m.a.createElement("span",null,"\u533a\u57df\u8fb9\u6846\u5bbd\u5ea6\uff1a"),m.a.createElement("input",{type:"text",value:r.borderWitchPolygon,onChange:function(t){return e.ChangeBorderWidth(t)}})),m.a.createElement("li",null,m.a.createElement("span",null,"\u533a\u57df\u8fb9\u6846\u989c\u8272\uff1a"),m.a.createElement("div",{style:Object(n.a)(Object(n.a)({},h.outer),{},{marginLeft:"110px",marginTop:"6px"})},m.a.createElement("div",{style:Object(n.a)(Object(n.a)({},h.color),{},{background:r.borderColor}),onClick:this.handlePalette.bind(this,"areaBorderPicker")}),d&&m.a.createElement("div",{style:Object(n.a)(Object(n.a)({},h.popover),{},{right:"90px"})},m.a.createElement("div",{style:h.cover,onClick:this.handlePaletteClose.bind(this,"areaBorderPicker")}),m.a.createElement(E.a,{color:r.borderColor,onChange:this.handleChoosePalette.bind(this,"borderColor","Polygon_style")})))),m.a.createElement("li",null,m.a.createElement("span",null,"\u533a\u57df\u8fb9\u6846\u900f\u660e\u5ea6\uff1a"),m.a.createElement("input",{type:"range",max:"100",min:"0",value:r.borderTransparency,onChange:function(t){return e.changeBorderTransparency(t)}}),m.a.createElement("i",null,r.borderTransparency,"%"))),m.a.createElement("div",{className:"configBut"},s?m.a.createElement("button",{onClick:function(){return e.saveSure()}},"\u4fdd\u5b58"):m.a.createElement("button",{onClick:function(){return e.saveSureChange()}},"\u4fee\u6539\u4fdd\u5b58"),m.a.createElement("button",{onClick:function(){return e.saveDraw()}},"\u7ed8\u5236")))):"")}}]),h}(u.PureComponent);t.a=w}).call(this,a(18))},381:function(e,t,a){"use strict";(function(e){var n=a(9),l=a(10),o=a(2),i=a(12),r=a(11),s=a(0),c=a.n(s),d=a(16),u=a(21),m=a(5),h=a.n(m),f=a(1),g=a.n(f),p=a(3),v=function(t){Object(i.a)(d,t);var a=Object(r.a)(d);function d(e){var t;return Object(n.a)(this,d),(t=a.call(this,e)).ChangeLevel=function(e){e.preventDefault(),console.log(e.target.value),t.setState({Level:e.target.value})},t.state={SBList:{},tableList:{},OneList:!0,TwoList:!1,TwoName:"",AddAlarm:!1,Name:"",Level:0,isPush:!1,isLink:!1,isAlarm:!1,isWrite:!1,isEnable:!1,TwoChangeAlarm:!1,deleteId:""},d.this=Object(o.a)(t),t.ListClick=t.ListClick.bind(Object(o.a)(t)),t.ReturnOne=t.ReturnOne.bind(Object(o.a)(t)),t.AddAlarm=t.AddAlarm.bind(Object(o.a)(t)),t.Close=t.Close.bind(Object(o.a)(t)),t.syaName=t.syaName.bind(Object(o.a)(t)),t.ChangeLevel=t.ChangeLevel.bind(Object(o.a)(t)),t.configSave=t.configSave.bind(Object(o.a)(t)),t.deleteList=t.deleteList.bind(Object(o.a)(t)),t.ChangeList=t.ChangeList.bind(Object(o.a)(t)),t.configSave1=t.configSave1.bind(Object(o.a)(t)),t.PageDeleted=t.PageDeleted.bind(Object(o.a)(t)),t}return Object(l.a)(d,[{key:"componentDidMount",value:function(){this.onList()}},{key:"onList",value:function(){var t=this;h.a.post(e.Url+"device/category/list",{enable:!0}).then((function(a){var n=a.data.data;n?(console.log(n),t.setState({SBList:n})):(g()(".PageShow").show().find("h1").html(a.data.msg),e.Time())}))}},{key:"List",value:function(){h.a.post(e.Url+"event/type/list",{category_id:sessionStorage.getItem("TwoListId")}).then((function(t){var a=t.data.data;a?(console.log(a),d.this.setState({tableList:a})):(g()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"ListClick",value:function(e,t){console.log(e,t),this.setState({OneList:!1,TwoList:!0,TwoName:t}),sessionStorage.setItem("TwoListId",e),this.List()}},{key:"ReturnOne",value:function(){this.onList(),this.setState({OneList:!0,TwoList:!1,TwoName:"",AddAlarm:!1})}},{key:"AddAlarm",value:function(){this.setState({AddAlarm:!0,TwoChangeAlarm:!1,Name:"",Level:0,isPush:!1,isLink:!1,isAlarm:!1,isWrite:!1,isEnable:!1})}},{key:"Close",value:function(){this.setState({AddAlarm:!1,TwoChangeAlarm:!1})}},{key:"syaName",value:function(e){this.setState({Name:e.target.value})}},{key:"handleIsPush",value:function(){this.setState({isPush:!this.state.isPush})}},{key:"handleIsLink",value:function(){this.setState({isLink:!this.state.isLink})}},{key:"handleIsAlarm",value:function(){this.setState({isAlarm:!this.state.isAlarm})}},{key:"handleIsWrite",value:function(){this.setState({isWrite:!this.state.isWrite})}},{key:"handleIsEnable",value:function(){this.setState({isEnable:!this.state.isEnable})}},{key:"configSave",value:function(t,a,n,l,o,i,r){console.log(t,a,n,l,o,i,r),t?0===a?(g()(".PageShow").show().find("h1").html("\u8bf7\u9009\u62e9\u4e8b\u4ef6\u7b49\u7ea7!"),e.Time()):h.a.post(e.Url+"event/type/add",{category_id:sessionStorage.getItem("TwoListId"),event_name:t,event_level:a,push_data:n,link_info:l,alarm_event:o,write_log:i,enable:r}).then((function(t){var a=t.data.data;a?(console.log(a),d.this.List(),d.this.setState({OneList:!1,TwoList:!0,AddAlarm:!1})):(g()(".PageShow").show().find("h1").html(t.data.msg),e.Time())})):(g()(".PageShow").show().find("h1").html("\u8bf7\u8f93\u5165\u4e8b\u4ef6\u540d\u79f0!"),e.Time())}},{key:"deleteList",value:function(e){g()(".AlarmShow").show(),this.setState({deleteId:e})}},{key:"PageDeleted",value:function(){g()(".AlarmShow").hide();var t=this.state.deleteId;h.a.post(e.Url+"event/type/delete",{id:t}).then((function(t){var a=t.data.data;a?(console.log(a),d.this.List()):(g()(".PageShow").show().find("h1").html(t.data.msg),e.Time())}))}},{key:"ChangeList",value:function(e,t,a,n,l,o,i,r){console.log(e,t,a,n,l,o,i,r),sessionStorage.setItem("TwoListTwoId",e),d.this.setState({OneList:!1,TwoList:!0,AddAlarm:!1,TwoChangeAlarm:!0,Name:t,Level:a,isPush:n,isLink:l,isAlarm:o,isWrite:i,isEnable:r})}},{key:"configSave1",value:function(t,a,n,l,o,i,r){console.log(t,a,n,l,o,i,r),t?0===a?(g()(".PageShow").show().find("h1").html("\u8bf7\u9009\u62e9\u4e8b\u4ef6\u7b49\u7ea7!"),e.Time()):h.a.post(e.Url+"event/type/update",{id:sessionStorage.getItem("TwoListTwoId"),event_name:t,event_level:a,push_data:n,link_info:l,alarm_event:o,write_log:i,enable:r}).then((function(t){var a=t.data.data;a?(console.log(a),d.this.List(),d.this.setState({OneList:!1,TwoList:!0,AddAlarm:!1,TwoChangeAlarm:!1})):(g()(".PageShow").show().find("h1").html(t.data.msg),e.Time())})):(g()(".PageShow").show().find("h1").html("\u8bf7\u8f93\u5165\u4e8b\u4ef6\u540d\u79f0!"),e.Time())}},{key:"render",value:function(){var t=this,a=this.state,n=a.SBList,l=a.OneList,o=a.TwoList,i=a.TwoName,r=a.tableList,d=a.Name,u=a.Level,m=a.isPush,h=a.isLink,f=a.isAlarm,g=a.isWrite,p=a.isEnable,v=a.AddAlarm,y=a.TwoChangeAlarm,b=this.props,E=b.adminItem,w=b.navClick;return c.a.createElement(s.Fragment,null,c.a.createElement("li",{key:"7",className:7===E?"cur":"",onClick:function(){return w(7)}},"\u62a5\u8b66\u7ba1\u7406"),7===E&&l?c.a.createElement("div",{className:"configShow",style:{width:"500px"}},c.a.createElement("div",{className:"configShowNav"},"\u62a5\u8b66\u7ba1\u7406 ",c.a.createElement("i",{onClick:function(){return w(100)}})),c.a.createElement("div",{className:"configShowConent"},c.a.createElement("h1",{className:"cur"},"\u8bbe\u5907\u7c7b\u522b"),c.a.createElement("div",{className:"device"},n.length>0&&n.map((function(e,a){return c.a.createElement("li",{key:a,onClick:function(){return t.ListClick(e.id,e.category_name)}},c.a.createElement("img",{src:e.category_icon,alt:""}),c.a.createElement("span",null,e.category_name))}))))):"",7===E&&o?c.a.createElement("div",{className:"configShow",style:{width:"700px"}},c.a.createElement("div",{className:"configShowNav"},"\u62a5\u8b66\u7ba1\u7406",c.a.createElement("i",{onClick:function(){return w(100)}})),c.a.createElement("div",{className:"Alarm"},c.a.createElement("div",{className:"AlarmCur"},c.a.createElement("em",{onClick:function(){return t.ReturnOne()}},"\u8bbe\u5907\u7c7b\u522b")," >> ",i),c.a.createElement("h1",null,c.a.createElement("button",{onClick:function(){return t.AddAlarm()}},"\u6dfb\u52a0")),c.a.createElement("div",{className:"AlarmTable"},c.a.createElement("table",{cellPadding:"0",cellSpacing:"0"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"\u4e8b\u4ef6\u540d\u79f0"),c.a.createElement("th",null,"\u4e8b\u4ef6\u7b49\u7ea7"),c.a.createElement("th",null,"\u662f\u5426\u63a8\u9001"),c.a.createElement("th",null,"\u662f\u5426\u8054\u52a8"),c.a.createElement("th",null,"\u62a5\u8b66\u4e8b\u4ef6"),c.a.createElement("th",null,"\u5199\u5165\u65e5\u5fd7"),c.a.createElement("th",null,"\u662f\u5426\u542f\u7528"),c.a.createElement("th",null,"\u64cd\u4f5c"))),c.a.createElement("tbody",null,r.length>0&&r.map((function(e,a){return c.a.createElement("tr",{key:a},c.a.createElement("td",null,e.event_name),c.a.createElement("td",null,function(){switch(e.event_level){case 1:return c.a.createElement("span",{className:"red"},"\u9ad8");case 2:return c.a.createElement("span",{className:"orange"},"\u4e2d");case 3:return c.a.createElement("span",{className:"green"},"\u4f4e");default:return null}}()),c.a.createElement("td",null,e.push_data?c.a.createElement("span",{className:"red"},"\u5df2\u63a8\u9001"):c.a.createElement("span",{className:"green"},"\u672a\u63a8\u9001")),c.a.createElement("td",null,e.link_info?c.a.createElement("span",{className:"red"},"\u5df2\u8054\u52a8"):c.a.createElement("span",{className:"green"},"\u672a\u8054\u52a8")),c.a.createElement("td",null,e.alarm_event?c.a.createElement("span",{className:"red"},"\u62a5\u8b66\u4e8b\u4ef6"):c.a.createElement("span",{className:"green"},"\u975e\u62a5\u8b66\u4e8b\u4ef6")),c.a.createElement("td",null,e.write_log?c.a.createElement("span",{className:"red"},"\u5df2\u5199\u5165"):c.a.createElement("span",{className:"green"},"\u672a\u5199\u5165")),c.a.createElement("td",null,e.enable?c.a.createElement("span",{className:"red"},"\u5df2\u542f\u7528"):c.a.createElement("span",{className:"green"},"\u672a\u542f\u7528")),c.a.createElement("td",null,c.a.createElement("button",{className:"Edit",onClick:function(){return t.ChangeList(e.id,e.event_name,e.event_level,e.push_data,e.link_info,e.alarm_event,e.write_log,e.enable)}},c.a.createElement("i",null)),c.a.createElement("button",{className:"deletePic",onClick:function(){return t.deleteList(e.id)}},c.a.createElement("i",null))))})))),r.length<=0?c.a.createElement("div",{className:"no"},"\u6682\u65e0\u6570\u636e\uff0c\u8bf7\u5148\u6dfb\u52a0\uff01"):""))):"",7===E&&v?c.a.createElement("div",{className:"configShow",style:{width:"350px",left:"270px"}},c.a.createElement("div",{className:"configShowNav"},"\u6dfb\u52a0\u4e8b\u4ef6",c.a.createElement("i",{onClick:function(){return t.Close()}})),c.a.createElement("div",{className:"configShowConent"},c.a.createElement("div",{className:"configShowConent_cont AlarmCont"},c.a.createElement("li",null,c.a.createElement("span",null,"\u4e8b\u4ef6\u540d\u79f0\uff1a"),c.a.createElement("input",{style:{width:"150px"},type:"text",defaultValue:d,onChange:function(e){return t.syaName(e)}})),c.a.createElement("li",null,c.a.createElement("span",null,"\u4e8b\u4ef6\u7b49\u7ea7\uff1a"),c.a.createElement("select",{defaultValue:u,onChange:this.ChangeLevel},c.a.createElement("option",{value:"0"},"\u8bf7\u9009\u62e9"),c.a.createElement("option",{value:"1"},"\u9ad8"),c.a.createElement("option",{value:"2"},"\u4e2d"),c.a.createElement("option",{value:"3"},"\u4f4e"))),c.a.createElement("li",null,c.a.createElement("span",null,"\u63a8\u9001\uff1a"),c.a.createElement("input",{type:"checkbox",checked:m,onChange:function(e){return t.handleIsPush(e)}})),c.a.createElement("li",null,c.a.createElement("span",null,"\u8054\u52a8\uff1a"),c.a.createElement("input",{type:"checkbox",checked:h,onChange:function(e){return t.handleIsLink(e)}})),c.a.createElement("li",null,c.a.createElement("span",null,"\u62a5\u8b66\uff1a"),c.a.createElement("input",{type:"checkbox",checked:f,onChange:function(e){return t.handleIsAlarm(e)}})),c.a.createElement("li",null,c.a.createElement("span",null,"\u65e5\u5fd7\uff1a"),c.a.createElement("input",{type:"checkbox",checked:g,onChange:function(e){return t.handleIsWrite(e)}})),c.a.createElement("li",null,c.a.createElement("span",null,"\u542f\u7528\uff1a"),c.a.createElement("input",{type:"checkbox",checked:p,onChange:function(e){return t.handleIsEnable(e)}}))),c.a.createElement("div",{className:"configBut"},c.a.createElement("button",{onClick:function(){return t.configSave(d,u,m,h,f,g,p)}},"\u4fdd\u5b58"),c.a.createElement("button",{onClick:function(){return t.Close()}},"\u5173\u95ed")))):"",7===E&&y?c.a.createElement("div",{className:"configShow",style:{width:"350px",left:"270px"}},c.a.createElement("div",{className:"configShowNav"},"\u4fee\u6539\u4e8b\u4ef6",c.a.createElement("i",{onClick:function(){return t.Close()}})),c.a.createElement("div",{className:"configShowConent"},c.a.createElement("div",{className:"configShowConent_cont AlarmCont"},c.a.createElement("li",null,c.a.createElement("span",null,"\u4e8b\u4ef6\u540d\u79f0\uff1a"),c.a.createElement("input",{style:{width:"150px"},type:"text",defaultValue:d,onChange:function(e){return t.syaName(e)}})),c.a.createElement("li",null,c.a.createElement("span",null,"\u4e8b\u4ef6\u7b49\u7ea7\uff1a"),c.a.createElement("select",{defaultValue:u,onChange:this.ChangeLevel},c.a.createElement("option",{value:"0"},"\u8bf7\u9009\u62e9"),c.a.createElement("option",{value:"1"},"\u9ad8"),c.a.createElement("option",{value:"2"},"\u4e2d"),c.a.createElement("option",{value:"3"},"\u4f4e"))),c.a.createElement("li",null,c.a.createElement("span",null,"\u63a8\u9001\uff1a"),c.a.createElement("input",{type:"checkbox",checked:m,onChange:function(e){return t.handleIsPush(e)}})),c.a.createElement("li",null,c.a.createElement("span",null,"\u8054\u52a8\uff1a"),c.a.createElement("input",{type:"checkbox",checked:h,onChange:function(e){return t.handleIsLink(e)}})),c.a.createElement("li",null,c.a.createElement("span",null,"\u62a5\u8b66\uff1a"),c.a.createElement("input",{type:"checkbox",checked:f,onChange:function(e){return t.handleIsAlarm(e)}})),c.a.createElement("li",null,c.a.createElement("span",null,"\u65e5\u5fd7\uff1a"),c.a.createElement("input",{type:"checkbox",checked:g,onChange:function(e){return t.handleIsWrite(e)}})),c.a.createElement("li",null,c.a.createElement("span",null,"\u542f\u7528\uff1a"),c.a.createElement("input",{type:"checkbox",checked:p,onChange:function(e){return t.handleIsEnable(e)}}))),c.a.createElement("div",{className:"configBut"},c.a.createElement("button",{onClick:function(){return t.configSave1(d,u,m,h,f,g,p)}},"\u786e\u5b9a"),c.a.createElement("button",{onClick:function(){return t.Close()}},"\u5173\u95ed")))):"",c.a.createElement("div",{className:"PageShow1 AlarmShow"},c.a.createElement("div",{className:"PageShowCont"},c.a.createElement("h1",null,"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u561b\uff01"),c.a.createElement("h2",null,c.a.createElement("button",{onClick:function(){return t.PageDeleted()}},"\u786e\u5b9a"),c.a.createElement("button",{onClick:function(){return e.PageHide()}},"\u53d6\u6d88")))))}}]),d}(s.PureComponent);t.a=Object(d.b)((function(e){return{adminItem:e.admin.get("adminItem")}}),(function(e){return{navClick:function(t){p.a.Close(),e(u.a.nav_click(t)),v.this.setState({OneList:!0,TwoList:!1,AddAlarm:!1})}}}))(v)}).call(this,a(18))},382:function(e,t,a){e.exports=a(821)},387:function(e,t,a){},411:function(e,t,a){},44:function(e,t,a){},819:function(e,t,a){"use strict";(function(e){var t=a(1),n=a.n(t),l=a(117);e.Url=l.Url,e.IframeUrl=l.IframeUrl,e.WebSocketUrl=l.WebSocketUrl,e.VideoUrl=l.VideoUrl,n.a.ajaxSettings.async=!1,n.a.getJSON("config.json",(function(t){console.log(t),e.Url=t.Url,e.IframeUrl=t.IframeUrl,e.WebSocketUrl=t.WebSocketUrl,e.VideoUrl=t.VideoUrl,n.a.ajaxSettings.async=!0}))}).call(this,a(18))},820:function(e,t,a){"use strict";(function(e){var t=a(1),n=a.n(t),l=a(3);e.Database="dxcyy",e.AlarmNumber=0,e.WebList=[],e.floooList=[],e.AlarmShow=!1,e.GridTree=[],e.Time=function(){setTimeout((function(){n()(".PageShow,.PageShow1").hide()}),3e3)},e.PageHide=function(){n()(".PageShow1").hide()},e.Server=function(){n()(".PageShow1").hide();var t=e.Url.split("api")[0];window.location=t+"Plug-inUnit/output.zip"},e.videoAlart=function(){n()(".videoAlart").hide()},e.videoAlartNB=function(){n()(".videoAlart").show()},e.suspend=function(){var e=n()("#iframeBut").html();console.log(e),"\u6682\u505c"===e?(l.a.multiplier(0),n()("#iframeBut").html("\u7ee7\u7eed")):"\u7ee7\u7eed"===e&&(l.a.multiplier(1),n()("#iframeBut").html("\u6682\u505c"))},e.sigin=function(){l.a.endVod(),l.a.deleteRoamingRoute(),n()(".iframeBut").hide(),l.a.onMap(),l.a.endVod(),l.a.removeBubbleBombbox()}}).call(this,a(18))},821:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(147),i=a.n(o),r=(a(387),a(9)),s=a(10),c=a(12),d=a(11),u=a(68),m=a(27),h=a(16),f=a(71),g=a(338),p=a(21),v=a(38),y=Object(f.c)({admin:p.b,footer:v.b}),b=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||f.d,E=Object(f.e)(y,b(Object(f.a)(g.a))),w=a(339),S=a(342),C=a(356),k=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"shouldComponentUpdate",value:function(e,t){return"PUSH"===this.props.router.location.action}},{key:"render",value:function(){return l.a.createElement(h.a,{store:E},l.a.createElement(u.a,null,l.a.createElement("div",null,l.a.createElement(m.b,{path:"/login",exact:!0,component:w.a,onEnter:function(){document.title="\u5e73\u53f0\u767b\u5f55"}}),l.a.createElement(m.b,{path:"/",exact:!0,component:S.a,onEnter:function(){document.title="\u56fe\u4e3a\u89c6\u667a\u6167\u5b89\u9632\u4e09\u7ef4\u5e73\u53f0"}}),l.a.createElement(m.b,{path:"/admin",exact:!0,component:C.a,onEnter:function(){document.title="\u56fe\u4e3a\u89c6\u667a\u6167\u5b89\u9632\u4e09\u7ef4\u5e73\u53f0-\u540e\u53f0\u7ba1\u7406"}}))))}}]),a}(n.Component);a(819),a(820);i.a.render(l.a.createElement(k,null),document.getElementById("root"))}},[[382,1,2]]]);
//# sourceMappingURL=main.872415c6.chunk.js.map